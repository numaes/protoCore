<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="plural_8py" kind="file" language="Python">
    <compoundname>plural.py</compoundname>
    <innerclass refid="classbabel_1_1plural_1_1PluralRule" prot="public">babel::plural::PluralRule</innerclass>
    <innerclass refid="classbabel_1_1plural_1_1RuleError" prot="public">babel::plural::RuleError</innerclass>
    <innerclass refid="classbabel_1_1plural_1_1__Parser" prot="protected">babel::plural::_Parser</innerclass>
    <innerclass refid="classbabel_1_1plural_1_1__Compiler" prot="protected">babel::plural::_Compiler</innerclass>
    <innerclass refid="classbabel_1_1plural_1_1__PythonCompiler" prot="protected">babel::plural::_PythonCompiler</innerclass>
    <innerclass refid="classbabel_1_1plural_1_1__GettextCompiler" prot="protected">babel::plural::_GettextCompiler</innerclass>
    <innerclass refid="classbabel_1_1plural_1_1__JavaScriptCompiler" prot="protected">babel::plural::_JavaScriptCompiler</innerclass>
    <innerclass refid="classbabel_1_1plural_1_1__UnicodeCompiler" prot="protected">babel::plural::_UnicodeCompiler</innerclass>
    <innernamespace refid="namespacebabel">babel</innernamespace>
    <innernamespace refid="namespacebabel_1_1plural">babel::plural</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacebabel_1_1plural" refkind="compound"><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>babel.numbers</highlight></codeline>
<codeline lineno="3"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>~~~~~~~~~~~~~</highlight></codeline>
<codeline lineno="4"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="5"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>CLDR<sp/>Plural<sp/>support.<sp/><sp/>See<sp/>UTS<sp/>#35.</highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:copyright:<sp/>(c)<sp/>2013-2025<sp/>by<sp/>the<sp/>Babel<sp/>Team.</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:license:<sp/>BSD,<sp/>see<sp/>LICENSE<sp/>for<sp/>more<sp/>details.</highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>__future__<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>annotations</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>decimal</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>re</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>collections.abc<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Iterable,<sp/>Mapping</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>typing<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Any,<sp/>Callable,<sp/>Literal</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal">_plural_tags<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;zero&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;one&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;two&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;few&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;many&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;other&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="18"><highlight class="normal">_fallback_tag<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;other&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1a2d2cc03976e0663db2b50eb2a9c8011d" kindref="member">extract_operands</ref>(source:<sp/>float<sp/>|<sp/>decimal.Decimal)<sp/>-&gt;<sp/>tuple[decimal.Decimal<sp/>|<sp/>int,<sp/>int,<sp/>int,<sp/>int,<sp/>int,<sp/>int,<sp/>Literal[0],<sp/>Literal[0]]:</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Extract<sp/>operands<sp/>from<sp/>a<sp/>decimal,<sp/>a<sp/>float<sp/>or<sp/>an<sp/>int,<sp/>according<sp/>to<sp/>`CLDR<sp/>rules`_.</highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>result<sp/>is<sp/>an<sp/>8-tuple<sp/>(n,<sp/>i,<sp/>v,<sp/>w,<sp/>f,<sp/>t,<sp/>c,<sp/>e),<sp/>where<sp/>those<sp/>symbols<sp/>are<sp/>as<sp/>follows:</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>======<sp/>===============================================================</highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Symbol<sp/>Value</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>------<sp/>---------------------------------------------------------------</highlight></codeline>
<codeline lineno="29"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>n<sp/><sp/><sp/><sp/><sp/><sp/>absolute<sp/>value<sp/>of<sp/>the<sp/>source<sp/>number<sp/>(integer<sp/>and<sp/>decimals).</highlight></codeline>
<codeline lineno="30"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>i<sp/><sp/><sp/><sp/><sp/><sp/>integer<sp/>digits<sp/>of<sp/>n.</highlight></codeline>
<codeline lineno="31"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>v<sp/><sp/><sp/><sp/><sp/><sp/>number<sp/>of<sp/>visible<sp/>fraction<sp/>digits<sp/>in<sp/>n,<sp/>with<sp/>trailing<sp/>zeros.</highlight></codeline>
<codeline lineno="32"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>w<sp/><sp/><sp/><sp/><sp/><sp/>number<sp/>of<sp/>visible<sp/>fraction<sp/>digits<sp/>in<sp/>n,<sp/>without<sp/>trailing<sp/>zeros.</highlight></codeline>
<codeline lineno="33"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>f<sp/><sp/><sp/><sp/><sp/><sp/>visible<sp/>fractional<sp/>digits<sp/>in<sp/>n,<sp/>with<sp/>trailing<sp/>zeros.</highlight></codeline>
<codeline lineno="34"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>t<sp/><sp/><sp/><sp/><sp/><sp/>visible<sp/>fractional<sp/>digits<sp/>in<sp/>n,<sp/>without<sp/>trailing<sp/>zeros.</highlight></codeline>
<codeline lineno="35"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>c<sp/><sp/><sp/><sp/><sp/><sp/>compact<sp/>decimal<sp/>exponent<sp/>value:<sp/>exponent<sp/>of<sp/>the<sp/>power<sp/>of<sp/>10<sp/>used<sp/>in<sp/>compact<sp/>decimal<sp/>formatting.</highlight></codeline>
<codeline lineno="36"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>e<sp/><sp/><sp/><sp/><sp/><sp/>currently,<sp/>synonym<sp/>for<sp/>‘c’.<sp/>however,<sp/>may<sp/>be<sp/>redefined<sp/>in<sp/>the<sp/>future.</highlight></codeline>
<codeline lineno="37"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>======<sp/>===============================================================</highlight></codeline>
<codeline lineno="38"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="39"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>..<sp/>_`CLDR<sp/>rules`:<sp/>https://www.unicode.org/reports/tr35/tr35-61/tr35-numbers.html#Operands</highlight></codeline>
<codeline lineno="40"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="41"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:param<sp/>source:<sp/>A<sp/>real<sp/>number</highlight></codeline>
<codeline lineno="42"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:type<sp/>source:<sp/>int|float|decimal.Decimal</highlight></codeline>
<codeline lineno="43"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:return:<sp/>A<sp/>n-i-v-w-f-t-c-e<sp/>tuple</highlight></codeline>
<codeline lineno="44"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:rtype:<sp/>tuple[decimal.Decimal,<sp/>int,<sp/>int,<sp/>int,<sp/>int,<sp/>int,<sp/>int,<sp/>int]</highlight></codeline>
<codeline lineno="45"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>n<sp/>=<sp/>abs(source)</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>i<sp/>=<sp/>int(n)</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(n,<sp/>float):</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>i<sp/>==<sp/>n:</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>i</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Cast<sp/>the<sp/>`float`<sp/>to<sp/>a<sp/>number<sp/>via<sp/>the<sp/>string<sp/>representation.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>This<sp/>is<sp/>required<sp/>for<sp/>Python<sp/>2.6<sp/>anyway<sp/>(it<sp/>will<sp/>straight<sp/>out<sp/>fail<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>do<sp/>the<sp/>conversion<sp/>otherwise),<sp/>and<sp/>it&apos;s<sp/>highly<sp/>unlikely<sp/>that<sp/>the<sp/>user</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>actually<sp/>wants<sp/>the<sp/>lossless<sp/>conversion<sp/>behavior<sp/>(quoting<sp/>the<sp/>Python</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>documentation):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>&gt;<sp/>If<sp/>value<sp/>is<sp/>a<sp/>float,<sp/>the<sp/>binary<sp/>floating<sp/>point<sp/>value<sp/>is<sp/>losslessly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>&gt;<sp/>converted<sp/>to<sp/>its<sp/>exact<sp/>decimal<sp/>equivalent.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>&gt;<sp/>This<sp/>conversion<sp/>can<sp/>often<sp/>require<sp/>53<sp/>or<sp/>more<sp/>digits<sp/>of<sp/>precision.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Should<sp/>the<sp/>user<sp/>want<sp/>that<sp/>behavior,<sp/>they<sp/>can<sp/>simply<sp/>pass<sp/>in<sp/>a<sp/>pre-</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>converted<sp/>`Decimal`<sp/>instance<sp/>of<sp/>desired<sp/>accuracy.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n<sp/>=<sp/>decimal.Decimal(str(n))</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(n,<sp/>decimal.Decimal):</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dec_tuple<sp/>=<sp/>n.as_tuple()</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exp<sp/>=<sp/>dec_tuple.exponent</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fraction_digits<sp/>=<sp/>dec_tuple.digits[exp:]<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>exp<sp/>&lt;<sp/>0<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>()</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>trailing<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.join(str(d)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>d<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>fraction_digits)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>no_trailing<sp/>=<sp/>trailing.rstrip(</highlight><highlight class="stringliteral">&apos;0&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>len(trailing)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>w<sp/>=<sp/>len(no_trailing)</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f<sp/>=<sp/>int(trailing<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>0)</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t<sp/>=<sp/>int(no_trailing<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>0)</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>w<sp/>=<sp/>f<sp/>=<sp/>t<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>c<sp/>=<sp/>e<sp/>=<sp/>0<sp/><sp/></highlight><highlight class="comment">#<sp/>TODO:<sp/>c<sp/>and<sp/>e<sp/>are<sp/>not<sp/>supported</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>n,<sp/>i,<sp/>v,<sp/>w,<sp/>f,<sp/>t,<sp/>c,<sp/>e</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80" refid="classbabel_1_1plural_1_1PluralRule" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1PluralRule" kindref="compound">PluralRule</ref>:</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Represents<sp/>a<sp/>set<sp/>of<sp/>language<sp/>pluralization<sp/>rules.<sp/><sp/>The<sp/>constructor</highlight></codeline>
<codeline lineno="82"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>accepts<sp/>a<sp/>list<sp/>of<sp/>(tag,<sp/>expr)<sp/>tuples<sp/>or<sp/>a<sp/>dict<sp/>of<sp/>`CLDR<sp/>rules`_.<sp/>The</highlight></codeline>
<codeline lineno="83"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>resulting<sp/>object<sp/>is<sp/>callable<sp/>and<sp/>accepts<sp/>one<sp/>parameter<sp/>with<sp/>a<sp/>positive<sp/>or</highlight></codeline>
<codeline lineno="84"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>negative<sp/>number<sp/>(both<sp/>integer<sp/>and<sp/>float)<sp/>for<sp/>the<sp/>number<sp/>that<sp/>indicates<sp/>the</highlight></codeline>
<codeline lineno="85"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>plural<sp/>form<sp/>for<sp/>a<sp/>string<sp/>and<sp/>returns<sp/>the<sp/>tag<sp/>for<sp/>the<sp/>format:</highlight></codeline>
<codeline lineno="86"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="87"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>rule<sp/>=<sp/>PluralRule({&apos;one&apos;:<sp/>&apos;n<sp/>is<sp/>1&apos;})</highlight></codeline>
<codeline lineno="88"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>rule(1)</highlight></codeline>
<codeline lineno="89"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;one&apos;</highlight></codeline>
<codeline lineno="90"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>rule(2)</highlight></codeline>
<codeline lineno="91"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;other&apos;</highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="93"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Currently<sp/>the<sp/>CLDR<sp/>defines<sp/>these<sp/>tags:<sp/>zero,<sp/>one,<sp/>two,<sp/>few,<sp/>many<sp/>and</highlight></codeline>
<codeline lineno="94"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>other<sp/>where<sp/>other<sp/>is<sp/>an<sp/>implicit<sp/>default.<sp/><sp/>Rules<sp/>should<sp/>be<sp/>mutually</highlight></codeline>
<codeline lineno="95"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>exclusive;<sp/>for<sp/>a<sp/>given<sp/>numeric<sp/>value,<sp/>only<sp/>one<sp/>rule<sp/>should<sp/>apply<sp/>(i.e.</highlight></codeline>
<codeline lineno="96"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>the<sp/>condition<sp/>should<sp/>only<sp/>be<sp/>true<sp/>for<sp/>one<sp/>of<sp/>the<sp/>plural<sp/>rule<sp/>elements.</highlight></codeline>
<codeline lineno="97"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="98"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>..<sp/>_`CLDR<sp/>rules`:<sp/>https://www.unicode.org/reports/tr35/tr35-33/tr35-numbers.html#Language_Plural_Rules</highlight></codeline>
<codeline lineno="99"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>__slots__<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;abstract&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;_func&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1PluralRule_1a9b7cf4572f9bcbc1944246a0e346ef57" kindref="member">__init__</ref>(self,<sp/>rules:<sp/>Mapping[str,<sp/>str]<sp/>|<sp/>Iterable[tuple[str,<sp/>str]])<sp/>-&gt;<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Initialize<sp/>the<sp/>rule<sp/>instance.</highlight></codeline>
<codeline lineno="105"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="106"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>rules:<sp/>a<sp/>list<sp/>of<sp/>``(tag,<sp/>expr)``)<sp/>tuples<sp/>with<sp/>the<sp/>rules</highlight></codeline>
<codeline lineno="107"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>conforming<sp/>to<sp/>UTS<sp/>#35<sp/>or<sp/>a<sp/>dict<sp/>with<sp/>the<sp/>tags<sp/>as<sp/>keys</highlight></codeline>
<codeline lineno="108"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>expressions<sp/>as<sp/>values.</highlight></codeline>
<codeline lineno="109"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:raise<sp/>RuleError:<sp/>if<sp/>the<sp/>expression<sp/>is<sp/>malformed</highlight></codeline>
<codeline lineno="110"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(rules,<sp/>Mapping):</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rules<sp/>=<sp/>rules.items()</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found<sp/>=<sp/>set()</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1ad90099cb1fc1700c93543108f610e5dc" kindref="member">abstract</ref>:<sp/>list[tuple[str,<sp/>Any]]<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>key,<sp/>expr<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>sorted(rules):</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>key<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>_plural_tags:</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>ValueError(f</highlight><highlight class="stringliteral">&quot;unknown<sp/>tag<sp/>{key!r}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>key<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>found:</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>ValueError(f</highlight><highlight class="stringliteral">&quot;tag<sp/>{key!r}<sp/>defined<sp/>twice&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found.add(key)</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ast<sp/>=<sp/><ref refid="classbabel_1_1plural_1_1__Parser" kindref="compound">_Parser</ref>(expr).ast</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>ast:</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1ad90099cb1fc1700c93543108f610e5dc" kindref="member">abstract</ref>.append((key,<sp/>ast))</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1PluralRule_1a94c1437b7c660887a12579a4a2cdb924" kindref="member">__repr__</ref>(self)<sp/>-&gt;<sp/>str:</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rules<sp/>=<sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1aa3f468d9cfb1744df64b980f7b41d8d6" kindref="member">rules</ref></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>args<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;,<sp/>&quot;</highlight><highlight class="normal">.join([f</highlight><highlight class="stringliteral">&quot;{tag}:<sp/>{rules[tag]}&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>tag<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>_plural_tags<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>tag<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>rules])</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>f</highlight><highlight class="stringliteral">&quot;&lt;{type(self).__name__}<sp/>{args!r}&gt;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@classmethod</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">parse(cls,<sp/>rules:<sp/>Mapping[str,<sp/>str]<sp/>|<sp/>Iterable[tuple[str,<sp/>str]]<sp/>|<sp/>PluralRule)<sp/>-&gt;<sp/>PluralRule:</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Create<sp/>a<sp/>`PluralRule`<sp/>instance<sp/>for<sp/>the<sp/>given<sp/>rules.<sp/><sp/>If<sp/>the<sp/>rules</highlight></codeline>
<codeline lineno="133"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>are<sp/>a<sp/>`PluralRule`<sp/>object,<sp/>that<sp/>object<sp/>is<sp/>returned.</highlight></codeline>
<codeline lineno="134"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="135"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:param<sp/>rules:<sp/>the<sp/>rules<sp/>as<sp/>list<sp/>or<sp/>dict,<sp/>or<sp/>a<sp/>`PluralRule`<sp/>object</highlight></codeline>
<codeline lineno="136"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:raise<sp/>RuleError:<sp/>if<sp/>the<sp/>expression<sp/>is<sp/>malformed</highlight></codeline>
<codeline lineno="137"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(rules,<sp/>PluralRule):</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rules</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>cls(rules)</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@property</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1PluralRule_1aa3f468d9cfb1744df64b980f7b41d8d6" kindref="member">rules</ref>(self)<sp/>-&gt;<sp/>Mapping[str,<sp/>str]:</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;The<sp/>`PluralRule`<sp/>as<sp/>a<sp/>dict<sp/>of<sp/>unicode<sp/>plural<sp/>rules.</highlight></codeline>
<codeline lineno="145"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="146"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>rule<sp/>=<sp/>PluralRule({&apos;one&apos;:<sp/>&apos;n<sp/>is<sp/>1&apos;})</highlight></codeline>
<codeline lineno="147"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>rule.rules</highlight></codeline>
<codeline lineno="148"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{&apos;one&apos;:<sp/>&apos;n<sp/>is<sp/>1&apos;}</highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_compile<sp/>=<sp/><ref refid="classbabel_1_1plural_1_1__UnicodeCompiler" kindref="compound">_UnicodeCompiler</ref>().compile</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>{tag:<sp/>_compile(ast)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>tag,<sp/>ast<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1ad90099cb1fc1700c93543108f610e5dc" kindref="member">abstract</ref>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="preprocessor">@property</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1PluralRule_1a9cd49fe4bf5531fa8b720da802b12232" kindref="member">tags</ref>(self)<sp/>-&gt;<sp/>frozenset[str]:</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;A<sp/>set<sp/>of<sp/>explicitly<sp/>defined<sp/>tags<sp/>in<sp/>this<sp/>rule.<sp/><sp/>The<sp/>implicit<sp/>default</highlight></codeline>
<codeline lineno="156"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>``&apos;other&apos;``<sp/>rules<sp/>is<sp/>not<sp/>part<sp/>of<sp/>this<sp/>set<sp/>unless<sp/>there<sp/>is<sp/>an<sp/>explicit</highlight></codeline>
<codeline lineno="157"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rule<sp/>for<sp/>it.</highlight></codeline>
<codeline lineno="158"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>frozenset(i[0]<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1ad90099cb1fc1700c93543108f610e5dc" kindref="member">abstract</ref>)</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1PluralRule_1aba973df8811ba5848aaa41b97de4e1a1" kindref="member">__getstate__</ref>(self)<sp/>-&gt;<sp/>list[tuple[str,<sp/>Any]]:</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1ad90099cb1fc1700c93543108f610e5dc" kindref="member">abstract</ref></highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1PluralRule_1a4266c2d82babfb5c9acd2f7a2bcbafc2" kindref="member">__setstate__</ref>(self,<sp/>abstract:<sp/>list[tuple[str,<sp/>Any]])<sp/>-&gt;<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1ad90099cb1fc1700c93543108f610e5dc" kindref="member">abstract</ref><sp/>=<sp/>abstract</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1PluralRule_1aaf0596ca7ed3b9c8a074ab8dd16aa9f7" kindref="member">__call__</ref>(self,<sp/>n:<sp/>float<sp/>|<sp/>decimal.Decimal)<sp/>-&gt;<sp/>str:</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>hasattr(self,<sp/></highlight><highlight class="stringliteral">&apos;_func&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1ae9eff860808d8937a3e512798a8bcd4c" kindref="member">_func</ref><sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a5ed4b629e00de0a1116ab5c307cb5f25" kindref="member">to_python</ref>(self)</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1PluralRule_1ae9eff860808d8937a3e512798a8bcd4c" kindref="member">_func</ref>(n)</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1ae649875f94d794777275f4cce4be0f56" kindref="member">to_javascript</ref>(rule:<sp/>Mapping[str,<sp/>str]<sp/>|<sp/>Iterable[tuple[str,<sp/>str]]<sp/>|<sp/>PluralRule)<sp/>-&gt;<sp/>str:</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Convert<sp/>a<sp/>list/dict<sp/>of<sp/>rules<sp/>or<sp/>a<sp/>`PluralRule`<sp/>object<sp/>into<sp/>a<sp/>JavaScript</highlight></codeline>
<codeline lineno="175"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>function.<sp/><sp/>This<sp/>function<sp/>depends<sp/>on<sp/>no<sp/>external<sp/>library:</highlight></codeline>
<codeline lineno="176"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="177"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>to_javascript({&apos;one&apos;:<sp/>&apos;n<sp/>is<sp/>1&apos;})</highlight></codeline>
<codeline lineno="178"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;(function(n)<sp/>{<sp/>return<sp/>(n<sp/>==<sp/>1)<sp/>?<sp/>&apos;one&apos;<sp/>:<sp/>&apos;other&apos;;<sp/>})&quot;</highlight></codeline>
<codeline lineno="179"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="180"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Implementation<sp/>detail:<sp/>The<sp/>function<sp/>generated<sp/>will<sp/>probably<sp/>evaluate</highlight></codeline>
<codeline lineno="181"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>expressions<sp/>involved<sp/>into<sp/>range<sp/>operations<sp/>multiple<sp/>times.<sp/><sp/>This<sp/>has<sp/>the</highlight></codeline>
<codeline lineno="182"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>advantage<sp/>that<sp/>external<sp/>helper<sp/>functions<sp/>are<sp/>not<sp/>required<sp/>and<sp/>is<sp/>not<sp/>a</highlight></codeline>
<codeline lineno="183"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>big<sp/>performance<sp/>hit<sp/>for<sp/>these<sp/>simple<sp/>calculations.</highlight></codeline>
<codeline lineno="184"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="185"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:param<sp/>rule:<sp/>the<sp/>rules<sp/>as<sp/>list<sp/>or<sp/>dict,<sp/>or<sp/>a<sp/>`PluralRule`<sp/>object</highlight></codeline>
<codeline lineno="186"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:raise<sp/>RuleError:<sp/>if<sp/>the<sp/>expression<sp/>is<sp/>malformed</highlight></codeline>
<codeline lineno="187"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>to_js<sp/>=<sp/><ref refid="classbabel_1_1plural_1_1__JavaScriptCompiler" kindref="compound">_JavaScriptCompiler</ref>().compile</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;(function(n)<sp/>{<sp/>return<sp/>&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>tag,<sp/>ast<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>PluralRule.parse(rule).abstract:</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.append(f</highlight><highlight class="stringliteral">&quot;{to_js(ast)}<sp/>?<sp/>{tag!r}<sp/>:<sp/>&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/>result.append(</highlight><highlight class="stringliteral">&apos;%r;<sp/>})&apos;</highlight><highlight class="normal"><sp/>%<sp/>_fallback_tag)</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.join(result)</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1a5ed4b629e00de0a1116ab5c307cb5f25" kindref="member">to_python</ref>(rule:<sp/>Mapping[str,<sp/>str]<sp/>|<sp/>Iterable[tuple[str,<sp/>str]]<sp/>|<sp/>PluralRule)<sp/>-&gt;<sp/>Callable[[float<sp/>|<sp/>decimal.Decimal],<sp/>str]:</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Convert<sp/>a<sp/>list/dict<sp/>of<sp/>rules<sp/>or<sp/>a<sp/>`PluralRule`<sp/>object<sp/>into<sp/>a<sp/>regular</highlight></codeline>
<codeline lineno="198"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Python<sp/>function.<sp/><sp/>This<sp/>is<sp/>useful<sp/>in<sp/>situations<sp/>where<sp/>you<sp/>need<sp/>a<sp/>real</highlight></codeline>
<codeline lineno="199"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>function<sp/>and<sp/>don&apos;t<sp/>are<sp/>about<sp/>the<sp/>actual<sp/>rule<sp/>object:</highlight></codeline>
<codeline lineno="200"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="201"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>func<sp/>=<sp/>to_python({&apos;one&apos;:<sp/>&apos;n<sp/>is<sp/>1&apos;,<sp/>&apos;few&apos;:<sp/>&apos;n<sp/>in<sp/>2..4&apos;})</highlight></codeline>
<codeline lineno="202"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>func(1)</highlight></codeline>
<codeline lineno="203"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;one&apos;</highlight></codeline>
<codeline lineno="204"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>func(3)</highlight></codeline>
<codeline lineno="205"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;few&apos;</highlight></codeline>
<codeline lineno="206"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>func<sp/>=<sp/>to_python({&apos;one&apos;:<sp/>&apos;n<sp/>in<sp/>1,11&apos;,<sp/>&apos;few&apos;:<sp/>&apos;n<sp/>in<sp/>3..10,13..19&apos;})</highlight></codeline>
<codeline lineno="207"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>func(11)</highlight></codeline>
<codeline lineno="208"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;one&apos;</highlight></codeline>
<codeline lineno="209"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>func(15)</highlight></codeline>
<codeline lineno="210"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;few&apos;</highlight></codeline>
<codeline lineno="211"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="212"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:param<sp/>rule:<sp/>the<sp/>rules<sp/>as<sp/>list<sp/>or<sp/>dict,<sp/>or<sp/>a<sp/>`PluralRule`<sp/>object</highlight></codeline>
<codeline lineno="213"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:raise<sp/>RuleError:<sp/>if<sp/>the<sp/>expression<sp/>is<sp/>malformed</highlight></codeline>
<codeline lineno="214"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/>namespace<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;IN&apos;</highlight><highlight class="normal">:<sp/>in_range_list,</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;WITHIN&apos;</highlight><highlight class="normal">:<sp/>within_range_list,</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;MOD&apos;</highlight><highlight class="normal">:<sp/>cldr_modulo,</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;extract_operands&apos;</highlight><highlight class="normal">:<sp/>extract_operands,</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/>to_python_func<sp/>=<sp/><ref refid="classbabel_1_1plural_1_1__PythonCompiler" kindref="compound">_PythonCompiler</ref>().compile</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;def<sp/>evaluate(n):&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;<sp/>n,<sp/>i,<sp/>v,<sp/>w,<sp/>f,<sp/>t,<sp/>c,<sp/>e<sp/>=<sp/>extract_operands(n)&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>tag,<sp/>ast<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>PluralRule.parse(rule).abstract:</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>the<sp/>str()<sp/>call<sp/>is<sp/>to<sp/>coerce<sp/>the<sp/>tag<sp/>to<sp/>the<sp/>native<sp/>string.<sp/><sp/>It&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>a<sp/>limited<sp/>ascii<sp/>restricted<sp/>set<sp/>of<sp/>tags<sp/>anyways<sp/>so<sp/>that<sp/>is<sp/>fine.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.append(f</highlight><highlight class="stringliteral">&quot;<sp/>if<sp/>({to_python_func(ast)}):<sp/>return<sp/>{str(tag)!r}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>result.append(f</highlight><highlight class="stringliteral">&quot;<sp/>return<sp/>{_fallback_tag!r}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/>code<sp/>=<sp/>compile(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(result),<sp/></highlight><highlight class="stringliteral">&apos;&lt;rule&gt;&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;exec&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/>eval(code,<sp/>namespace)</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>namespace[</highlight><highlight class="stringliteral">&apos;evaluate&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1aeaa439c79bf752539e34bac6d7a6a1ce" kindref="member">to_gettext</ref>(rule:<sp/>Mapping[str,<sp/>str]<sp/>|<sp/>Iterable[tuple[str,<sp/>str]]<sp/>|<sp/>PluralRule)<sp/>-&gt;<sp/>str:</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;The<sp/>plural<sp/>rule<sp/>as<sp/>gettext<sp/>expression.<sp/><sp/>The<sp/>gettext<sp/>expression<sp/>is</highlight></codeline>
<codeline lineno="238"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>technically<sp/>limited<sp/>to<sp/>integers<sp/>and<sp/>returns<sp/>indices<sp/>rather<sp/>than<sp/>tags.</highlight></codeline>
<codeline lineno="239"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="240"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>to_gettext({&apos;one&apos;:<sp/>&apos;n<sp/>is<sp/>1&apos;,<sp/>&apos;two&apos;:<sp/>&apos;n<sp/>is<sp/>2&apos;})</highlight></codeline>
<codeline lineno="241"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&apos;nplurals=3;<sp/>plural=((n<sp/>==<sp/>1)<sp/>?<sp/>0<sp/>:<sp/>(n<sp/>==<sp/>2)<sp/>?<sp/>1<sp/>:<sp/>2);&apos;</highlight></codeline>
<codeline lineno="242"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="243"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:param<sp/>rule:<sp/>the<sp/>rules<sp/>as<sp/>list<sp/>or<sp/>dict,<sp/>or<sp/>a<sp/>`PluralRule`<sp/>object</highlight></codeline>
<codeline lineno="244"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:raise<sp/>RuleError:<sp/>if<sp/>the<sp/>expression<sp/>is<sp/>malformed</highlight></codeline>
<codeline lineno="245"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/>rule<sp/>=<sp/>PluralRule.parse(rule)</highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>used_tags<sp/>=<sp/>rule.tags<sp/>|<sp/>{_fallback_tag}</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/>_compile<sp/>=<sp/><ref refid="classbabel_1_1plural_1_1__GettextCompiler" kindref="compound">_GettextCompiler</ref>().compile</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/>_get_index<sp/>=<sp/>[tag<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>tag<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>_plural_tags<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>tag<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>used_tags].index</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/>result<sp/>=<sp/>[f</highlight><highlight class="stringliteral">&quot;nplurals={len(used_tags)};<sp/>plural=(&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>tag,<sp/>ast<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>rule.abstract:</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.append(f</highlight><highlight class="stringliteral">&quot;{_compile(ast)}<sp/>?<sp/>{_get_index(tag)}<sp/>:<sp/>&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>result.append(f</highlight><highlight class="stringliteral">&quot;{_get_index(_fallback_tag)});&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.join(result)</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1af7b4321e6122599d51b0b34c1a0e4abf" kindref="member">in_range_list</ref>(num:<sp/>float<sp/>|<sp/>decimal.Decimal,<sp/>range_list:<sp/>Iterable[Iterable[float<sp/>|<sp/>decimal.Decimal]])<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Integer<sp/>range<sp/>list<sp/>test.<sp/><sp/>This<sp/>is<sp/>the<sp/>callback<sp/>for<sp/>the<sp/>&quot;in&quot;<sp/>operator</highlight></codeline>
<codeline lineno="261"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>of<sp/>the<sp/>UTS<sp/>#35<sp/>pluralization<sp/>rule<sp/>language:</highlight></codeline>
<codeline lineno="262"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="263"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>in_range_list(1,<sp/>[(1,<sp/>3)])</highlight></codeline>
<codeline lineno="264"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="265"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>in_range_list(3,<sp/>[(1,<sp/>3)])</highlight></codeline>
<codeline lineno="266"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="267"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>in_range_list(3,<sp/>[(1,<sp/>3),<sp/>(5,<sp/>8)])</highlight></codeline>
<codeline lineno="268"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="269"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>in_range_list(1.2,<sp/>[(1,<sp/>4)])</highlight></codeline>
<codeline lineno="270"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>False</highlight></codeline>
<codeline lineno="271"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>in_range_list(10,<sp/>[(1,<sp/>4)])</highlight></codeline>
<codeline lineno="272"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>False</highlight></codeline>
<codeline lineno="273"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>in_range_list(10,<sp/>[(1,<sp/>4),<sp/>(6,<sp/>8)])</highlight></codeline>
<codeline lineno="274"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>False</highlight></codeline>
<codeline lineno="275"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>num<sp/>==<sp/>int(num)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1abbd36163b44bbbfd4ec75f0a977142b8" kindref="member">within_range_list</ref>(num,<sp/>range_list)</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1abbd36163b44bbbfd4ec75f0a977142b8" kindref="member">within_range_list</ref>(num:<sp/>float<sp/>|<sp/>decimal.Decimal,<sp/>range_list:<sp/>Iterable[Iterable[float<sp/>|<sp/>decimal.Decimal]])<sp/>-&gt;<sp/>bool:</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Float<sp/>range<sp/>test.<sp/><sp/>This<sp/>is<sp/>the<sp/>callback<sp/>for<sp/>the<sp/>&quot;within&quot;<sp/>operator</highlight></codeline>
<codeline lineno="281"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>of<sp/>the<sp/>UTS<sp/>#35<sp/>pluralization<sp/>rule<sp/>language:</highlight></codeline>
<codeline lineno="282"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="283"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>within_range_list(1,<sp/>[(1,<sp/>3)])</highlight></codeline>
<codeline lineno="284"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="285"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>within_range_list(1.0,<sp/>[(1,<sp/>3)])</highlight></codeline>
<codeline lineno="286"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="287"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>within_range_list(1.2,<sp/>[(1,<sp/>4)])</highlight></codeline>
<codeline lineno="288"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="289"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>within_range_list(8.8,<sp/>[(1,<sp/>4),<sp/>(7,<sp/>15)])</highlight></codeline>
<codeline lineno="290"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>True</highlight></codeline>
<codeline lineno="291"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>within_range_list(10,<sp/>[(1,<sp/>4)])</highlight></codeline>
<codeline lineno="292"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>False</highlight></codeline>
<codeline lineno="293"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>within_range_list(10.5,<sp/>[(1,<sp/>4),<sp/>(20,<sp/>30)])</highlight></codeline>
<codeline lineno="294"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>False</highlight></codeline>
<codeline lineno="295"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>any(min_<sp/>&lt;=<sp/>num<sp/>&lt;=<sp/>max_<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>min_,<sp/>max_<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range_list)</highlight></codeline>
<codeline lineno="297"><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1a81d4e8322877fff020cbf246751660e0" kindref="member">cldr_modulo</ref>(a:<sp/>float,<sp/>b:<sp/>float)<sp/>-&gt;<sp/>float:</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Javaish<sp/>modulo.<sp/><sp/>This<sp/>modulo<sp/>operator<sp/>returns<sp/>the<sp/>value<sp/>with<sp/>the<sp/>sign</highlight></codeline>
<codeline lineno="301"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>of<sp/>the<sp/>dividend<sp/>rather<sp/>than<sp/>the<sp/>divisor<sp/>like<sp/>Python<sp/>does:</highlight></codeline>
<codeline lineno="302"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="303"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>cldr_modulo(-3,<sp/>5)</highlight></codeline>
<codeline lineno="304"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-3</highlight></codeline>
<codeline lineno="305"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>cldr_modulo(-3,<sp/>-5)</highlight></codeline>
<codeline lineno="306"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-3</highlight></codeline>
<codeline lineno="307"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&gt;&gt;&gt;<sp/>cldr_modulo(3,<sp/>5)</highlight></codeline>
<codeline lineno="308"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>3</highlight></codeline>
<codeline lineno="309"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/>reverse<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>a<sp/>&lt;<sp/>0:</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a<sp/>*=<sp/>-1</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reverse<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>b<sp/>&lt;<sp/>0:</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>*=<sp/>-1</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/>rv<sp/>=<sp/>a<sp/>%<sp/>b</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>reverse:</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rv<sp/>*=<sp/>-1</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rv</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight></codeline>
<codeline lineno="322" refid="classbabel_1_1plural_1_1RuleError" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1RuleError" kindref="compound">RuleError</ref>(Exception):</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Raised<sp/>if<sp/>a<sp/>rule<sp/>is<sp/>malformed.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal">_VARS<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;n&apos;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>absolute<sp/>value<sp/>of<sp/>the<sp/>source<sp/>number.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;i&apos;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>integer<sp/>digits<sp/>of<sp/>n.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;v&apos;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>number<sp/>of<sp/>visible<sp/>fraction<sp/>digits<sp/>in<sp/>n,<sp/>with<sp/>trailing<sp/>zeros.*</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;w&apos;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>number<sp/>of<sp/>visible<sp/>fraction<sp/>digits<sp/>in<sp/>n,<sp/>without<sp/>trailing<sp/>zeros.*</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;f&apos;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>visible<sp/>fraction<sp/>digits<sp/>in<sp/>n,<sp/>with<sp/>trailing<sp/>zeros.*</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;t&apos;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>visible<sp/>fraction<sp/>digits<sp/>in<sp/>n,<sp/>without<sp/>trailing<sp/>zeros.*</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;c&apos;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>compact<sp/>decimal<sp/>exponent<sp/>value:<sp/>exponent<sp/>of<sp/>the<sp/>power<sp/>of<sp/>10<sp/>used<sp/>in<sp/>compact<sp/>decimal<sp/>formatting.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;e&apos;</highlight><highlight class="normal">,<sp/><sp/></highlight><highlight class="comment">#<sp/>currently,<sp/>synonym<sp/>for<sp/>`c`.<sp/>however,<sp/>may<sp/>be<sp/>redefined<sp/>in<sp/>the<sp/>future.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal">}</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal">_RULES:<sp/>list[tuple[str<sp/>|<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>re.Pattern[str]]]<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/>(</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>re.compile(</highlight><highlight class="stringliteral">r&apos;\s+&apos;</highlight><highlight class="normal">,<sp/>re.UNICODE)),</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/>re.compile(fr</highlight><highlight class="stringliteral">&apos;\b(and|or|is|(?:with)?in|not|mod|[{&quot;&quot;.join(_VARS)}])\b&apos;</highlight><highlight class="normal">)),</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">,<sp/>re.compile(</highlight><highlight class="stringliteral">r&apos;\d+&apos;</highlight><highlight class="normal">)),</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;symbol&apos;</highlight><highlight class="normal">,<sp/>re.compile(</highlight><highlight class="stringliteral">r&apos;%|,|!=|=&apos;</highlight><highlight class="normal">)),</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;ellipsis&apos;</highlight><highlight class="normal">,<sp/>re.compile(</highlight><highlight class="stringliteral">r&apos;\.{2,3}|\u2026&apos;</highlight><highlight class="normal">,<sp/>re.UNICODE)),<sp/><sp/></highlight><highlight class="comment">#<sp/>U+2026:<sp/>ELLIPSIS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal">]</highlight></codeline>
<codeline lineno="344"><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1ac6e85af2308b2391bd884378f47dd10d" kindref="member">tokenize_rule</ref>(s:<sp/>str)<sp/>-&gt;<sp/>list[tuple[str,<sp/>str]]:</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/>s<sp/>=<sp/>s.split(</highlight><highlight class="stringliteral">&apos;@&apos;</highlight><highlight class="normal">)[0]</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/>result:<sp/>list[tuple[str,<sp/>str]]<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/>end<sp/>=<sp/>len(s)</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>pos<sp/>&lt;<sp/>end:</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>tok,<sp/>rule<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>_RULES:</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>rule.match(s,<sp/>pos)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>=<sp/>match.end()</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>tok:</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.append((tok,<sp/>match.group()))</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>RuleError(f</highlight><highlight class="stringliteral">&quot;malformed<sp/>CLDR<sp/>pluralization<sp/>rule.<sp/><sp/>Got<sp/>unexpected<sp/>{s[pos]!r}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result[::-1]</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"></highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1aab8e7afc84fcac341a958fc2edfa305b" kindref="member">test_next_token</ref>(</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/>tokens:<sp/>list[tuple[str,<sp/>str]],</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/>type_:<sp/>str,</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/>value:<sp/>str<sp/>|<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="368"><highlight class="normal">)<sp/>-&gt;<sp/>list[tuple[str,<sp/>str]]<sp/>|<sp/>bool:</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>tokens<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>tokens[-1][0]<sp/>==<sp/>type_<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>\</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(value<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>tokens[-1][1]<sp/>==<sp/>value)</highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(tokens:<sp/>list[tuple[str,<sp/>str]],<sp/>type_:<sp/>str,<sp/>value:<sp/>str<sp/>|<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1aab8e7afc84fcac341a958fc2edfa305b" kindref="member">test_next_token</ref>(tokens,<sp/>type_,<sp/>value):</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>tokens.pop()</highlight></codeline>
<codeline lineno="376"><highlight class="normal"></highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1a99f5d7a3d5c650c856027787b6b42af8" kindref="member">value_node</ref>(value:<sp/>int)<sp/>-&gt;<sp/>tuple[Literal[</highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">],<sp/>tuple[int]]:</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">,<sp/>(value,<sp/>)</highlight></codeline>
<codeline lineno="380"><highlight class="normal"></highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1a3b99b4bcbc3e722a5b504fd1dc5c7dbd" kindref="member">ident_node</ref>(name:<sp/>str)<sp/>-&gt;<sp/>tuple[str,<sp/>tuple[()]]:</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>name,<sp/>()</highlight></codeline>
<codeline lineno="384"><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1ab4b6d90915547cb30337a2dcd1aab6a8" kindref="member">range_list_node</ref>(</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/>range_list:<sp/>Iterable[Iterable[float<sp/>|<sp/>decimal.Decimal]],</highlight></codeline>
<codeline lineno="388"><highlight class="normal">)<sp/>-&gt;<sp/>tuple[Literal[</highlight><highlight class="stringliteral">&apos;range_list&apos;</highlight><highlight class="normal">],<sp/>Iterable[Iterable[float<sp/>|<sp/>decimal.Decimal]]]:</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;range_list&apos;</highlight><highlight class="normal">,<sp/>range_list</highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1af746862333e6edd24ae3466407a7fef0" kindref="member">negate</ref>(rv:<sp/>tuple[Any,<sp/>...])<sp/>-&gt;<sp/>tuple[Literal[</highlight><highlight class="stringliteral">&apos;not&apos;</highlight><highlight class="normal">],<sp/>tuple[tuple[Any,<sp/>...]]]:</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;not&apos;</highlight><highlight class="normal">,<sp/>(rv,)</highlight></codeline>
<codeline lineno="394"><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396" refid="classbabel_1_1plural_1_1__Parser" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser" kindref="compound">_Parser</ref>:</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Internal<sp/>parser.<sp/><sp/>This<sp/>class<sp/>can<sp/>translate<sp/>a<sp/>single<sp/>rule<sp/>into<sp/>an<sp/>abstract</highlight></codeline>
<codeline lineno="398"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>tree<sp/>of<sp/>tuples.<sp/>It<sp/>implements<sp/>the<sp/>following<sp/>grammar::</highlight></codeline>
<codeline lineno="399"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="400"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>condition<sp/><sp/><sp/><sp/><sp/>=<sp/>and_condition<sp/>(&apos;or&apos;<sp/>and_condition)*</highlight></codeline>
<codeline lineno="401"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(&apos;@integer&apos;<sp/>samples)?</highlight></codeline>
<codeline lineno="402"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(&apos;@decimal&apos;<sp/>samples)?</highlight></codeline>
<codeline lineno="403"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and_condition<sp/>=<sp/>relation<sp/>(&apos;and&apos;<sp/>relation)*</highlight></codeline>
<codeline lineno="404"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>relation<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>is_relation<sp/>|<sp/>in_relation<sp/>|<sp/>within_relation</highlight></codeline>
<codeline lineno="405"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is_relation<sp/><sp/><sp/>=<sp/>expr<sp/>&apos;is&apos;<sp/>(&apos;not&apos;)?<sp/>value</highlight></codeline>
<codeline lineno="406"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>in_relation<sp/><sp/><sp/>=<sp/>expr<sp/>((&apos;not&apos;)?<sp/>&apos;in&apos;<sp/>|<sp/>&apos;=&apos;<sp/>|<sp/>&apos;!=&apos;)<sp/>range_list</highlight></codeline>
<codeline lineno="407"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>within_relation<sp/>=<sp/>expr<sp/>(&apos;not&apos;)?<sp/>&apos;within&apos;<sp/>range_list</highlight></codeline>
<codeline lineno="408"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expr<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>operand<sp/>((&apos;mod&apos;<sp/>|<sp/>&apos;%&apos;)<sp/>value)?</highlight></codeline>
<codeline lineno="409"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>operand<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>&apos;n&apos;<sp/>|<sp/>&apos;i&apos;<sp/>|<sp/>&apos;f&apos;<sp/>|<sp/>&apos;t&apos;<sp/>|<sp/>&apos;v&apos;<sp/>|<sp/>&apos;w&apos;</highlight></codeline>
<codeline lineno="410"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>range_list<sp/><sp/><sp/><sp/>=<sp/>(range<sp/>|<sp/>value)<sp/>(&apos;,&apos;<sp/>range_list)*</highlight></codeline>
<codeline lineno="411"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>digit+</highlight></codeline>
<codeline lineno="412"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>digit<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0|1|2|3|4|5|6|7|8|9</highlight></codeline>
<codeline lineno="413"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>range<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>value&apos;..&apos;value</highlight></codeline>
<codeline lineno="414"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>samples<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>sampleRange<sp/>(&apos;,&apos;<sp/>sampleRange)*<sp/>(&apos;,&apos;<sp/>(&apos;…&apos;|&apos;...&apos;))?</highlight></codeline>
<codeline lineno="415"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sampleRange<sp/><sp/><sp/>=<sp/>decimalValue<sp/>&apos;~&apos;<sp/>decimalValue</highlight></codeline>
<codeline lineno="416"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>decimalValue<sp/><sp/>=<sp/>value<sp/>(&apos;.&apos;<sp/>value)?</highlight></codeline>
<codeline lineno="417"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="418"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>Whitespace<sp/>can<sp/>occur<sp/>between<sp/>or<sp/>around<sp/>any<sp/>of<sp/>the<sp/>above<sp/>tokens.</highlight></codeline>
<codeline lineno="419"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>Rules<sp/>should<sp/>be<sp/>mutually<sp/>exclusive;<sp/>for<sp/>a<sp/>given<sp/>numeric<sp/>value,<sp/>only<sp/>one</highlight></codeline>
<codeline lineno="420"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>rule<sp/>should<sp/>apply<sp/>(i.e.<sp/>the<sp/>condition<sp/>should<sp/>only<sp/>be<sp/>true<sp/>for<sp/>one<sp/>of</highlight></codeline>
<codeline lineno="421"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>plural<sp/>rule<sp/>elements).</highlight></codeline>
<codeline lineno="422"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>The<sp/>in<sp/>and<sp/>within<sp/>relations<sp/>can<sp/>take<sp/>comma-separated<sp/>lists,<sp/>such<sp/>as:</highlight></codeline>
<codeline lineno="423"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>&apos;n<sp/>in<sp/>3,5,7..15&apos;.</highlight></codeline>
<codeline lineno="424"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>Samples<sp/>are<sp/>ignored.</highlight></codeline>
<codeline lineno="425"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="426"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>translator<sp/>parses<sp/>the<sp/>expression<sp/>on<sp/>instantiation<sp/>into<sp/>an<sp/>attribute</highlight></codeline>
<codeline lineno="427"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>called<sp/>`ast`.</highlight></codeline>
<codeline lineno="428"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1a4eefce994c0b5ff0a08c053773197f00" kindref="member">__init__</ref>(self,<sp/>string):</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref><sp/>=<sp/><ref refid="namespacebabel_1_1plural_1ac6e85af2308b2391bd884378f47dd10d" kindref="member">tokenize_rule</ref>(string)</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>:</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>If<sp/>the<sp/>pattern<sp/>is<sp/>only<sp/>samples,<sp/>it&apos;s<sp/>entirely<sp/>possible</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>no<sp/>stream<sp/>of<sp/>tokens<sp/>whatsoever<sp/>is<sp/>generated.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1abee31017ec256ea698de98d25384e4be" kindref="member">ast</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1abee31017ec256ea698de98d25384e4be" kindref="member">ast</ref><sp/>=<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a1885da24e69110e9e434fa09918496a1" kindref="member">condition</ref>()</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>:</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classbabel_1_1plural_1_1RuleError" kindref="compound">RuleError</ref>(f</highlight><highlight class="stringliteral">&quot;Expected<sp/>end<sp/>of<sp/>rule,<sp/>got<sp/>{self.tokens[-1][1]!r}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="440"><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1a59d8b5b10bac7838a41ec99ae946b329" kindref="member">expect</ref>(self,<sp/>type_,<sp/>value=None,<sp/>term=None):</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>token<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/>type_,<sp/>value)</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>token<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>token</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>term<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>term<sp/>=<sp/>repr(value<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>type_<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>value)</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>:</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classbabel_1_1plural_1_1RuleError" kindref="compound">RuleError</ref>(f</highlight><highlight class="stringliteral">&quot;expected<sp/>{term}<sp/>but<sp/>end<sp/>of<sp/>rule<sp/>reached&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classbabel_1_1plural_1_1RuleError" kindref="compound">RuleError</ref>(f</highlight><highlight class="stringliteral">&quot;expected<sp/>{term}<sp/>but<sp/>got<sp/>{self.tokens[-1][1]!r}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="450"><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1a1885da24e69110e9e434fa09918496a1" kindref="member">condition</ref>(self):</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>op<sp/>=<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a76ee6bf0a04a0597a3ba9c9ab8a915a5" kindref="member">and_condition</ref>()</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;or&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>op<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;or&apos;</highlight><highlight class="normal">,<sp/>(op,<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a76ee6bf0a04a0597a3ba9c9ab8a915a5" kindref="member">and_condition</ref>())</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>op</highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1a76ee6bf0a04a0597a3ba9c9ab8a915a5" kindref="member">and_condition</ref>(self):</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>op<sp/>=<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a7ccd2c8dea9857f0c0509b68ba751903" kindref="member">relation</ref>()</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;and&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>op<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;and&apos;</highlight><highlight class="normal">,<sp/>(op,<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a7ccd2c8dea9857f0c0509b68ba751903" kindref="member">relation</ref>())</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>op</highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1a7ccd2c8dea9857f0c0509b68ba751903" kindref="member">relation</ref>(self):</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>left<sp/>=<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1abedde153aaee16eda50c5716f23cd7cf" kindref="member">expr</ref>()</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;is&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;not&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;isnot&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;is&apos;</highlight><highlight class="normal">,<sp/>\</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(left,<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a4aa8cc9075df8178ae747fce4df0d4a0" kindref="member">value</ref>())</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>negated<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;not&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>method<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;in&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;within&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>method<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;within&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;in&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>negated:</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classbabel_1_1plural_1_1RuleError" kindref="compound">RuleError</ref>(</highlight><highlight class="stringliteral">&apos;Cannot<sp/>negate<sp/>operator<sp/>based<sp/>rules.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a38f031c2f88d8decaf45dee593c4d3b8" kindref="member">newfangled_relation</ref>(left)</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rv<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;relation&apos;</highlight><highlight class="normal">,<sp/>(method,<sp/>left,<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1acc002ec6811b7705736227fb98b56340" kindref="member">range_list</ref>())</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1af746862333e6edd24ae3466407a7fef0" kindref="member">negate</ref>(rv)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>negated<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>rv</highlight></codeline>
<codeline lineno="479"><highlight class="normal"></highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1a38f031c2f88d8decaf45dee593c4d3b8" kindref="member">newfangled_relation</ref>(self,<sp/>left):</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;symbol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;=&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>negated<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;symbol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;!=&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>negated<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classbabel_1_1plural_1_1RuleError" kindref="compound">RuleError</ref>(</highlight><highlight class="stringliteral">&apos;Expected<sp/>&quot;=&quot;<sp/>or<sp/>&quot;!=&quot;<sp/>or<sp/>legacy<sp/>relation&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rv<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;relation&apos;</highlight><highlight class="normal">,<sp/>(</highlight><highlight class="stringliteral">&apos;in&apos;</highlight><highlight class="normal">,<sp/>left,<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1acc002ec6811b7705736227fb98b56340" kindref="member">range_list</ref>())</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1af746862333e6edd24ae3466407a7fef0" kindref="member">negate</ref>(rv)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>negated<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>rv</highlight></codeline>
<codeline lineno="489"><highlight class="normal"></highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1a97f6b31b293873c15de7f079f92edaf1" kindref="member">range_or_value</ref>(self):</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>left<sp/>=<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a4aa8cc9075df8178ae747fce4df0d4a0" kindref="member">value</ref>()</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;ellipsis&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>left,<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a4aa8cc9075df8178ae747fce4df0d4a0" kindref="member">value</ref>()</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>left,<sp/>left</highlight></codeline>
<codeline lineno="496"><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1acc002ec6811b7705736227fb98b56340" kindref="member">range_list</ref>(self):</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>range_list<sp/>=<sp/>[self.<ref refid="classbabel_1_1plural_1_1__Parser_1a97f6b31b293873c15de7f079f92edaf1" kindref="member">range_or_value</ref>()]</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;symbol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;,&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>range_list.append(self.<ref refid="classbabel_1_1plural_1_1__Parser_1a97f6b31b293873c15de7f079f92edaf1" kindref="member">range_or_value</ref>())</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1ab4b6d90915547cb30337a2dcd1aab6a8" kindref="member">range_list_node</ref>(range_list)</highlight></codeline>
<codeline lineno="502"><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1abedde153aaee16eda50c5716f23cd7cf" kindref="member">expr</ref>(self):</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>word<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>word<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>word[1]<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>_VARS:</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classbabel_1_1plural_1_1RuleError" kindref="compound">RuleError</ref>(</highlight><highlight class="stringliteral">&apos;Expected<sp/>identifier<sp/>variable&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>word[1]</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;word&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;mod&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;mod&apos;</highlight><highlight class="normal">,<sp/>((name,<sp/>()),<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a4aa8cc9075df8178ae747fce4df0d4a0" kindref="member">value</ref>())</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a36e08f3f05aa75916e03da1c090b3c8e" kindref="member">skip_token</ref>(self.<ref refid="classbabel_1_1plural_1_1__Parser_1adefbb8b92971f46c94bc2e0ace34d0e4" kindref="member">tokens</ref>,<sp/></highlight><highlight class="stringliteral">&apos;symbol&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;%&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;mod&apos;</highlight><highlight class="normal">,<sp/>((name,<sp/>()),<sp/>self.<ref refid="classbabel_1_1plural_1_1__Parser_1a4aa8cc9075df8178ae747fce4df0d4a0" kindref="member">value</ref>())</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a3b99b4bcbc3e722a5b504fd1dc5c7dbd" kindref="member">ident_node</ref>(name)</highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Parser_1a4aa8cc9075df8178ae747fce4df0d4a0" kindref="member">value</ref>(self):</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacebabel_1_1plural_1a99f5d7a3d5c650c856027787b6b42af8" kindref="member">value_node</ref>(int(self.<ref refid="classbabel_1_1plural_1_1__Parser_1a59d8b5b10bac7838a41ec99ae946b329" kindref="member">expect</ref>(</highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">)[1]))</highlight></codeline>
<codeline lineno="516"><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"></highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(tmpl):</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Compiler<sp/>factory<sp/>for<sp/>the<sp/>`_Compiler`.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>self,<sp/>left,<sp/>right:<sp/>tmpl<sp/>%<sp/>(self.compile(left),<sp/>self.compile(right))</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"></highlight></codeline>
<codeline lineno="523"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacebabel_1_1plural_1aaa4c8b8ddd0f5f50a88fb450aa088728" kindref="member">_unary_compiler</ref>(tmpl):</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Compiler<sp/>factory<sp/>for<sp/>the<sp/>`_Compiler`.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>self,<sp/>x:<sp/>tmpl<sp/>%<sp/>self.compile(x)</highlight></codeline>
<codeline lineno="526"><highlight class="normal"></highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal">compile_zero<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;0&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="529"><highlight class="normal"></highlight></codeline>
<codeline lineno="530"><highlight class="normal"></highlight></codeline>
<codeline lineno="531" refid="classbabel_1_1plural_1_1__Compiler" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Compiler" kindref="compound">_Compiler</ref>:</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;The<sp/>compilers<sp/>are<sp/>able<sp/>to<sp/>transform<sp/>the<sp/>expressions<sp/>into<sp/>multiple</highlight></codeline>
<codeline lineno="533"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>output<sp/>formats.</highlight></codeline>
<codeline lineno="534"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">compile(self,<sp/>arg):</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>op,<sp/>args<sp/>=<sp/>arg</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>getattr(self,<sp/>f</highlight><highlight class="stringliteral">&quot;compile_{op}&quot;</highlight><highlight class="normal">)(*args)</highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_n<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;n&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_i<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;i&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_v<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;v&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_w<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;w&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_f<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;f&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_t<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;t&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_c<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;c&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_e<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;e&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_value<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x,<sp/>v:<sp/>str(v)</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_and<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(%s<sp/>&amp;&amp;<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_or<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(%s<sp/>||<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_not<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1aaa4c8b8ddd0f5f50a88fb450aa088728" kindref="member">_unary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(!%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_mod<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(%s<sp/>%%<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_is<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(%s<sp/>==<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_isnot<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(%s<sp/>!=<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="555"><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Compiler_1adc062b92b0448b661e661730821bfff6" kindref="member">compile_relation</ref>(self,<sp/>method,<sp/>expr,<sp/>range_list):</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>NotImplementedError()</highlight></codeline>
<codeline lineno="558"><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"></highlight></codeline>
<codeline lineno="560" refid="classbabel_1_1plural_1_1__PythonCompiler" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__PythonCompiler" kindref="compound">_PythonCompiler</ref>(<ref refid="classbabel_1_1plural_1_1__Compiler" kindref="compound">_Compiler</ref>):</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Compiles<sp/>an<sp/>expression<sp/>to<sp/>Python.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_and<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(%s<sp/>and<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_or<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(%s<sp/>or<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_not<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1aaa4c8b8ddd0f5f50a88fb450aa088728" kindref="member">_unary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;(not<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_mod<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;MOD(%s,<sp/>%s)&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="567"><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__PythonCompiler_1a08e73186aab47aee809587145eb58183" kindref="member">compile_relation</ref>(self,<sp/>method,<sp/>expr,<sp/>range_list):</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ranges<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;,&quot;</highlight><highlight class="normal">.join([f</highlight><highlight class="stringliteral">&quot;({self.compile(a)},<sp/>{self.compile(b)})&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(a,<sp/>b)<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range_list[1]])</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>f</highlight><highlight class="stringliteral">&quot;{method.upper()}({self.compile(expr)},<sp/>[{ranges}])&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"></highlight></codeline>
<codeline lineno="573" refid="classbabel_1_1plural_1_1__GettextCompiler" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__GettextCompiler" kindref="compound">_GettextCompiler</ref>(<ref refid="classbabel_1_1plural_1_1__Compiler" kindref="compound">_Compiler</ref>):</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Compile<sp/>into<sp/>a<sp/>gettext<sp/>plural<sp/>expression.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_i<sp/>=<sp/>_Compiler.compile_n</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_v<sp/>=<sp/>compile_zero</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_w<sp/>=<sp/>compile_zero</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_f<sp/>=<sp/>compile_zero</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_t<sp/>=<sp/>compile_zero</highlight></codeline>
<codeline lineno="581"><highlight class="normal"></highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__GettextCompiler_1ada25fbe4d21f128e07d892db4fb324f8" kindref="member">compile_relation</ref>(self,<sp/>method,<sp/>expr,<sp/>range_list):</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rv<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expr<sp/>=<sp/>self.<ref refid="classbabel_1_1plural_1_1__Compiler_1a1d9b0850f6d29f7c0d1842059549b000" kindref="member">compile</ref>(expr)</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>item<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range_list[1]:</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>item[0]<sp/>==<sp/>item[1]:</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rv.append(f</highlight><highlight class="stringliteral">&quot;({expr}<sp/>==<sp/>{self.compile(item[0])})&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min,<sp/>max<sp/>=<sp/>map(self.<ref refid="classbabel_1_1plural_1_1__Compiler_1a1d9b0850f6d29f7c0d1842059549b000" kindref="member">compile</ref>,<sp/>item)</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rv.append(f</highlight><highlight class="stringliteral">&quot;({expr}<sp/>&gt;=<sp/>{min}<sp/>&amp;&amp;<sp/>{expr}<sp/>&lt;=<sp/>{max})&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>f</highlight><highlight class="stringliteral">&quot;({&apos;<sp/>||<sp/>&apos;.join(rv)})&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="592"><highlight class="normal"></highlight></codeline>
<codeline lineno="593"><highlight class="normal"></highlight></codeline>
<codeline lineno="594" refid="classbabel_1_1plural_1_1__JavaScriptCompiler" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__JavaScriptCompiler" kindref="compound">_JavaScriptCompiler</ref>(<ref refid="classbabel_1_1plural_1_1__GettextCompiler" kindref="compound">_GettextCompiler</ref>):</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Compiles<sp/>the<sp/>expression<sp/>to<sp/>plain<sp/>of<sp/>JavaScript.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"></highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>XXX:<sp/>presently<sp/>javascript<sp/>does<sp/>not<sp/>support<sp/>any<sp/>of<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>fraction<sp/>support<sp/>and<sp/>basically<sp/>only<sp/>deals<sp/>with<sp/>integers.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_i<sp/>=<sp/></highlight><highlight class="keyword">lambda</highlight><highlight class="normal"><sp/>x:<sp/></highlight><highlight class="stringliteral">&apos;parseInt(n,<sp/>10)&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_v<sp/>=<sp/>compile_zero</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_w<sp/>=<sp/>compile_zero</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_f<sp/>=<sp/>compile_zero</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_t<sp/>=<sp/>compile_zero</highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__JavaScriptCompiler_1ab47df73bc69e674c10947ba78f596263" kindref="member">compile_relation</ref>(self,<sp/>method,<sp/>expr,<sp/>range_list):</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>code<sp/>=<sp/>_GettextCompiler.compile_relation(</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self,<sp/>method,<sp/>expr,<sp/>range_list)</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>method<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;in&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expr<sp/>=<sp/>self.<ref refid="classbabel_1_1plural_1_1__Compiler_1a1d9b0850f6d29f7c0d1842059549b000" kindref="member">compile</ref>(expr)</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>code<sp/>=<sp/>f</highlight><highlight class="stringliteral">&quot;(parseInt({expr},<sp/>10)<sp/>==<sp/>{expr}<sp/>&amp;&amp;<sp/>{code})&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>code</highlight></codeline>
<codeline lineno="612"><highlight class="normal"></highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614" refid="classbabel_1_1plural_1_1__UnicodeCompiler" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__UnicodeCompiler" kindref="compound">_UnicodeCompiler</ref>(<ref refid="classbabel_1_1plural_1_1__Compiler" kindref="compound">_Compiler</ref>):</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Returns<sp/>a<sp/>unicode<sp/>pluralization<sp/>rule<sp/>again.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="616"><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>XXX:<sp/>this<sp/>currently<sp/>spits<sp/>out<sp/>the<sp/>old<sp/>syntax<sp/>instead<sp/>of<sp/>the<sp/>new</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>one.<sp/><sp/>We<sp/>can<sp/>change<sp/>that,<sp/>but<sp/>it<sp/>will<sp/>break<sp/>a<sp/>whole<sp/>bunch<sp/>of<sp/>stuff</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>for<sp/>users<sp/>I<sp/>suppose.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="620"><highlight class="normal"></highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_is<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;%s<sp/>is<sp/>%s&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_isnot<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;%s<sp/>is<sp/>not<sp/>%s&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_and<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;%s<sp/>and<sp/>%s&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_or<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;%s<sp/>or<sp/>%s&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/>compile_mod<sp/>=<sp/><ref refid="namespacebabel_1_1plural_1a22ee23836175e892c14c54adef3975ef" kindref="member">_binary_compiler</ref>(</highlight><highlight class="stringliteral">&apos;%s<sp/>mod<sp/>%s&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="626"><highlight class="normal"></highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__Compiler_1ac635b6ce48c1013cfa123d8e960491ab" kindref="member">compile_not</ref>(self,<sp/>relation):</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classbabel_1_1plural_1_1__Compiler_1adc062b92b0448b661e661730821bfff6" kindref="member">compile_relation</ref><ref refid="classbabel_1_1plural_1_1__UnicodeCompiler_1a0ef19ae4b1651db4bf20993c874ae61c" kindref="member">compile_relation</ref>(*relation[1],<sp/>negated=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="629"><highlight class="normal"></highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classbabel_1_1plural_1_1__UnicodeCompiler_1a0ef19ae4b1651db4bf20993c874ae61c" kindref="member">compile_relation</ref>(self,<sp/>method,<sp/>expr,<sp/>range_list,<sp/>negated=False):</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ranges<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>item<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range_list[1]:</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>item[0]<sp/>==<sp/>item[1]:</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ranges.append(self.<ref refid="classbabel_1_1plural_1_1__Compiler_1a1d9b0850f6d29f7c0d1842059549b000" kindref="member">compile</ref>(item[0]))</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ranges.append(f</highlight><highlight class="stringliteral">&quot;{self.compile(item[0])}..{self.compile(item[1])}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>f</highlight><highlight class="stringliteral">&quot;{self.compile(expr)}{&apos;<sp/>not&apos;<sp/>if<sp/>negated<sp/>else<sp/>&apos;&apos;}<sp/>{method}<sp/>{&apos;,&apos;.join(ranges)}&quot;</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="venv/lib/python3.12/site-packages/babel/plural.py"/>
  </compounddef>
</doxygen>
