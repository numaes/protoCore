<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="md_build_2__deps_2googletest-src_2docs_2primer" kind="page">
    <compoundname>md_build_2__deps_2googletest-src_2docs_2primer</compoundname>
    <title>GoogleTest Primer</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><anchor id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md221"/> </para>
<sect1 id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md222">
<title>Introduction: Why GoogleTest?</title>
<para><emphasis>GoogleTest</emphasis> helps you write better C++ tests.</para>
<para>GoogleTest is a testing framework developed by the Testing Technology team with Google&apos;s specific requirements and constraints in mind. Whether you work on Linux, Windows, or a Mac, if you write C++ code, GoogleTest can help you. And it supports <emphasis>any</emphasis> kind of tests, not just unit tests.</para>
<para>So what makes a good test, and how does GoogleTest fit in? We believe:</para>
<para><orderedlist>
<listitem><para>Tests should be <emphasis>independent</emphasis> and <emphasis>repeatable</emphasis>. It&apos;s a pain to debug a test that succeeds or fails as a result of other tests. GoogleTest isolates the tests by running each of them on a different object. When a test fails, GoogleTest allows you to run it in isolation for quick debugging.</para>
</listitem><listitem><para>Tests should be well <emphasis>organized</emphasis> and reflect the structure of the tested code. GoogleTest groups related tests into test suites that can share data and subroutines. This common pattern is easy to recognize and makes tests easy to maintain. Such consistency is especially helpful when people switch projects and start to work on a new code base.</para>
</listitem><listitem><para>Tests should be <emphasis>portable</emphasis> and <emphasis>reusable</emphasis>. Google has a lot of code that is platform-neutral; its tests should also be platform-neutral. GoogleTest works on different OSes, with different compilers, with or without exceptions, so GoogleTest tests can work with a variety of configurations.</para>
</listitem><listitem><para>When tests fail, they should provide as much <emphasis>information</emphasis> about the problem as possible. GoogleTest doesn&apos;t stop at the first test failure. Instead, it only stops the current test and continues with the next. You can also set up tests that report non-fatal failures after which the current test continues. Thus, you can detect and fix multiple bugs in a single run-edit-compile cycle.</para>
</listitem><listitem><para>The testing framework should liberate test writers from housekeeping chores and let them focus on the test <emphasis>content</emphasis>. GoogleTest automatically keeps track of all tests defined, and doesn&apos;t require the user to enumerate them in order to run them.</para>
</listitem><listitem><para>Tests should be <emphasis>fast</emphasis>. With GoogleTest, you can reuse shared resources across tests and pay for the set-up/tear-down only once, without making tests depend on each other.</para>
</listitem></orderedlist>
</para>
<para>Since GoogleTest is based on the popular xUnit architecture, you&apos;ll feel right at home if you&apos;ve used JUnit or PyUnit before. If not, it will take you about 10 minutes to learn the basics and get started. So let&apos;s go!</para>
</sect1>
<sect1 id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md223">
<title>Beware of the Nomenclature</title>
<para>{: .callout .note} <emphasis>Note:</emphasis> There might be some confusion arising from different definitions of the terms <emphasis>Test</emphasis>, <emphasis>Test Case</emphasis> and <emphasis>Test Suite</emphasis>, so beware of misunderstanding these.</para>
<para>Historically, GoogleTest started to use the term <emphasis>Test Case</emphasis> for grouping related tests, whereas current publications, including International Software Testing Qualifications Board (<ulink url="http://www.istqb.org/">ISTQB</ulink>) materials and various textbooks on software quality, use the term <emphasis><ulink url="http://glossary.istqb.org/en/search/test%20suite">Test Suite</ulink></emphasis> for this.</para>
<para>The related term <emphasis>Test</emphasis>, as it is used in GoogleTest, corresponds to the term <emphasis><ulink url="http://glossary.istqb.org/en/search/test%20case">Test Case</ulink></emphasis> of ISTQB and others.</para>
<para>The term <emphasis>Test</emphasis> is commonly of broad enough sense, including ISTQB&apos;s definition of <emphasis>Test Case</emphasis>, so it&apos;s not much of a problem here. But the term <emphasis>Test Case</emphasis> as was used in Google Test is of contradictory sense and thus confusing.</para>
<para>GoogleTest recently started replacing the term <emphasis>Test Case</emphasis> with <emphasis>Test Suite</emphasis>. The preferred API is <emphasis>TestSuite</emphasis>. The older TestCase API is being slowly deprecated and refactored away.</para>
<para>So please be aware of the different definitions of the terms:</para>
<para><table rows="2" cols="3"><row>
<entry thead="yes" align='left'><para>Meaning   </para>
</entry><entry thead="yes" align='left'><para>GoogleTest Term   </para>
</entry><entry thead="yes" align='left'><para><ulink url="http://www.istqb.org/">ISTQB</ulink> Term    </para>
</entry></row>
<row>
<entry thead="no" align='left'><para>Exercise a particular program path with specific input values and verify the results   </para>
</entry><entry thead="no" align='left'><para>TEST()   </para>
</entry><entry thead="no" align='left'><para><ulink url="http://glossary.istqb.org/en/search/test%20case">Test Case</ulink>   </para>
</entry></row>
</table>
</para>
</sect1>
<sect1 id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md224">
<title>Basic Concepts</title>
<para>When using GoogleTest, you start by writing <emphasis>assertions</emphasis>, which are statements that check whether a condition is true. An assertion&apos;s result can be <emphasis>success</emphasis>, <emphasis>nonfatal failure</emphasis>, or <emphasis>fatal failure</emphasis>. If a fatal failure occurs, it aborts the current function; otherwise the program continues normally.</para>
<para><emphasis>Tests</emphasis> use assertions to verify the tested code&apos;s behavior. If a test crashes or has a failed assertion, then it <emphasis>fails</emphasis>; otherwise it <emphasis>succeeds</emphasis>.</para>
<para>A <emphasis>test suite</emphasis> contains one or many tests. You should group your tests into test suites that reflect the structure of the tested code. When multiple tests in a test suite need to share common objects and subroutines, you can put them into a <emphasis>test fixture</emphasis> class.</para>
<para>A <emphasis>test program</emphasis> can contain multiple test suites.</para>
<para>We&apos;ll now explain how to write a test program, starting at the individual assertion level and building up to tests and test suites.</para>
</sect1>
<sect1 id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md225">
<title>Assertions</title>
<para>GoogleTest assertions are macros that resemble function calls. You test a class or function by making assertions about its behavior. When an assertion fails, GoogleTest prints the assertion&apos;s source file and line number location, along with a failure message. You may also supply a custom failure message which will be appended to GoogleTest&apos;s message.</para>
<para>The assertions come in pairs that test the same thing but have different effects on the current function. <computeroutput>ASSERT_*</computeroutput> versions generate fatal failures when they fail, and <bold>abort the current function</bold>. <computeroutput>EXPECT_*</computeroutput> versions generate nonfatal failures, which don&apos;t abort the current function. Usually <computeroutput>EXPECT_*</computeroutput> are preferred, as they allow more than one failure to be reported in a test. However, you should use <computeroutput>ASSERT_*</computeroutput> if it doesn&apos;t make sense to continue when the assertion in question fails.</para>
<para>Since a failed <computeroutput>ASSERT_*</computeroutput> returns from the current function immediately, possibly skipping clean-up code that comes after it, it may cause a space leak. Depending on the nature of the leak, it may or may not be worth fixing - so keep this in mind if you get a heap checker error in addition to assertion errors.</para>
<para>To provide a custom failure message, simply stream it into the macro using the <computeroutput>&lt;&lt;</computeroutput> operator or a sequence of such operators. See the following example, using the <ulink url="reference/assertions.md#EXPECT_EQ"><computeroutput>ASSERT_EQ</computeroutput> and <computeroutput>EXPECT_EQ</computeroutput></ulink> macros to verify value equality:</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a1a6db8b1338ee7040329322b77779086" kindref="member">ASSERT_EQ</ref>(<ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-containers__test_8cc_1a6150e0515f7202e2fb518f7206ed97dc" kindref="member">x</ref>.size(),<sp/><ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-containers__test_8cc_1a39cb44155237f0205e0feb931d5acbed" kindref="member">y</ref>.size())<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Vectors<sp/>x<sp/>and<sp/>y<sp/>are<sp/>of<sp/>unequal<sp/>length&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-comparisons__test_8cc_1acb559820d9ca11295b4500f179ef6392" kindref="member">i</ref><sp/>=<sp/>0;<sp/><ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-comparisons__test_8cc_1acb559820d9ca11295b4500f179ef6392" kindref="member">i</ref><sp/>&lt;<sp/><ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-containers__test_8cc_1a6150e0515f7202e2fb518f7206ed97dc" kindref="member">x</ref>.size();<sp/>++<ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-comparisons__test_8cc_1acb559820d9ca11295b4500f179ef6392" kindref="member">i</ref>)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(<ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-containers__test_8cc_1a6150e0515f7202e2fb518f7206ed97dc" kindref="member">x</ref>[<ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-comparisons__test_8cc_1acb559820d9ca11295b4500f179ef6392" kindref="member">i</ref>],<sp/><ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-containers__test_8cc_1a39cb44155237f0205e0feb931d5acbed" kindref="member">y</ref>[<ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-comparisons__test_8cc_1acb559820d9ca11295b4500f179ef6392" kindref="member">i</ref>])<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Vectors<sp/>x<sp/>and<sp/>y<sp/>differ<sp/>at<sp/>index<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="build_2__deps_2googletest-src_2googlemock_2test_2gmock-matchers-comparisons__test_8cc_1acb559820d9ca11295b4500f179ef6392" kindref="member">i</ref>;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>Anything that can be streamed to an <computeroutput>ostream</computeroutput> can be streamed to an assertion macro<ndash/>in particular, C strings and <computeroutput>string</computeroutput> objects. If a wide string (<computeroutput>wchar_t*</computeroutput>, <computeroutput>TCHAR*</computeroutput> in <computeroutput>UNICODE</computeroutput> mode on Windows, or <computeroutput>std::wstring</computeroutput>) is streamed to an assertion, it will be translated to UTF-8 when printed.</para>
<para>GoogleTest provides a collection of assertions for verifying the behavior of your code in various ways. You can check Boolean conditions, compare values based on relational operators, verify string values, floating-point values, and much more. There are even assertions that enable you to verify more complex states by providing custom predicates. For the complete list of assertions provided by GoogleTest, see the <ref refid="md_build_2__deps_2googletest-src_2docs_2reference_2assertions" kindref="compound">Assertions Reference</ref>.</para>
</sect1>
<sect1 id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md226">
<title>Simple Tests</title>
<para>To create a test:</para>
<para><orderedlist>
<listitem><para>Use the <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST()</ref></computeroutput> macro to define and name a test function. These are ordinary C++ functions that don&apos;t return a value.</para>
</listitem><listitem><para>In this function, along with any valid C++ statements you want to include, use the various GoogleTest assertions to check values.</para>
</listitem><listitem><para>The test&apos;s result is determined by the assertions; if any assertion in the test fails (either fatally or non-fatally), or if the test crashes, the entire test fails. Otherwise, it succeeds.</para>
</listitem></orderedlist>
</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST</ref>(TestSuiteName,<sp/>TestName)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>...<sp/><ref refid="namespacepip_1_1__vendor_1_1rich_1_1scope_1ae3ccff79446570e4225cd1f039ea4a37" kindref="member">test</ref><sp/>body<sp/>...</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para><computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST()</ref></computeroutput> arguments go from general to specific. The <emphasis>first</emphasis> argument is the name of the test suite, and the <emphasis>second</emphasis> argument is the test&apos;s name within the test suite. Both names must be valid C++ identifiers, and they should not contain any underscores (<computeroutput>_</computeroutput>). A test&apos;s <emphasis>full name</emphasis> consists of its containing test suite and its individual name. Tests from different test suites can have the same individual name.</para>
<para>For example, let&apos;s take a simple integer function:</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2samples_2sample1_8cc_1a0e7da4d7a69c5b5afb707807aa177017" kindref="member">Factorial</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n);<sp/><sp/></highlight><highlight class="comment">//<sp/>Returns<sp/>the<sp/>factorial<sp/>of<sp/>n</highlight></codeline>
</programlisting></para>
<para>A test suite for this function might look like:</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>Tests<sp/>factorial<sp/>of<sp/>0.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST</ref>(FactorialTest,<sp/>HandlesZeroInput)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(<ref refid="build_2__deps_2googletest-src_2googletest_2samples_2sample1_8cc_1a0e7da4d7a69c5b5afb707807aa177017" kindref="member">Factorial</ref>(0),<sp/>1);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>Tests<sp/>factorial<sp/>of<sp/>positive<sp/>numbers.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST</ref>(FactorialTest,<sp/>HandlesPositiveInput)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(<ref refid="build_2__deps_2googletest-src_2googletest_2samples_2sample1_8cc_1a0e7da4d7a69c5b5afb707807aa177017" kindref="member">Factorial</ref>(1),<sp/>1);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(<ref refid="build_2__deps_2googletest-src_2googletest_2samples_2sample1_8cc_1a0e7da4d7a69c5b5afb707807aa177017" kindref="member">Factorial</ref>(2),<sp/>2);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(<ref refid="build_2__deps_2googletest-src_2googletest_2samples_2sample1_8cc_1a0e7da4d7a69c5b5afb707807aa177017" kindref="member">Factorial</ref>(3),<sp/>6);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(<ref refid="build_2__deps_2googletest-src_2googletest_2samples_2sample1_8cc_1a0e7da4d7a69c5b5afb707807aa177017" kindref="member">Factorial</ref>(8),<sp/>40320);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>GoogleTest groups the test results by test suites, so logically related tests should be in the same test suite; in other words, the first argument to their <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST()</ref></computeroutput> should be the same. In the above example, we have two tests, <computeroutput>HandlesZeroInput</computeroutput> and <computeroutput>HandlesPositiveInput</computeroutput>, that belong to the same test suite <computeroutput>FactorialTest</computeroutput>.</para>
<para>When naming your test suites and tests, you should follow the same convention as for <ulink url="https://google.github.io/styleguide/cppguide.html#Function_Names">naming functions and classes</ulink>.</para>
<para><bold>Availability</bold>: Linux, Windows, Mac.</para>
</sect1>
<sect1 id="md_cmake-build-debug_2__deps_2googletest-src_2docs_2primer_1same-data-multiple-tests">
<title>Test Fixtures: Using the Same Data Configuration for Multiple Tests</title>
<para>If you find yourself writing two or more tests that operate on similar data, you can use a <emphasis>test fixture</emphasis>. This allows you to reuse the same configuration of objects for several different tests.</para>
<para>To create a fixture:</para>
<para><orderedlist>
<listitem><para>Derive a class from <computeroutput><ref refid="classtesting_1_1Test" kindref="compound">testing::Test</ref></computeroutput> . Start its body with <computeroutput>protected:</computeroutput>, as we&apos;ll want to access fixture members from sub-classes.</para>
</listitem><listitem><para>Inside the class, declare any objects you plan to use.</para>
</listitem><listitem><para>If necessary, write a default constructor or <computeroutput>SetUp()</computeroutput> function to prepare the objects for each test. A common mistake is to spell <computeroutput>SetUp()</computeroutput> as **<computeroutput>Setup()</computeroutput>** with a small <computeroutput>u</computeroutput> - Use <computeroutput>override</computeroutput> in C++11 to make sure you spelled it correctly.</para>
</listitem><listitem><para>If necessary, write a destructor or <computeroutput>TearDown()</computeroutput> function to release any resources you allocated in <computeroutput>SetUp()</computeroutput> . To learn when you should use the constructor/destructor and when you should use <computeroutput>SetUp()/TearDown()</computeroutput>, read the <ulink url="faq.md#CtorVsSetUp">FAQ</ulink>.</para>
</listitem><listitem><para>If needed, define subroutines for your tests to share.</para>
</listitem></orderedlist>
</para>
<para>When using a fixture, use <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F()</ref></computeroutput> instead of <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST()</ref></computeroutput> as it allows you to access objects and subroutines in the test fixture:</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F</ref>(TestFixtureClassName,<sp/>TestName)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>...<sp/><ref refid="namespacepip_1_1__vendor_1_1rich_1_1scope_1ae3ccff79446570e4225cd1f039ea4a37" kindref="member">test</ref><sp/>body<sp/>...</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>Unlike <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST()</ref></computeroutput>, in <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F()</ref></computeroutput> the first argument must be the name of the test fixture class. (<computeroutput>_F</computeroutput> stands for &quot;Fixture&quot;). No test suite name is specified for this macro.</para>
<para>Unfortunately, the C++ macro system does not allow us to create a single macro that can handle both types of tests. Using the wrong macro causes a compiler error.</para>
<para>Also, you must first define a test fixture class before using it in a <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F()</ref></computeroutput>, or you&apos;ll get the compiler error &quot;`virtual outside class
declaration`&quot;.</para>
<para>For each test defined with <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F()</ref></computeroutput>, GoogleTest will create a <emphasis>fresh</emphasis> test fixture at runtime, immediately initialize it via <computeroutput>SetUp()</computeroutput>, run the test, clean up by calling <computeroutput>TearDown()</computeroutput>, and then delete the test fixture. Note that different tests in the same test suite have different test fixture objects, and GoogleTest always deletes a test fixture before it creates the next one. GoogleTest does <bold>not</bold> reuse the same test fixture for multiple tests. Any changes one test makes to the fixture do not affect other tests.</para>
<para>As an example, let&apos;s write tests for a FIFO queue class named <computeroutput><ref refid="classQueue" kindref="compound">Queue</ref></computeroutput>, which has the following interface:</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">template</highlight><highlight class="normal"><sp/>&lt;</highlight><highlight class="keyword">typename</highlight><highlight class="normal"><sp/>E&gt;<sp/><sp/></highlight><highlight class="comment">//<sp/>E<sp/>is<sp/>the<sp/>element<sp/>type.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classQueue" kindref="compound">Queue</ref><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="classQueue_1ab09891e54b51dc677ee6efb350687ae4" kindref="member">Queue</ref>();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classQueue_1abaa2e7175457307bca74f5562cbdaaa9" kindref="member">Enqueue</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>E&amp;<sp/>element);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>E*<sp/><ref refid="classQueue_1a42bb3a81cb3f6cd084da16a39d38eb03" kindref="member">Dequeue</ref>();<sp/><sp/></highlight><highlight class="comment">//<sp/>Returns<sp/>NULL<sp/>if<sp/>the<sp/>queue<sp/>is<sp/>empty.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>size()<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal">;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>...</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
</programlisting></para>
<para>First, define a fixture class. By convention, you should give it the name <computeroutput><ref refid="classFooTest" kindref="compound">FooTest</ref></computeroutput> where <computeroutput>Foo</computeroutput> is the class being tested.</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">QueueTest<sp/>:<sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classtesting_1_1Test" kindref="compound">::testing::Test</ref><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal">:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesting_1_1Test_1a190315150c303ddf801313fd1a777733" kindref="member">SetUp</ref>()</highlight><highlight class="keyword"><sp/>override<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>q0_<sp/>remains<sp/>empty</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>q1_.Enqueue(1);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>q2_.Enqueue(2);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>q2_.Enqueue(3);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>void<sp/>TearDown()<sp/>override<sp/>{}</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="classQueue" kindref="compound">Queue&lt;int&gt;</ref><sp/>q0_;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="classQueue" kindref="compound">Queue&lt;int&gt;</ref><sp/>q1_;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="classQueue" kindref="compound">Queue&lt;int&gt;</ref><sp/>q2_;</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
</programlisting></para>
<para>In this case, <computeroutput>TearDown()</computeroutput> is not needed since we don&apos;t have to clean up after each test, other than what&apos;s already done by the destructor.</para>
<para>Now we&apos;ll write tests using <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F()</ref></computeroutput> and this fixture.</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F</ref>(QueueTest,<sp/>IsEmptyInitially)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(q0_.size(),<sp/>0);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F</ref>(QueueTest,<sp/>DequeueWorks)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>n<sp/>=<sp/>q0_.Dequeue();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(n,<sp/></highlight><highlight class="keyword">nullptr</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>n<sp/>=<sp/>q1_.Dequeue();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1aa866c8dece57912e6f51495ed3e8d8d5" kindref="member">ASSERT_NE</ref>(n,<sp/></highlight><highlight class="keyword">nullptr</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(*n,<sp/>1);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(q1_.size(),<sp/>0);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>n;</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>n<sp/>=<sp/>q2_.Dequeue();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1aa866c8dece57912e6f51495ed3e8d8d5" kindref="member">ASSERT_NE</ref>(n,<sp/></highlight><highlight class="keyword">nullptr</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(*n,<sp/>2);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(q2_.size(),<sp/>1);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>n;</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>The above uses both <computeroutput>ASSERT_*</computeroutput> and <computeroutput>EXPECT_*</computeroutput> assertions. The rule of thumb is to use <computeroutput>EXPECT_*</computeroutput> when you want the test to continue to reveal more errors after the assertion failure, and use <computeroutput>ASSERT_*</computeroutput> when continuing after failure doesn&apos;t make sense. For example, the second assertion in the <computeroutput>Dequeue</computeroutput> test is <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1aa866c8dece57912e6f51495ed3e8d8d5" kindref="member">ASSERT_NE(n, nullptr)</ref></computeroutput>, as we need to dereference the pointer <computeroutput>n</computeroutput> later, which would lead to a segfault when <computeroutput>n</computeroutput> is <computeroutput>NULL</computeroutput>.</para>
<para>When these tests run, the following happens:</para>
<para><orderedlist>
<listitem><para>GoogleTest constructs a <computeroutput>QueueTest</computeroutput> object (let&apos;s call it <computeroutput>t1</computeroutput>).</para>
</listitem><listitem><para><computeroutput>t1.SetUp()</computeroutput> initializes <computeroutput>t1</computeroutput>.</para>
</listitem><listitem><para>The first test (<computeroutput>IsEmptyInitially</computeroutput>) runs on <computeroutput>t1</computeroutput>.</para>
</listitem><listitem><para><computeroutput>t1.TearDown()</computeroutput> cleans up after the test finishes.</para>
</listitem><listitem><para><computeroutput>t1</computeroutput> is destructed.</para>
</listitem><listitem><para>The above steps are repeated on another <computeroutput>QueueTest</computeroutput> object, this time running the <computeroutput>DequeueWorks</computeroutput> test.</para>
</listitem></orderedlist>
</para>
<para><bold>Availability</bold>: Linux, Windows, Mac.</para>
</sect1>
<sect1 id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md227">
<title>Invoking the Tests</title>
<para><computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1ab5540a6d621853916be8240ff51819cf" kindref="member">TEST()</ref></computeroutput> and <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F()</ref></computeroutput> implicitly register their tests with GoogleTest. So, unlike with many other C++ testing frameworks, you don&apos;t have to re-list all your defined tests in order to run them.</para>
<para>After defining your tests, you can run them with <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS()</ref></computeroutput>, which returns <computeroutput>0</computeroutput> if all the tests are successful, or <computeroutput>1</computeroutput> otherwise. Note that <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS()</ref></computeroutput> runs <emphasis>all tests</emphasis> in your link unit<ndash/>they can be from different test suites, or even different source files.</para>
<para>When invoked, the <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS()</ref></computeroutput> macro:</para>
<para><itemizedlist>
<listitem><para>Saves the state of all GoogleTest flags.</para>
</listitem><listitem><para>Creates a test fixture object for the first test.</para>
</listitem><listitem><para>Initializes it via <computeroutput>SetUp()</computeroutput>.</para>
</listitem><listitem><para>Runs the test on the fixture object.</para>
</listitem><listitem><para>Cleans up the fixture via <computeroutput>TearDown()</computeroutput>.</para>
</listitem><listitem><para>Deletes the fixture.</para>
</listitem><listitem><para>Restores the state of all GoogleTest flags.</para>
</listitem><listitem><para>Repeats the above steps for the next test, until all tests have run.</para>
</listitem></itemizedlist>
</para>
<para>If a fatal failure happens the subsequent steps will be skipped.</para>
<para>{: .callout .important} <blockquote><para><zwj/>IMPORTANT: You must <bold>not</bold> ignore the return value of <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS()</ref></computeroutput>, or you will get a compiler error. The rationale for this design is that the automated testing service determines whether a test has passed based on its exit code, not on its stdout/stderr output; thus your <computeroutput>main()</computeroutput> function must return the value of <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS()</ref></computeroutput>.</para>
<para>Also, you should call <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS()</ref></computeroutput> only <bold>once</bold>. Calling it more than once conflicts with some advanced GoogleTest features (e.g., thread-safe <ulink url="advanced.md#death-tests">death tests</ulink>) and thus is not supported. </para>
</blockquote><bold>Availability</bold>: Linux, Windows, Mac.</para>
</sect1>
<sect1 id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md228">
<title>Writing the main() Function</title>
<para>Most users should <emphasis>not</emphasis> need to write their own <computeroutput>main</computeroutput> function and instead link with <computeroutput>gtest_main</computeroutput> (as opposed to with <computeroutput>gtest</computeroutput>), which defines a suitable entry point. See the end of this section for details. The remainder of this section should only apply when you need to do something custom before the tests run that cannot be expressed within the framework of fixtures and test suites.</para>
<para>If you write your own <computeroutput>main</computeroutput> function, it should return the value of <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS()</ref></computeroutput>.</para>
<para>You can start from this boilerplate:</para>
<para><programlisting filename=".c"><codeline><highlight class="normal"><sp/>++</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;this/package/foo.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;gtest/gtest.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">my<sp/>{</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespaceconf_1a2803387c30920e3e74f46eb541db430d" kindref="member">project</ref><sp/>{</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>The<sp/>fixture<sp/>for<sp/>testing<sp/>class<sp/>Foo.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">FooTest<sp/>:<sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classtesting_1_1Test" kindref="compound">::testing::Test</ref><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/></highlight><highlight class="keyword">protected</highlight><highlight class="normal">:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>You<sp/>can<sp/>remove<sp/>any<sp/>or<sp/>all<sp/>of<sp/>the<sp/>following<sp/>functions<sp/>if<sp/>their<sp/>bodies<sp/>would</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>be<sp/>empty.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>FooTest()<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>You<sp/>can<sp/>do<sp/>set-up<sp/>work<sp/>for<sp/>each<sp/>test<sp/>here.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>~FooTest()</highlight><highlight class="keyword"><sp/>override<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>You<sp/>can<sp/>do<sp/>clean-up<sp/>work<sp/>that<sp/>doesn&apos;t<sp/>throw<sp/>exceptions<sp/>here.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>the<sp/>constructor<sp/>and<sp/>destructor<sp/>are<sp/>not<sp/>enough<sp/>for<sp/>setting<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>cleaning<sp/>up<sp/>each<sp/>test,<sp/>you<sp/>can<sp/>define<sp/>the<sp/>following<sp/>methods:</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>SetUp()</highlight><highlight class="keyword"><sp/>override<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Code<sp/>here<sp/>will<sp/>be<sp/>called<sp/>immediately<sp/>after<sp/>the<sp/>constructor<sp/>(right</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>before<sp/>each<sp/>test).</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TearDown()</highlight><highlight class="keyword"><sp/>override<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Code<sp/>here<sp/>will<sp/>be<sp/>called<sp/>immediately<sp/>after<sp/>each<sp/>test<sp/>(right</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>before<sp/>the<sp/>destructor).</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Class<sp/>members<sp/>declared<sp/>here<sp/>can<sp/>be<sp/>used<sp/>by<sp/>all<sp/>tests<sp/>in<sp/>the<sp/>test<sp/>suite</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>Foo.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>Tests<sp/>that<sp/>the<sp/>Foo::Bar()<sp/>method<sp/>does<sp/>Abc.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F</ref>(FooTest,<sp/>MethodBarDoesAbc)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string<sp/>input_filepath<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;this/package/testdata/myinputfile.dat&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string<sp/>output_filepath<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;this/package/testdata/myoutputfile.dat&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/>Foo<sp/><ref refid="namespacepip_1_1__vendor_1_1rich_1_1abc_1a05689400cde1b6357f1392557b8190b7" kindref="member">f</ref>;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a4159019abda84f5366acdb7604ff220a" kindref="member">EXPECT_EQ</ref>(<ref refid="namespacepip_1_1__vendor_1_1rich_1_1abc_1a05689400cde1b6357f1392557b8190b7" kindref="member">f</ref>.Bar(input_filepath,<sp/>output_filepath),<sp/>0);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>Tests<sp/>that<sp/>Foo<sp/>does<sp/>Xyz.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a0ee66d464d1a06c20c1929cae09d8758" kindref="member">TEST_F</ref>(FooTest,<sp/>DoesXyz)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Exercises<sp/>the<sp/>Xyz<sp/>feature<sp/>of<sp/>Foo.</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>project</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>my</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="build_2__deps_2googletest-src_2googlemock_2src_2gmock__main_8cc_1a7f83bdc516d2cb86e20235d94ddf055a" kindref="member">main</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>argc,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>**argv)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><ref refid="namespacetesting_1ace27eb9a2534996f3711aa719689f987" kindref="member">::testing::InitGoogleTest</ref>(&amp;argc,<sp/>argv);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS</ref>();</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>The <computeroutput><ref refid="namespacetesting_1ace27eb9a2534996f3711aa719689f987" kindref="member">testing::InitGoogleTest()</ref></computeroutput> function parses the command line for GoogleTest flags, and removes all recognized flags. This allows the user to control a test program&apos;s behavior via various flags, which we&apos;ll cover in the <ref refid="md_build_2__deps_2googletest-src_2docs_2advanced" kindref="compound">AdvancedGuide</ref>. You <bold>must</bold> call this function before calling <computeroutput><ref refid="build_2__deps_2googletest-src_2googletest_2include_2gtest_2gtest_8h_1a853a3792807489591d3d4a2f2ff9359f" kindref="member">RUN_ALL_TESTS()</ref></computeroutput>, or the flags won&apos;t be properly initialized.</para>
<para>On Windows, <computeroutput>InitGoogleTest()</computeroutput> also works with wide strings, so it can be used in programs compiled in <computeroutput>UNICODE</computeroutput> mode as well.</para>
<para>But maybe you think that writing all those <computeroutput>main</computeroutput> functions is too much work? We agree with you completely, and that&apos;s why Google Test provides a basic implementation of main(). If it fits your needs, then just link your test with the <computeroutput>gtest_main</computeroutput> library and you are good to go.</para>
<para>{: .callout .note} NOTE: <computeroutput>ParseGUnitFlags()</computeroutput> is deprecated in favor of <computeroutput>InitGoogleTest()</computeroutput>.</para>
</sect1>
<sect1 id="md_build_2__deps_2googletest-src_2docs_2primer_1autotoc_md229">
<title>Known Limitations</title>
<para><itemizedlist>
<listitem><para>Google Test is designed to be thread-safe. The implementation is thread-safe on systems where the <computeroutput>pthreads</computeroutput> library is available. It is currently <emphasis>unsafe</emphasis> to use Google Test assertions from two threads concurrently on other systems (e.g. Windows). In most tests this is not an issue as usually the assertions are done in the main thread. If you want to help, you can volunteer to implement the necessary synchronization primitives in <computeroutput>gtest-port.h</computeroutput> for your platform. </para>
</listitem></itemizedlist>
</para>
</sect1>
    </detaileddescription>
    <location file="build/_deps/googletest-src/docs/primer.md"/>
  </compounddef>
</doxygen>
