<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="states_8py" kind="file" language="Python">
    <compoundname>states.py</compoundname>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" prot="public">docutils::parsers::rst::states::MarkupError</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1UnknownInterpretedRoleError" prot="public">docutils::parsers::rst::states::UnknownInterpretedRoleError</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1InterpretedRoleNotImplementedError" prot="public">docutils::parsers::rst::states::InterpretedRoleNotImplementedError</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ParserError" prot="public">docutils::parsers::rst::states::ParserError</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupMismatch" prot="public">docutils::parsers::rst::states::MarkupMismatch</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" prot="public">docutils::parsers::rst::states::Struct</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine" prot="public">docutils::parsers::rst::states::RSTStateMachine</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine" prot="public">docutils::parsers::rst::states::NestedStateMachine</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState" prot="public">docutils::parsers::rst::states::RSTState</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner" prot="public">docutils::parsers::rst::states::Inliner</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body" prot="public">docutils::parsers::rst::states::Body</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822Body" prot="public">docutils::parsers::rst::states::RFC2822Body</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" prot="public">docutils::parsers::rst::states::SpecializedBody</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1BulletList" prot="public">docutils::parsers::rst::states::BulletList</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1DefinitionList" prot="public">docutils::parsers::rst::states::DefinitionList</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1EnumeratedList" prot="public">docutils::parsers::rst::states::EnumeratedList</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1FieldList" prot="public">docutils::parsers::rst::states::FieldList</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1OptionList" prot="public">docutils::parsers::rst::states::OptionList</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822List" prot="public">docutils::parsers::rst::states::RFC2822List</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ExtensionOptions" prot="public">docutils::parsers::rst::states::ExtensionOptions</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1LineBlock" prot="public">docutils::parsers::rst::states::LineBlock</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Explicit" prot="public">docutils::parsers::rst::states::Explicit</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SubstitutionDef" prot="public">docutils::parsers::rst::states::SubstitutionDef</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text" prot="public">docutils::parsers::rst::states::Text</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText" prot="public">docutils::parsers::rst::states::SpecializedText</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Definition" prot="public">docutils::parsers::rst::states::Definition</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line" prot="public">docutils::parsers::rst::states::Line</innerclass>
    <innerclass refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock" prot="public">docutils::parsers::rst::states::QuotedLiteralBlock</innerclass>
    <innernamespace refid="namespacedocutils">docutils</innernamespace>
    <innernamespace refid="namespacedocutils_1_1parsers">docutils::parsers</innernamespace>
    <innernamespace refid="namespacedocutils_1_1parsers_1_1rst">docutils::parsers::rst</innernamespace>
    <innernamespace refid="namespacedocutils_1_1parsers_1_1rst_1_1states">docutils::parsers::rst::states</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacedocutils_1_1parsers_1_1rst_1_1states" refkind="compound"><highlight class="comment">#<sp/>$Id:<sp/>states.py<sp/>9500<sp/>2023-12-14<sp/>22:38:49Z<sp/>milde<sp/>$</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Author:<sp/>David<sp/>Goodger<sp/>&lt;goodger@python.org&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">#<sp/>Copyright:<sp/>This<sp/>module<sp/>has<sp/>been<sp/>placed<sp/>in<sp/>the<sp/>public<sp/>domain.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="6"><highlight class="stringliteral">This<sp/>is<sp/>the<sp/>``docutils.parsers.rst.states``<sp/>module,<sp/>the<sp/>core<sp/>of</highlight></codeline>
<codeline lineno="7"><highlight class="stringliteral">the<sp/>reStructuredText<sp/>parser.<sp/><sp/>It<sp/>defines<sp/>the<sp/>following:</highlight></codeline>
<codeline lineno="8"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="9"><highlight class="stringliteral">:Classes:</highlight></codeline>
<codeline lineno="10"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`RSTStateMachine`:<sp/>reStructuredText<sp/>parser&apos;s<sp/>entry<sp/>point.</highlight></codeline>
<codeline lineno="11"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`NestedStateMachine`:<sp/>recursive<sp/>StateMachine.</highlight></codeline>
<codeline lineno="12"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`RSTState`:<sp/>reStructuredText<sp/>State<sp/>superclass.</highlight></codeline>
<codeline lineno="13"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`Inliner`:<sp/>For<sp/>parsing<sp/>inline<sp/>markup.</highlight></codeline>
<codeline lineno="14"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`Body`:<sp/>Generic<sp/>classifier<sp/>of<sp/>the<sp/>first<sp/>line<sp/>of<sp/>a<sp/>block.</highlight></codeline>
<codeline lineno="15"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`SpecializedBody`:<sp/>Superclass<sp/>for<sp/>compound<sp/>element<sp/>members.</highlight></codeline>
<codeline lineno="16"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`BulletList`:<sp/>Second<sp/>and<sp/>subsequent<sp/>bullet_list<sp/>list_items</highlight></codeline>
<codeline lineno="17"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`DefinitionList`:<sp/>Second+<sp/>definition_list_items.</highlight></codeline>
<codeline lineno="18"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`EnumeratedList`:<sp/>Second+<sp/>enumerated_list<sp/>list_items.</highlight></codeline>
<codeline lineno="19"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`FieldList`:<sp/>Second+<sp/>fields.</highlight></codeline>
<codeline lineno="20"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`OptionList`:<sp/>Second+<sp/>option_list_items.</highlight></codeline>
<codeline lineno="21"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`RFC2822List`:<sp/>Second+<sp/>RFC2822-style<sp/>fields.</highlight></codeline>
<codeline lineno="22"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`ExtensionOptions`:<sp/>Parses<sp/>directive<sp/>option<sp/>fields.</highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`Explicit`:<sp/>Second+<sp/>explicit<sp/>markup<sp/>constructs.</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`SubstitutionDef`:<sp/>For<sp/>embedded<sp/>directives<sp/>in<sp/>substitution<sp/>definitions.</highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`Text`:<sp/>Classifier<sp/>of<sp/>second<sp/>line<sp/>of<sp/>a<sp/>text<sp/>block.</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`SpecializedText`:<sp/>Superclass<sp/>for<sp/>continuation<sp/>lines<sp/>of<sp/>Text-variants.</highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`Definition`:<sp/>Second<sp/>line<sp/>of<sp/>potential<sp/>definition_list_item.</highlight></codeline>
<codeline lineno="28"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`Line`:<sp/>Second<sp/>line<sp/>of<sp/>overlined<sp/>section<sp/>title<sp/>or<sp/>transition<sp/>marker.</highlight></codeline>
<codeline lineno="29"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`Struct`:<sp/>An<sp/>auxiliary<sp/>collection<sp/>class.</highlight></codeline>
<codeline lineno="30"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="31"><highlight class="stringliteral">:Exception<sp/>classes:</highlight></codeline>
<codeline lineno="32"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`MarkupError`</highlight></codeline>
<codeline lineno="33"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`ParserError`</highlight></codeline>
<codeline lineno="34"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`MarkupMismatch`</highlight></codeline>
<codeline lineno="35"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="36"><highlight class="stringliteral">:Functions:</highlight></codeline>
<codeline lineno="37"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`escape2null()`:<sp/>Return<sp/>a<sp/>string,<sp/>escape-backslashes<sp/>converted<sp/>to<sp/>nulls.</highlight></codeline>
<codeline lineno="38"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`unescape()`:<sp/>Return<sp/>a<sp/>string,<sp/>nulls<sp/>removed<sp/>or<sp/>restored<sp/>to<sp/>backslashes.</highlight></codeline>
<codeline lineno="39"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="40"><highlight class="stringliteral">:Attributes:</highlight></codeline>
<codeline lineno="41"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>-<sp/>`state_classes`:<sp/>set<sp/>of<sp/>State<sp/>classes<sp/>used<sp/>with<sp/>`RSTStateMachine`.</highlight></codeline>
<codeline lineno="42"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="43"><highlight class="stringliteral">Parser<sp/>Overview</highlight></codeline>
<codeline lineno="44"><highlight class="stringliteral">===============</highlight></codeline>
<codeline lineno="45"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="46"><highlight class="stringliteral">The<sp/>reStructuredText<sp/>parser<sp/>is<sp/>implemented<sp/>as<sp/>a<sp/>recursive<sp/>state<sp/>machine,</highlight></codeline>
<codeline lineno="47"><highlight class="stringliteral">examining<sp/>its<sp/>input<sp/>one<sp/>line<sp/>at<sp/>a<sp/>time.<sp/><sp/>To<sp/>understand<sp/>how<sp/>the<sp/>parser<sp/>works,</highlight></codeline>
<codeline lineno="48"><highlight class="stringliteral">please<sp/>first<sp/>become<sp/>familiar<sp/>with<sp/>the<sp/>`docutils.statemachine`<sp/>module.<sp/><sp/>In<sp/>the</highlight></codeline>
<codeline lineno="49"><highlight class="stringliteral">description<sp/>below,<sp/>references<sp/>are<sp/>made<sp/>to<sp/>classes<sp/>defined<sp/>in<sp/>this<sp/>module;</highlight></codeline>
<codeline lineno="50"><highlight class="stringliteral">please<sp/>see<sp/>the<sp/>individual<sp/>classes<sp/>for<sp/>details.</highlight></codeline>
<codeline lineno="51"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="52"><highlight class="stringliteral">Parsing<sp/>proceeds<sp/>as<sp/>follows:</highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="54"><highlight class="stringliteral">1.<sp/>The<sp/>state<sp/>machine<sp/>examines<sp/>each<sp/>line<sp/>of<sp/>input,<sp/>checking<sp/>each<sp/>of<sp/>the</highlight></codeline>
<codeline lineno="55"><highlight class="stringliteral"><sp/><sp/><sp/>transition<sp/>patterns<sp/>of<sp/>the<sp/>state<sp/>`Body`,<sp/>in<sp/>order,<sp/>looking<sp/>for<sp/>a<sp/>match.</highlight></codeline>
<codeline lineno="56"><highlight class="stringliteral"><sp/><sp/><sp/>The<sp/>implicit<sp/>transitions<sp/>(blank<sp/>lines<sp/>and<sp/>indentation)<sp/>are<sp/>checked<sp/>before</highlight></codeline>
<codeline lineno="57"><highlight class="stringliteral"><sp/><sp/><sp/>any<sp/>others.<sp/><sp/>The<sp/>&apos;text&apos;<sp/>transition<sp/>is<sp/>a<sp/>catch-all<sp/>(matches<sp/>anything).</highlight></codeline>
<codeline lineno="58"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="59"><highlight class="stringliteral">2.<sp/>The<sp/>method<sp/>associated<sp/>with<sp/>the<sp/>matched<sp/>transition<sp/>pattern<sp/>is<sp/>called.</highlight></codeline>
<codeline lineno="60"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="61"><highlight class="stringliteral"><sp/><sp/><sp/>A.<sp/>Some<sp/>transition<sp/>methods<sp/>are<sp/>self-contained,<sp/>appending<sp/>elements<sp/>to<sp/>the</highlight></codeline>
<codeline lineno="62"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>document<sp/>tree<sp/>(`Body.doctest`<sp/>parses<sp/>a<sp/>doctest<sp/>block).<sp/><sp/>The<sp/>parser&apos;s</highlight></codeline>
<codeline lineno="63"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>current<sp/>line<sp/>index<sp/>is<sp/>advanced<sp/>to<sp/>the<sp/>end<sp/>of<sp/>the<sp/>element,<sp/>and<sp/>parsing</highlight></codeline>
<codeline lineno="64"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>continues<sp/>with<sp/>step<sp/>1.</highlight></codeline>
<codeline lineno="65"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="66"><highlight class="stringliteral"><sp/><sp/><sp/>B.<sp/>Other<sp/>transition<sp/>methods<sp/>trigger<sp/>the<sp/>creation<sp/>of<sp/>a<sp/>nested<sp/>state<sp/>machine,</highlight></codeline>
<codeline lineno="67"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>whose<sp/>job<sp/>is<sp/>to<sp/>parse<sp/>a<sp/>compound<sp/>construct<sp/>(&apos;indent&apos;<sp/>does<sp/>a<sp/>block<sp/>quote,</highlight></codeline>
<codeline lineno="68"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>&apos;bullet&apos;<sp/>does<sp/>a<sp/>bullet<sp/>list,<sp/>&apos;overline&apos;<sp/>does<sp/>a<sp/>section<sp/>[first<sp/>checking</highlight></codeline>
<codeline lineno="69"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>for<sp/>a<sp/>valid<sp/>section<sp/>header],<sp/>etc.).</highlight></codeline>
<codeline lineno="70"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="71"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>In<sp/>the<sp/>case<sp/>of<sp/>lists<sp/>and<sp/>explicit<sp/>markup,<sp/>a<sp/>one-off<sp/>state<sp/>machine<sp/>is</highlight></codeline>
<codeline lineno="72"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>created<sp/>and<sp/>run<sp/>to<sp/>parse<sp/>contents<sp/>of<sp/>the<sp/>first<sp/>item.</highlight></codeline>
<codeline lineno="73"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="74"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>A<sp/>new<sp/>state<sp/>machine<sp/>is<sp/>created<sp/>and<sp/>its<sp/>initial<sp/>state<sp/>is<sp/>set<sp/>to<sp/>the</highlight></codeline>
<codeline lineno="75"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>appropriate<sp/>specialized<sp/>state<sp/>(`BulletList`<sp/>in<sp/>the<sp/>case<sp/>of<sp/>the</highlight></codeline>
<codeline lineno="76"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;bullet&apos;<sp/>transition;<sp/>see<sp/>`SpecializedBody`<sp/>for<sp/>more<sp/>detail).<sp/><sp/>This</highlight></codeline>
<codeline lineno="77"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>machine<sp/>is<sp/>run<sp/>to<sp/>parse<sp/>the<sp/>compound<sp/>element<sp/>(or<sp/>series<sp/>of</highlight></codeline>
<codeline lineno="78"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>explicit<sp/>markup<sp/>elements),<sp/>and<sp/>returns<sp/>as<sp/>soon<sp/>as<sp/>a<sp/>non-member<sp/>element</highlight></codeline>
<codeline lineno="79"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is<sp/>encountered.<sp/><sp/>For<sp/>example,<sp/>the<sp/>`BulletList`<sp/>state<sp/>machine<sp/>ends<sp/>as</highlight></codeline>
<codeline lineno="80"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>soon<sp/>as<sp/>it<sp/>encounters<sp/>an<sp/>element<sp/>which<sp/>is<sp/>not<sp/>a<sp/>list<sp/>item<sp/>of<sp/>that</highlight></codeline>
<codeline lineno="81"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bullet<sp/>list.<sp/><sp/>The<sp/>optional<sp/>omission<sp/>of<sp/>inter-element<sp/>blank<sp/>lines<sp/>is</highlight></codeline>
<codeline lineno="82"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enabled<sp/>by<sp/>this<sp/>nested<sp/>state<sp/>machine.</highlight></codeline>
<codeline lineno="83"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="84"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>The<sp/>current<sp/>line<sp/>index<sp/>is<sp/>advanced<sp/>to<sp/>the<sp/>end<sp/>of<sp/>the<sp/>elements<sp/>parsed,</highlight></codeline>
<codeline lineno="85"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>parsing<sp/>continues<sp/>with<sp/>step<sp/>1.</highlight></codeline>
<codeline lineno="86"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="87"><highlight class="stringliteral"><sp/><sp/><sp/>C.<sp/>The<sp/>result<sp/>of<sp/>the<sp/>&apos;text&apos;<sp/>transition<sp/>depends<sp/>on<sp/>the<sp/>next<sp/>line<sp/>of<sp/>text.</highlight></codeline>
<codeline lineno="88"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>current<sp/>state<sp/>is<sp/>changed<sp/>to<sp/>`Text`,<sp/>under<sp/>which<sp/>the<sp/>second<sp/>line<sp/>is</highlight></codeline>
<codeline lineno="89"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>examined.<sp/><sp/>If<sp/>the<sp/>second<sp/>line<sp/>is:</highlight></codeline>
<codeline lineno="90"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="91"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>Indented:<sp/>The<sp/>element<sp/>is<sp/>a<sp/>definition<sp/>list<sp/>item,<sp/>and<sp/>parsing<sp/>proceeds</highlight></codeline>
<codeline lineno="92"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>similarly<sp/>to<sp/>step<sp/>2.B,<sp/>using<sp/>the<sp/>`DefinitionList`<sp/>state.</highlight></codeline>
<codeline lineno="93"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="94"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>A<sp/>line<sp/>of<sp/>uniform<sp/>punctuation<sp/>characters:<sp/>The<sp/>element<sp/>is<sp/>a<sp/>section</highlight></codeline>
<codeline lineno="95"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>header;<sp/>again,<sp/>parsing<sp/>proceeds<sp/>as<sp/>in<sp/>step<sp/>2.B,<sp/>and<sp/>`Body`<sp/>is<sp/>still</highlight></codeline>
<codeline lineno="96"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>used.</highlight></codeline>
<codeline lineno="97"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="98"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>Anything<sp/>else:<sp/>The<sp/>element<sp/>is<sp/>a<sp/>paragraph,<sp/>which<sp/>is<sp/>examined<sp/>for</highlight></codeline>
<codeline lineno="99"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inline<sp/>markup<sp/>and<sp/>appended<sp/>to<sp/>the<sp/>parent<sp/>element.<sp/><sp/>Processing</highlight></codeline>
<codeline lineno="100"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>continues<sp/>with<sp/>step<sp/>1.</highlight></codeline>
<codeline lineno="101"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal">__docformat__<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;reStructuredText&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>re</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>types<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>FunctionType,<sp/>MethodType</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>docutils<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>nodes,<sp/>statemachine,<sp/>utils</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>docutils<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>ApplicationError,<sp/>DataError</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1statemachine" kindref="compound">docutils.statemachine</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>StateMachineWS,<sp/>StateWS</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1nodes" kindref="compound">docutils.nodes</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>fully_normalize_name<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>normalize_name</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1nodes" kindref="compound">docutils.nodes</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>unescape,<sp/>whitespace_normalize_name</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1parsers_1_1rst" kindref="compound">docutils.parsers.rst</ref></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1parsers_1_1rst" kindref="compound">docutils.parsers.rst</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>directives,<sp/>languages,<sp/>tableparser,<sp/>roles</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1utils" kindref="compound">docutils.utils</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>escape2null,<sp/>column_width</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1utils" kindref="compound">docutils.utils</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>punctuation_chars,<sp/>roman,<sp/>urischemes</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1utils" kindref="compound">docutils.utils</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>split_escaped_whitespace</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" kindref="compound">MarkupError</ref>(<ref refid="classdocutils_1_1DataError" kindref="compound">DataError</ref>):<sp/></highlight><highlight class="keyword">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1UnknownInterpretedRoleError" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1UnknownInterpretedRoleError" kindref="compound">UnknownInterpretedRoleError</ref>(<ref refid="classdocutils_1_1DataError" kindref="compound">DataError</ref>):<sp/></highlight><highlight class="keyword">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1InterpretedRoleNotImplementedError" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1InterpretedRoleNotImplementedError" kindref="compound">InterpretedRoleNotImplementedError</ref>(<ref refid="classdocutils_1_1DataError" kindref="compound">DataError</ref>):<sp/></highlight><highlight class="keyword">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ParserError" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ParserError" kindref="compound">ParserError</ref>(<ref refid="classdocutils_1_1ApplicationError" kindref="compound">ApplicationError</ref>):<sp/></highlight><highlight class="keyword">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupMismatch" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupMismatch" kindref="compound">MarkupMismatch</ref>(Exception):<sp/></highlight><highlight class="keyword">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="128" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>:</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Stores<sp/>data<sp/>attributes<sp/>for<sp/>dotted-attribute<sp/>access.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct_1af8f993fdddc84114a82c470ae33fe7b7" kindref="member">__init__</ref>(self,<sp/>**keywordargs):</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.__dict__.update(keywordargs)</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine" kindref="compound">RSTStateMachine</ref>(<ref refid="classdocutils_1_1statemachine_1_1StateMachineWS" kindref="compound">StateMachineWS</ref>):</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="139"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>reStructuredText&apos;s<sp/>master<sp/>StateMachine.</highlight></codeline>
<codeline lineno="140"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="141"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>The<sp/>entry<sp/>point<sp/>to<sp/>reStructuredText<sp/>parsing<sp/>is<sp/>the<sp/>`run()`<sp/>method.</highlight></codeline>
<codeline lineno="142"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1adf46aa31d2e7203466a29f2218991820" kindref="member">run</ref>(self,<sp/>input_lines,<sp/>document,<sp/>input_offset=0,<sp/>match_titles=True,</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inliner=None):</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="147"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parse<sp/>`input_lines`<sp/>and<sp/>modify<sp/>the<sp/>`document`<sp/>node<sp/>in<sp/>place.</highlight></codeline>
<codeline lineno="148"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="149"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Extend<sp/>`StateMachineWS.run()`:<sp/>set<sp/>up<sp/>parse-global<sp/>data<sp/>and</highlight></codeline>
<codeline lineno="150"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run<sp/>the<sp/>StateMachine.</highlight></codeline>
<codeline lineno="151"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1a9cf2e62bd2830b304eea76915e11e655" kindref="member">language</ref><sp/>=<sp/>languages.get_language(</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>document.settings.language_code,<sp/>document.reporter)</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1a71e256380d47e23231302fb74cf79d52" kindref="member">match_titles</ref><sp/>=<sp/>match_titles</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>inliner<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inliner<sp/>=<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner" kindref="compound">Inliner</ref>()</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inliner.init_customizations(document.settings)</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1a7ac7e3b7d03ba6b81909a7a4be13c09d" kindref="member">memo</ref><sp/>=<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>(document=document,</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reporter=document.reporter,</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>language=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1a9cf2e62bd2830b304eea76915e11e655" kindref="member">language</ref>,</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>title_styles=[],</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>section_level=0,</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>section_bubble_up_kludge=</highlight><highlight class="keyword">False</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inliner=inliner)</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1a0b2a6ae2e80458d76f579b910bf9f7fd" kindref="member">document</ref><sp/>=<sp/>document</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1StateMachine_1a946fa3216f667aa06e7eeced55199425" kindref="member">attach_observer</ref>(document.note_source)</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1aca44aab93c2fcdb223366f20df973e7a" kindref="member">reporter</ref><sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1a7ac7e3b7d03ba6b81909a7a4be13c09d" kindref="member">memo</ref>.reporter</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1aa1e80077b87717e59a40e70dacfaeab7" kindref="member">node</ref><sp/>=<sp/>document</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>results<sp/>=<sp/>StateMachineWS.run(self,<sp/>input_lines,<sp/>input_offset,</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_source=document[</highlight><highlight class="stringliteral">&apos;source&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>results<sp/>==<sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;RSTStateMachine.run()<sp/>results<sp/>should<sp/>be<sp/>empty!&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1aa1e80077b87717e59a40e70dacfaeab7" kindref="member">node</ref><sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTStateMachine_1a7ac7e3b7d03ba6b81909a7a4be13c09d" kindref="member">memo</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>remove<sp/>unneeded<sp/>references</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine" kindref="compound">NestedStateMachine</ref>(<ref refid="classdocutils_1_1statemachine_1_1StateMachineWS" kindref="compound">StateMachineWS</ref>):</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="178"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>StateMachine<sp/>run<sp/>from<sp/>within<sp/>other<sp/>StateMachine<sp/>runs,<sp/>to<sp/>parse<sp/>nested</highlight></codeline>
<codeline lineno="179"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>document<sp/>structures.</highlight></codeline>
<codeline lineno="180"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine_1a0cc8135970fb0c2d9bd8c5bf42d004b3" kindref="member">run</ref>(self,<sp/>input_lines,<sp/>input_offset,<sp/>memo,<sp/>node,<sp/>match_titles=True):</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="184"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parse<sp/>`input_lines`<sp/>and<sp/>populate<sp/>a<sp/>`docutils.nodes.document`<sp/>instance.</highlight></codeline>
<codeline lineno="185"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="186"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Extend<sp/>`StateMachineWS.run()`:<sp/>set<sp/>up<sp/>document-wide<sp/>data.</highlight></codeline>
<codeline lineno="187"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine_1a3c8114c9e054387388a1f817bede78a8" kindref="member">match_titles</ref><sp/>=<sp/>match_titles</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine_1a53356c068d77f38672509ff4533db755" kindref="member">memo</ref><sp/>=<sp/>memo</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine_1a174de0768466c73cd274b9d2c93ce950" kindref="member">document</ref><sp/>=<sp/>memo.document</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1StateMachine_1a946fa3216f667aa06e7eeced55199425" kindref="member">attach_observer</ref>(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine_1a174de0768466c73cd274b9d2c93ce950" kindref="member">document</ref>.note_source)</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine_1afee4432e64fa2ef6ae34025dbbcefb53" kindref="member">reporter</ref><sp/>=<sp/>memo.reporter</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine_1af2c06cb3647e741898ed5d2731542e8b" kindref="member">language</ref><sp/>=<sp/>memo.language</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1NestedStateMachine_1adb86397a9ac3e69eb67a0b6ba4136d61" kindref="member">node</ref><sp/>=<sp/>node</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>results<sp/>=<sp/>StateMachineWS.run(self,<sp/>input_lines,<sp/>input_offset)</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>results<sp/>==<sp/>[],<sp/>(</highlight><highlight class="stringliteral">&apos;NestedStateMachine.run()<sp/>results<sp/>should<sp/>be<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;empty!&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>results</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState" kindref="compound">RSTState</ref>(<ref refid="classdocutils_1_1statemachine_1_1StateWS" kindref="compound">StateWS</ref>):</highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="204"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>reStructuredText<sp/>State<sp/>superclass.</highlight></codeline>
<codeline lineno="205"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="206"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Contains<sp/>methods<sp/>used<sp/>by<sp/>all<sp/>State<sp/>subclasses.</highlight></codeline>
<codeline lineno="207"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>nested_sm<sp/>=<sp/>NestedStateMachine</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>nested_sm_cache<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a2baca5762327f76433445e87dd7e3fc7" kindref="member">__init__</ref>(self,<sp/>state_machine,<sp/>debug=False):</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a35b052d1744b746ca1ed2b36fe1408cf" kindref="member">nested_sm_kwargs</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a3b88332e8abfaf195b4b89594fed53d1" kindref="member">nested_sm_kwargs</ref><sp/>=<sp/>{</highlight><highlight class="stringliteral">&apos;state_classes&apos;</highlight><highlight class="normal">:<sp/>state_classes,</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;initial_state&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StateWS.__init__(self,<sp/>state_machine,<sp/>debug)</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf7cbc46f2e2065f638dd640b0392ed4" kindref="member">runtime_init</ref>(self):</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>StateWS.runtime_init(self)</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memo<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.memo</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref><sp/>=<sp/>memo</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref><sp/>=<sp/>memo.reporter</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab2f32a611bef1b1c6ddbfddd91d58075" kindref="member">inliner</ref><sp/>=<sp/>memo.inliner</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><sp/>=<sp/>memo.document</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.node</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>enable<sp/>the<sp/>reporter<sp/>to<sp/>determine<sp/>source<sp/>and<sp/>source-line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>hasattr(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>,<sp/></highlight><highlight class="stringliteral">&apos;get_source_and_line&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.get_source_and_line<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line<sp/><sp/></highlight><highlight class="comment">#<sp/>noqa:E501</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(self,<sp/>abs_line_offset):</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="231"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Jump<sp/>to<sp/>input<sp/>line<sp/>`abs_line_offset`,<sp/>ignoring<sp/>jumps<sp/>past<sp/>the<sp/>end.</highlight></codeline>
<codeline lineno="232"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(abs_line_offset)</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>EOFError:</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a9232fa00eea49924667c9baea0779781" kindref="member">no_match</ref>(self,<sp/>context,<sp/>transitions):</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="240"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Override<sp/>`StateWS.no_match`<sp/>to<sp/>generate<sp/>a<sp/>system<sp/>message.</highlight></codeline>
<codeline lineno="241"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="242"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>This<sp/>code<sp/>should<sp/>never<sp/>be<sp/>run.</highlight></codeline>
<codeline lineno="243"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.severe(</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Internal<sp/>error:<sp/>no<sp/>transition<sp/>pattern<sp/>match.<sp/><sp/>State:<sp/>&quot;%s&quot;;<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;transitions:<sp/>%s;<sp/>context:<sp/>%s;<sp/>current<sp/>line:<sp/>%r.&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>(self.__class__.__name__,<sp/>transitions,<sp/>context,</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line))</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>context,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab3f956ae81f4abf6b272a731f79222ac" kindref="member">bof</ref>(self,<sp/>context):</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Called<sp/>at<sp/>beginning<sp/>of<sp/>file.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>[]</highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(self,<sp/>block,<sp/>input_offset,<sp/>node,<sp/>match_titles=False,</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_class=None,<sp/>state_machine_kwargs=None):</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="258"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Create<sp/>a<sp/>new<sp/>StateMachine<sp/>rooted<sp/>at<sp/>`node`<sp/>and<sp/>run<sp/>it<sp/>over<sp/>the<sp/>input</highlight></codeline>
<codeline lineno="259"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>`block`.</highlight></codeline>
<codeline lineno="260"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>use_default<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>state_machine_class<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_class<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a2929822bc21d74c330c524f53aaf599b" kindref="member">nested_sm</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a757e253962c6f52d7fbbbf953469fe57" kindref="member">nested_sm</ref></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>use_default<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>state_machine_kwargs<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_kwargs<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a35b052d1744b746ca1ed2b36fe1408cf" kindref="member">nested_sm_kwargs</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a3b88332e8abfaf195b4b89594fed53d1" kindref="member">nested_sm_kwargs</ref></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>use_default<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block_length<sp/>=<sp/>len(block)</highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>use_default<sp/>==<sp/>2:</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a8375fdb87ebbb8e77175f0ed9c0c141a" kindref="member">nested_sm_cache</ref>.pop()</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>IndexError:</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>state_machine:</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine<sp/>=<sp/>state_machine_class(debug=self.<ref refid="classdocutils_1_1statemachine_1_1State_1a21c75bc16ebc63ea1559189f1acc3802" kindref="member">debug</ref>,</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>**state_machine_kwargs)</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine.run(block,<sp/>input_offset,<sp/>memo=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref>,</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=node,<sp/>match_titles=match_titles)</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>use_default<sp/>==<sp/>2:</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a8375fdb87ebbb8e77175f0ed9c0c141a" kindref="member">nested_sm_cache</ref>.append(state_machine)</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine.unlink()</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_offset<sp/>=<sp/>state_machine.abs_line_offset()</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>No<sp/>`block.parent`<sp/>implies<sp/>disconnected<sp/>--<sp/>lines<sp/>aren&apos;t<sp/>in<sp/>sync:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>block.parent<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>(len(block)<sp/>-<sp/>block_length)<sp/>!=<sp/>0:</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Adjustment<sp/>for<sp/>block<sp/>if<sp/>modified<sp/>in<sp/>nested<sp/>parse:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.next_line(len(block)<sp/>-<sp/>block_length)</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>new_offset</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(self,<sp/>block,<sp/>input_offset,<sp/>node,<sp/>initial_state,</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish,</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish_state=None,</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>extra_settings={},</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match_titles=False,</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_class=None,</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_kwargs=None):</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="300"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Create<sp/>a<sp/>new<sp/>StateMachine<sp/>rooted<sp/>at<sp/>`node`<sp/>and<sp/>run<sp/>it<sp/>over<sp/>the<sp/>input</highlight></codeline>
<codeline lineno="301"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>`block`.<sp/>Also<sp/>keep<sp/>track<sp/>of<sp/>optional<sp/>intermediate<sp/>blank<sp/>lines<sp/>and<sp/>the</highlight></codeline>
<codeline lineno="302"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>required<sp/>final<sp/>one.</highlight></codeline>
<codeline lineno="303"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>state_machine_class<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_class<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a2929822bc21d74c330c524f53aaf599b" kindref="member">nested_sm</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a757e253962c6f52d7fbbbf953469fe57" kindref="member">nested_sm</ref></highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>state_machine_kwargs<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_kwargs<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a35b052d1744b746ca1ed2b36fe1408cf" kindref="member">nested_sm_kwargs</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a3b88332e8abfaf195b4b89594fed53d1" kindref="member">nested_sm_kwargs</ref>.copy()</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_kwargs[</highlight><highlight class="stringliteral">&apos;initial_state&apos;</highlight><highlight class="normal">]<sp/>=<sp/>initial_state</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine<sp/>=<sp/>state_machine_class(debug=self.<ref refid="classdocutils_1_1statemachine_1_1State_1a21c75bc16ebc63ea1559189f1acc3802" kindref="member">debug</ref>,</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>**state_machine_kwargs)</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>blank_finish_state<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish_state<sp/>=<sp/>initial_state</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine.states[blank_finish_state].blank_finish<sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>key,<sp/>value<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>extra_settings.items():</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setattr(state_machine.states[initial_state],<sp/>key,<sp/>value)</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine.run(block,<sp/>input_offset,<sp/>memo=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref>,</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=node,<sp/>match_titles=match_titles)</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish<sp/>=<sp/>state_machine.states[blank_finish_state].blank_finish</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine.unlink()</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>state_machine.abs_line_offset(),<sp/>blank_finish</highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a3c950bcb6be79f0d128e79d6ccb50ee7" kindref="member">section</ref>(self,<sp/>title,<sp/>source,<sp/>style,<sp/>lineno,<sp/>messages):</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Check<sp/>for<sp/>a<sp/>valid<sp/>subsection<sp/>and<sp/>create<sp/>one<sp/>if<sp/>it<sp/>checks<sp/>out.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a058f8d8cee8ddc24ac1df292f9ff57f4" kindref="member">check_subsection</ref>(source,<sp/>style,<sp/>lineno):</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a8f79efdc9496d89456e964bf3360322e" kindref="member">new_subsection</ref>(title,<sp/>lineno,<sp/>messages)</highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a058f8d8cee8ddc24ac1df292f9ff57f4" kindref="member">check_subsection</ref>(self,<sp/>source,<sp/>style,<sp/>lineno):</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="329"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Check<sp/>for<sp/>a<sp/>valid<sp/>subsection<sp/>header.<sp/><sp/>Return<sp/>True<sp/>or<sp/>False.</highlight></codeline>
<codeline lineno="330"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="331"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>When<sp/>a<sp/>new<sp/>section<sp/>is<sp/>reached<sp/>that<sp/>isn&apos;t<sp/>a<sp/>subsection<sp/>of<sp/>the<sp/>current</highlight></codeline>
<codeline lineno="332"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>section,<sp/>back<sp/>up<sp/>the<sp/>line<sp/>count<sp/>(use<sp/>``previous_line(-x)``),<sp/>then</highlight></codeline>
<codeline lineno="333"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>``raise<sp/>EOFError``.<sp/><sp/>The<sp/>current<sp/>StateMachine<sp/>will<sp/>finish,<sp/>then<sp/>the</highlight></codeline>
<codeline lineno="334"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>calling<sp/>StateMachine<sp/>can<sp/>re-examine<sp/>the<sp/>title.<sp/><sp/>This<sp/>will<sp/>work<sp/>its<sp/>way</highlight></codeline>
<codeline lineno="335"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>back<sp/>up<sp/>the<sp/>calling<sp/>chain<sp/>until<sp/>the<sp/>correct<sp/>section<sp/>level<sp/>isreached.</highlight></codeline>
<codeline lineno="336"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="337"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>@@@<sp/>Alternative:<sp/>Evaluate<sp/>the<sp/>title,<sp/>store<sp/>the<sp/>title<sp/>info<sp/>&amp;<sp/>level,<sp/>and</highlight></codeline>
<codeline lineno="338"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>back<sp/>up<sp/>the<sp/>chain<sp/>until<sp/>that<sp/>level<sp/>is<sp/>reached.<sp/><sp/>Store<sp/>in<sp/>memo?<sp/>Or</highlight></codeline>
<codeline lineno="339"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>in<sp/>results?</highlight></codeline>
<codeline lineno="340"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="341"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:Exception:<sp/>`EOFError`<sp/>when<sp/>a<sp/>sibling<sp/>or<sp/>supersection<sp/>encountered.</highlight></codeline>
<codeline lineno="342"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memo<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref></highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>title_styles<sp/>=<sp/>memo.title_styles</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mylevel<sp/>=<sp/>memo.section_level</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>check<sp/>for<sp/>existing<sp/>title<sp/>style</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>level<sp/>=<sp/>title_styles.index(style)<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>ValueError:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>new<sp/>title<sp/>style</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(title_styles)<sp/>==<sp/>memo.section_level:<sp/><sp/></highlight><highlight class="comment">#<sp/>new<sp/>subsection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>title_styles.append(style)</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>not<sp/>at<sp/>lowest<sp/>level</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6e9e29b350b0ad7ebf1154edd3d44ca9" kindref="member">title_inconsistent</ref>(source,<sp/>lineno)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>level<sp/>&lt;=<sp/>mylevel:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>sibling<sp/>or<sp/>supersection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memo.section_level<sp/>=<sp/>level<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>bubble<sp/>up<sp/>to<sp/>parent<sp/>section</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(style)<sp/>==<sp/>2:</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memo.section_bubble_up_kludge<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>back<sp/>up<sp/>2<sp/>lines<sp/>for<sp/>underline<sp/>title,<sp/>3<sp/>for<sp/>overline<sp/>title</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line(len(style)<sp/>+<sp/>1)</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>let<sp/>parent<sp/>section<sp/>re-evaluate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>level<sp/>==<sp/>mylevel<sp/>+<sp/>1:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>immediate<sp/>subsection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>invalid<sp/>subsection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6e9e29b350b0ad7ebf1154edd3d44ca9" kindref="member">title_inconsistent</ref>(source,<sp/>lineno)</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6e9e29b350b0ad7ebf1154edd3d44ca9" kindref="member">title_inconsistent</ref>(self,<sp/>sourcetext,<sp/>lineno):</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>error<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.severe(</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Title<sp/>level<sp/>inconsistent:&apos;</highlight><highlight class="normal">,<sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>sourcetext),</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>error</highlight></codeline>
<codeline lineno="373"><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a8f79efdc9496d89456e964bf3360322e" kindref="member">new_subsection</ref>(self,<sp/>title,<sp/>lineno,<sp/>messages):</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Append<sp/>new<sp/>subsection<sp/>to<sp/>document<sp/>tree.<sp/>On<sp/>return,<sp/>check<sp/>level.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memo<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref></highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mylevel<sp/>=<sp/>memo.section_level</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memo.section_level<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>section_node<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1section" kindref="compound">nodes.section</ref>()</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>section_node</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>textnodes,<sp/>title_messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a7f7691db57b736f35c1ebc6d56a9dff9" kindref="member">inline_text</ref>(title,<sp/>lineno)</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>titlenode<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1title" kindref="compound">nodes.title</ref>(title,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>*textnodes)</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>normalize_name(titlenode.astext())</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>section_node[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">].append(name)</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>section_node<sp/>+=<sp/>titlenode</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>section_node<sp/>+=<sp/>messages</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>section_node<sp/>+=<sp/>title_messages</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref>.note_implicit_target(section_node,<sp/>section_node)</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>absoffset<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newabsoffset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],<sp/>input_offset=absoffset,</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=section_node,<sp/>match_titles=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(newabsoffset)</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>memo.section_level<sp/>&lt;=<sp/>mylevel:<sp/><sp/></highlight><highlight class="comment">#<sp/>can&apos;t<sp/>handle<sp/>next<sp/>section?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>bubble<sp/>up<sp/>to<sp/>supersection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>reset<sp/>section_level;<sp/>next<sp/>pass<sp/>will<sp/>detect<sp/>it<sp/>properly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>memo.section_level<sp/>=<sp/>mylevel</highlight></codeline>
<codeline lineno="399"><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a77f9de6f6116937a098014209464db6c" kindref="member">paragraph</ref>(self,<sp/>lines,<sp/>lineno):</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="402"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>a<sp/>list<sp/>(paragraph<sp/>&amp;<sp/>messages)<sp/>&amp;<sp/>a<sp/>boolean:<sp/>literal_block<sp/>next?</highlight></codeline>
<codeline lineno="403"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(lines).rstrip()</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>re.search(</highlight><highlight class="stringliteral">r&apos;(?&lt;!\\)(\\\\)*::$&apos;</highlight><highlight class="normal">,<sp/>data):</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(data)<sp/>==<sp/>2:</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>1</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>data[-3]<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;<sp/>\n&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>data[:-3].rstrip()</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>data[:-1]</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>literalnext<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>data</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>literalnext<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>textnodes,<sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a7f7691db57b736f35c1ebc6d56a9dff9" kindref="member">inline_text</ref>(text,<sp/>lineno)</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1paragraph" kindref="compound">nodes.paragraph</ref>(data,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>*textnodes)</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p.source,<sp/>p.line<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(lineno)</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[p]<sp/>+<sp/>messages,<sp/>literalnext</highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a7f7691db57b736f35c1ebc6d56a9dff9" kindref="member">inline_text</ref>(self,<sp/>text,<sp/>lineno):</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="423"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>2<sp/>lists:<sp/>nodes<sp/>(text<sp/>and<sp/>inline<sp/>elements),<sp/>and<sp/>system_messages.</highlight></codeline>
<codeline lineno="424"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodes,<sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab2f32a611bef1b1c6ddbfddd91d58075" kindref="member">inliner</ref>.parse(text,<sp/>lineno,</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref>,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref>)</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nodes,<sp/>messages</highlight></codeline>
<codeline lineno="428"><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(self,<sp/>node_name):</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>the<sp/>actual<sp/>problem<sp/>is<sp/>one<sp/>line<sp/>below<sp/>the<sp/>current<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(</highlight><highlight class="stringliteral">&apos;%s<sp/>ends<sp/>without<sp/>a<sp/>blank<sp/>line;<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;unexpected<sp/>unindent.&apos;</highlight><highlight class="normal"><sp/>%<sp/>node_name,</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="435"><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacedocutils_1_1parsers_1_1rst_1_1states_1ae51f57b3dac56e245ee9be56b9dec83c" kindref="member">build_regexp</ref>(definition,<sp/>compile=True):</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="439"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Build,<sp/>compile<sp/>and<sp/>return<sp/>a<sp/>regular<sp/>expression<sp/>based<sp/>on<sp/>`definition`.</highlight></codeline>
<codeline lineno="440"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="441"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>:Parameter:<sp/>`definition`:<sp/>a<sp/>4-tuple<sp/>(group<sp/>name,<sp/>prefix,<sp/>suffix,<sp/>parts),</highlight></codeline>
<codeline lineno="442"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>where<sp/>&quot;parts&quot;<sp/>is<sp/>a<sp/>list<sp/>of<sp/>regular<sp/>expressions<sp/>and/or<sp/>regular</highlight></codeline>
<codeline lineno="443"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expression<sp/>definitions<sp/>to<sp/>be<sp/>joined<sp/>into<sp/>an<sp/>or-group.</highlight></codeline>
<codeline lineno="444"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/>name,<sp/>prefix,<sp/>suffix,<sp/>parts<sp/>=<sp/>definition</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/>part_strings<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>part<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>parts:</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(part,<sp/>tuple):</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>part_strings.append(<ref refid="namespacedocutils_1_1parsers_1_1rst_1_1states_1ae51f57b3dac56e245ee9be56b9dec83c" kindref="member">build_regexp</ref>(part,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>part_strings.append(part)</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/>or_group<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;|&apos;</highlight><highlight class="normal">.join(part_strings)</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/>regexp<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;%(prefix)s(?P&lt;%(name)s&gt;%(or_group)s)%(suffix)s&apos;</highlight><highlight class="normal"><sp/>%<sp/>locals()</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>compile:</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>re.compile(regexp)</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>regexp</highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner" kindref="compound">Inliner</ref>:</highlight></codeline>
<codeline lineno="461"><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="463"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Parse<sp/>inline<sp/>markup;<sp/>call<sp/>the<sp/>`parse()`<sp/>method.</highlight></codeline>
<codeline lineno="464"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a46e2b0a2a14831953c1476cbdf99b41c" kindref="member">__init__</ref>(self):</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a41bb87370a78c1bbafe0da1ce19cc27d" kindref="member">implicit_dispatch</ref><sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;List<sp/>of<sp/>(pattern,<sp/>bound<sp/>method)<sp/>tuples,<sp/>used<sp/>by</highlight></codeline>
<codeline lineno="469"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>`self.implicit_inline`.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a8a473f1532c16ce2e2125988eeb91810" kindref="member">init_customizations</ref>(self,<sp/>settings):</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>lookahead<sp/>and<sp/>look-behind<sp/>expressions<sp/>for<sp/>inline<sp/>markup<sp/>rules</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>getattr(settings,<sp/></highlight><highlight class="stringliteral">&apos;character_level_inline_markup&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>start_string_prefix<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;(^|(?&lt;!\x00))&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end_string_suffix<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>start_string_prefix<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;(^|(?&lt;=\\s|[%s%s]))&apos;</highlight><highlight class="normal"><sp/>%</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(punctuation_chars.openers,</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>punctuation_chars.delimiters))</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end_string_suffix<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;($|(?=\\s|[\x00%s%s%s]))&apos;</highlight><highlight class="normal"><sp/>%</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(punctuation_chars.closing_delimiters,</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>punctuation_chars.delimiters,</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>punctuation_chars.closers))</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>args<sp/>=<sp/>locals().copy()</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>args.update(vars(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a178df0d3feac5156590786b1047ef30a" kindref="member">__class__</ref>))</highlight></codeline>
<codeline lineno="486"><highlight class="normal"></highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parts<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;initial_inline&apos;</highlight><highlight class="normal">,<sp/>start_string_prefix,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;start&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ad08b0b5ee1ad592dafb78cb380688261" kindref="member">non_whitespace_after</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a31169bb05e8488f2621f979455a56e51" kindref="member">non_whitespace_after</ref>,<sp/><sp/></highlight><highlight class="comment">#<sp/>simple<sp/>start-strings</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[</highlight><highlight class="stringliteral">r&apos;\*\*&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>strong</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&apos;\*(?!\*)&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>emphasis<sp/>but<sp/>not<sp/>strong</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&apos;``&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>literal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&apos;_`&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>inline<sp/>internal<sp/>target</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&apos;\|(?!\|)&apos;</highlight><highlight class="normal">]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>substitution<sp/>reference</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;whole&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>end_string_suffix,<sp/><sp/></highlight><highlight class="comment">#<sp/>whole<sp/>constructs</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<sp/><sp/></highlight><highlight class="comment">#<sp/>reference<sp/>name<sp/>&amp;<sp/>end-string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&apos;(?P&lt;refname&gt;%s)(?P&lt;refend&gt;__?)&apos;</highlight><highlight class="normal"><sp/>%<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6c253b44e4ec09379aebf02bea579693" kindref="member">simplename</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a5ae8e673fb6f0e6c13f06a42081cc72b" kindref="member">simplename</ref>,</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;footnotelabel&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">r&apos;\[&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">r&apos;(?P&lt;fnend&gt;\]_)&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[</highlight><highlight class="stringliteral">r&apos;[0-9]+&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>manually<sp/>numbered</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&apos;\#(%s)?&apos;</highlight><highlight class="normal"><sp/>%<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6c253b44e4ec09379aebf02bea579693" kindref="member">simplename</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a5ae8e673fb6f0e6c13f06a42081cc72b" kindref="member">simplename</ref>,<sp/><sp/></highlight><highlight class="comment">#<sp/>auto-numbered<sp/>(w/<sp/>label?)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&apos;\*&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>auto-symbol</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&apos;(?P&lt;citationlabel&gt;%s)&apos;</highlight><highlight class="normal"><sp/>%<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6c253b44e4ec09379aebf02bea579693" kindref="member">simplename</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a5ae8e673fb6f0e6c13f06a42081cc72b" kindref="member">simplename</ref>,<sp/><sp/></highlight><highlight class="comment">#<sp/>citation<sp/>ref</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>),</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;backquote&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>interpreted<sp/>text<sp/>or<sp/>phrase<sp/>reference</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;(?P&lt;role&gt;(:%s:)?)&apos;</highlight><highlight class="normal"><sp/>%<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6c253b44e4ec09379aebf02bea579693" kindref="member">simplename</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a5ae8e673fb6f0e6c13f06a42081cc72b" kindref="member">simplename</ref>,<sp/><sp/></highlight><highlight class="comment">#<sp/>optional<sp/>role</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ad08b0b5ee1ad592dafb78cb380688261" kindref="member">non_whitespace_after</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a31169bb05e8488f2621f979455a56e51" kindref="member">non_whitespace_after</ref>,</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[</highlight><highlight class="stringliteral">&apos;`(?!`)&apos;</highlight><highlight class="normal">]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>but<sp/>not<sp/>literal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1acf3749770e52adb96fc8f952d53c8f13" kindref="member">start_string_prefix</ref><sp/>=<sp/>start_string_prefix</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a74f1af9ec7bb97924ed4ea91bab35f47" kindref="member">end_string_suffix</ref><sp/>=<sp/>end_string_suffix</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1aec79f84989a6e925c04f3e5b5963e8d9" kindref="member">parts</ref><sp/>=<sp/>parts</highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref><sp/>=<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>(</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initial=<ref refid="namespacedocutils_1_1parsers_1_1rst_1_1states_1ae51f57b3dac56e245ee9be56b9dec83c" kindref="member">build_regexp</ref>(parts),</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>emphasis=re.compile(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a1b58ccf22d8bfb10e81cbfaabb89c34d" kindref="member">non_whitespace_escape_before</ref></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">r&apos;(\*)&apos;</highlight><highlight class="normal"><sp/>+<sp/>end_string_suffix),</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strong=re.compile(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a1b58ccf22d8bfb10e81cbfaabb89c34d" kindref="member">non_whitespace_escape_before</ref></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">r&apos;(\*\*)&apos;</highlight><highlight class="normal"><sp/>+<sp/>end_string_suffix),</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>interpreted_or_phrase_ref=re.compile(</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="527"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(non_unescaped_whitespace_escape_before)s</highlight></codeline>
<codeline lineno="528"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="529"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>`</highlight></codeline>
<codeline lineno="530"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;suffix&gt;</highlight></codeline>
<codeline lineno="531"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;role&gt;:%(simplename)s:)?</highlight></codeline>
<codeline lineno="532"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;refend&gt;__?)?</highlight></codeline>
<codeline lineno="533"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="534"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="535"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(end_string_suffix)s</highlight></codeline>
<codeline lineno="536"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>args,<sp/>re.VERBOSE),</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>embedded_link=re.compile(</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="539"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="540"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?:[<sp/>\n]+|^)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>spaces<sp/>or<sp/>beginning<sp/>of<sp/>line/string</highlight></codeline>
<codeline lineno="541"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>open<sp/>bracket</highlight></codeline>
<codeline lineno="542"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(non_whitespace_after)s</highlight></codeline>
<codeline lineno="543"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(([^&lt;&gt;]|\x00[&lt;&gt;])+)<sp/><sp/><sp/><sp/><sp/>#<sp/>anything<sp/>but<sp/>unescaped<sp/>angle<sp/>brackets</highlight></codeline>
<codeline lineno="544"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(non_whitespace_escape_before)s</highlight></codeline>
<codeline lineno="545"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>close<sp/>bracket</highlight></codeline>
<codeline lineno="546"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="547"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>end<sp/>of<sp/>string</highlight></codeline>
<codeline lineno="548"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>args,<sp/>re.VERBOSE),</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>literal=re.compile(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ae50f60139344750b6cd5fb63893e66f8" kindref="member">non_whitespace_before</ref><sp/>+<sp/></highlight><highlight class="stringliteral">&apos;(``)&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>end_string_suffix),</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target=re.compile(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a1b58ccf22d8bfb10e81cbfaabb89c34d" kindref="member">non_whitespace_escape_before</ref></highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">r&apos;(`)&apos;</highlight><highlight class="normal"><sp/>+<sp/>end_string_suffix),</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution_ref=re.compile(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a1b58ccf22d8bfb10e81cbfaabb89c34d" kindref="member">non_whitespace_escape_before</ref></highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">r&apos;(\|_{0,2})&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>end_string_suffix),</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>email=re.compile(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ad7ffd044e5e290722bff01b579dce5ff" kindref="member">email_pattern</ref><sp/>%<sp/>args<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;$&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>re.VERBOSE),</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uri=re.compile(</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="560"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(start_string_prefix)s</highlight></codeline>
<codeline lineno="561"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;whole&gt;</highlight></codeline>
<codeline lineno="562"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;absolute&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>absolute<sp/>URI</highlight></codeline>
<codeline lineno="563"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;scheme&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>scheme<sp/>(http,<sp/>ftp,<sp/>mailto)</highlight></codeline>
<codeline lineno="564"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[a-zA-Z][a-zA-Z0-9.+-]*</highlight></codeline>
<codeline lineno="565"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="566"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:</highlight></codeline>
<codeline lineno="567"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="568"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>either:</highlight></codeline>
<codeline lineno="569"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(//?)?<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>hierarchical<sp/>URI</highlight></codeline>
<codeline lineno="570"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(uric)s*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>URI<sp/>characters</highlight></codeline>
<codeline lineno="571"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(uri_end)s<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>final<sp/>URI<sp/>char</highlight></codeline>
<codeline lineno="572"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="573"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>optional<sp/>query</highlight></codeline>
<codeline lineno="574"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\?%(uric)s*</highlight></codeline>
<codeline lineno="575"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(uri_end)s</highlight></codeline>
<codeline lineno="576"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)?</highlight></codeline>
<codeline lineno="577"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>optional<sp/>fragment</highlight></codeline>
<codeline lineno="578"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\#%(uric)s*</highlight></codeline>
<codeline lineno="579"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(uri_end)s</highlight></codeline>
<codeline lineno="580"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)?</highlight></codeline>
<codeline lineno="581"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="582"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="583"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>*OR*</highlight></codeline>
<codeline lineno="584"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;email&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>email<sp/>address</highlight></codeline>
<codeline lineno="585"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>+<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ad7ffd044e5e290722bff01b579dce5ff" kindref="member">email_pattern</ref><sp/>+<sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="586"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="587"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="588"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(end_string_suffix)s</highlight></codeline>
<codeline lineno="589"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">)<sp/>%<sp/>args,<sp/>re.VERBOSE),</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pep=re.compile(</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="592"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(start_string_prefix)s</highlight></codeline>
<codeline lineno="593"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="594"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pep-(?P&lt;pepnum1&gt;\d+)(.txt)?)<sp/>#<sp/>reference<sp/>to<sp/>source<sp/>file</highlight></codeline>
<codeline lineno="595"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|</highlight></codeline>
<codeline lineno="596"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(PEP\s+(?P&lt;pepnum2&gt;\d+))<sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>reference<sp/>by<sp/>name</highlight></codeline>
<codeline lineno="597"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="598"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(end_string_suffix)s&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>args,<sp/>re.VERBOSE),</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rfc=re.compile(</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="601"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(start_string_prefix)s</highlight></codeline>
<codeline lineno="602"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(RFC(-|\s+)?(?P&lt;rfcnum&gt;\d+))</highlight></codeline>
<codeline lineno="603"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(end_string_suffix)s&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>args,<sp/>re.VERBOSE))</highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a41bb87370a78c1bbafe0da1ce19cc27d" kindref="member">implicit_dispatch</ref>.append((self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.uri,</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ae4e43840d2152f854d0636ba7218b046" kindref="member">standalone_uri</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ac6edbc32ba6f8299f1df91e31d1fe438" kindref="member">standalone_uri</ref>))</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>settings.pep_references:</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a41bb87370a78c1bbafe0da1ce19cc27d" kindref="member">implicit_dispatch</ref>.append((self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.pep,</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a3b2422f4983bf968ea4269c05d94e79c" kindref="member">pep_reference</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a57f2701f2577742952fb0df1db63915d" kindref="member">pep_reference</ref>))</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>settings.rfc_references:</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a41bb87370a78c1bbafe0da1ce19cc27d" kindref="member">implicit_dispatch</ref>.append((self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.rfc,</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ade4d3b38bd547b9d2fa4567df1a7996c" kindref="member">rfc_reference</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a40c2d2a90b0ab70eb61cdcf4ad9cae40" kindref="member">rfc_reference</ref>))</highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">parse(self,<sp/>text,<sp/>lineno,<sp/>memo,<sp/>parent):</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Needs<sp/>to<sp/>be<sp/>refactored<sp/>for<sp/>nested<sp/>inline<sp/>markup.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Add<sp/>nested_parse()<sp/>method?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="618"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>2<sp/>lists:<sp/>nodes<sp/>(text<sp/>and<sp/>inline<sp/>elements),<sp/>and<sp/>system_messages.</highlight></codeline>
<codeline lineno="619"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="620"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Using<sp/>`self.patterns.initial`,<sp/>a<sp/>pattern<sp/>which<sp/>matches<sp/>start-strings</highlight></codeline>
<codeline lineno="621"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(emphasis,<sp/>strong,<sp/>interpreted,<sp/>phrase<sp/>reference,<sp/>literal,</highlight></codeline>
<codeline lineno="622"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution<sp/>reference,<sp/>and<sp/>inline<sp/>target)<sp/>and<sp/>complete<sp/>constructs</highlight></codeline>
<codeline lineno="623"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(simple<sp/>reference,<sp/>footnote<sp/>reference),<sp/>search<sp/>for<sp/>a<sp/>candidate.<sp/><sp/>When</highlight></codeline>
<codeline lineno="624"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>one<sp/>is<sp/>found,<sp/>check<sp/>for<sp/>validity<sp/>(e.g.,<sp/>not<sp/>a<sp/>quoted<sp/>&apos;*&apos;<sp/>character).</highlight></codeline>
<codeline lineno="625"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>If<sp/>valid,<sp/>search<sp/>for<sp/>the<sp/>corresponding<sp/>end<sp/>string<sp/>if<sp/>applicable,<sp/>and</highlight></codeline>
<codeline lineno="626"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check<sp/>it<sp/>for<sp/>validity.<sp/><sp/>If<sp/>not<sp/>found<sp/>or<sp/>invalid,<sp/>generate<sp/>a<sp/>warning</highlight></codeline>
<codeline lineno="627"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>ignore<sp/>the<sp/>start-string.<sp/><sp/>Implicit<sp/>inline<sp/>markup<sp/>(e.g.<sp/>standalone</highlight></codeline>
<codeline lineno="628"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>URIs)<sp/>is<sp/>found<sp/>last.</highlight></codeline>
<codeline lineno="629"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="630"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:text:<sp/>source<sp/>string</highlight></codeline>
<codeline lineno="631"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:lineno:<sp/>absolute<sp/>line<sp/>number<sp/>(cf.<sp/>statemachine.get_source_and_line())</highlight></codeline>
<codeline lineno="632"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a471133eb61a70427d04cbec4d6f5d5e9" kindref="member">reporter</ref><sp/>=<sp/>memo.reporter</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref><sp/>=<sp/>memo.document</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7141e30f49587d0a7adadfbf7af8a946" kindref="member">language</ref><sp/>=<sp/>memo.language</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ad8e488e29819a4760033c097999d2a1f" kindref="member">parent</ref><sp/>=<sp/>parent</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern_search<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.initial.search</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dispatch<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a0e62036635f13716afd41fd3acb0a937" kindref="member">dispatch</ref></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>remaining<sp/>=<sp/>escape2null(text)</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processed<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unprocessed<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>remaining:</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>pattern_search(remaining)</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match:</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>groups<sp/>=<sp/>match.groupdict()</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>method<sp/>=<sp/>dispatch[groups[</highlight><highlight class="stringliteral">&apos;start&apos;</highlight><highlight class="normal">]<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>groups[</highlight><highlight class="stringliteral">&apos;backquote&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>groups[</highlight><highlight class="stringliteral">&apos;refend&apos;</highlight><highlight class="normal">]<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>groups[</highlight><highlight class="stringliteral">&apos;fnend&apos;</highlight><highlight class="normal">]]</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages<sp/>=<sp/>method(self,<sp/>match,</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno)</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unprocessed.append(before)</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages<sp/>+=<sp/>sysmessages</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>inlines:</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processed<sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6d379aae508d73534d5d0c5afe672fc7" kindref="member">implicit_inline</ref>(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.join(unprocessed),</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno)</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processed<sp/>+=<sp/>inlines</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unprocessed<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>remaining<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.join(unprocessed)<sp/>+<sp/>remaining</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>remaining:</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>processed<sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6d379aae508d73534d5d0c5afe672fc7" kindref="member">implicit_inline</ref>(remaining,<sp/>lineno)</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>processed,<sp/>messages</highlight></codeline>
<codeline lineno="664"><highlight class="normal"></highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Inline<sp/>object<sp/>recognition</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>-------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>See<sp/>also<sp/>init_customizations().</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/>non_whitespace_before<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(?&lt;!\s)&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/>non_whitespace_escape_before<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(?&lt;![\s\x00])&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/>non_unescaped_whitespace_escape_before<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(?&lt;!(?&lt;!\x00)[\s\x00])&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/>non_whitespace_after<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(?!\s)&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Alphanumerics<sp/>with<sp/>isolated<sp/>internal<sp/>[-._+:]<sp/>chars<sp/>(i.e.<sp/>not<sp/>2<sp/>together):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/>simplename<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(?:(?!_)\w)+(?:[-._+:](?:(?!_)\w)+)*&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Valid<sp/>URI<sp/>characters<sp/>(see<sp/>RFC<sp/>2396<sp/>&amp;<sp/>RFC<sp/>2732);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>final<sp/>\x00<sp/>allows<sp/>backslash<sp/>escapes<sp/>in<sp/>URIs:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/>uric<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;[-_.!~*&apos;()[\];/:@&amp;=+$,%a-zA-Z0-9\x00]&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Delimiter<sp/>indicating<sp/>the<sp/>end<sp/>of<sp/>a<sp/>URI<sp/>(not<sp/>part<sp/>of<sp/>the<sp/>URI):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/>uri_end_delim<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;[&gt;]&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Last<sp/>URI<sp/>character;<sp/>same<sp/>as<sp/>uric<sp/>but<sp/>no<sp/>punctuation:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/>urilast<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;[_~*/=+a-zA-Z0-9]&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>End<sp/>of<sp/>a<sp/>URI<sp/>(either<sp/>&apos;urilast&apos;<sp/>or<sp/>&apos;uric<sp/>followed<sp/>by<sp/>a</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>uri_end_delim&apos;):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/>uri_end<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;(?:%(urilast)s|%(uric)s(?=%(uri_end_delim)s))&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>locals()</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/>emailc<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;[-_!~*&apos;{|}/#?^`&amp;=+$%a-zA-Z0-9\x00]&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/>email_pattern<sp/>=<sp/></highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="686"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(emailc)s+(?:\.%(emailc)s+)*<sp/><sp/><sp/>#<sp/>name</highlight></codeline>
<codeline lineno="687"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?&lt;!\x00)@<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>at</highlight></codeline>
<codeline lineno="688"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(emailc)s+(?:\.%(emailc)s*)*<sp/><sp/><sp/>#<sp/>host</highlight></codeline>
<codeline lineno="689"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(uri_end)s<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>final<sp/>URI<sp/>char</highlight></codeline>
<codeline lineno="690"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"></highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1acddcfe019f51e747e3fa38702ab4e573" kindref="member">quoted_start</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Test<sp/>if<sp/>inline<sp/>markup<sp/>start-string<sp/>is<sp/>&apos;quoted&apos;.</highlight></codeline>
<codeline lineno="694"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="695"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&apos;Quoted&apos;<sp/>in<sp/>this<sp/>context<sp/>means<sp/>the<sp/>start-string<sp/>is<sp/>enclosed<sp/>in<sp/>a<sp/>pair</highlight></codeline>
<codeline lineno="696"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>of<sp/>matching<sp/>opening/closing<sp/>delimiters<sp/>(not<sp/>necessarily<sp/>quotes)</highlight></codeline>
<codeline lineno="697"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>or<sp/>at<sp/>the<sp/>end<sp/>of<sp/>the<sp/>match.</highlight></codeline>
<codeline lineno="698"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>=<sp/>match.string</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>start<sp/>=<sp/>match.start()</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>start<sp/>==<sp/>0:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>start-string<sp/>at<sp/>beginning<sp/>of<sp/>text</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prestart<sp/>=<sp/>string[start<sp/>-<sp/>1]</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>poststart<sp/>=<sp/>string[match.end()]</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>IndexError:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>start-string<sp/>at<sp/>end<sp/>of<sp/>text</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>not<sp/>&quot;quoted&quot;<sp/>but<sp/>no<sp/>markup<sp/>start-string<sp/>either</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>punctuation_chars.match_chars(prestart,<sp/>poststart)</highlight></codeline>
<codeline lineno="709"><highlight class="normal"></highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a00b02b4e49d51e1931e4c043f248aa3c" kindref="member">inline_obj</ref>(self,<sp/>match,<sp/>lineno,<sp/>end_pattern,<sp/>nodeclass,</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>restore_backslashes=False):</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>=<sp/>match.string</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matchstart<sp/>=<sp/>match.start(</highlight><highlight class="stringliteral">&apos;start&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matchend<sp/>=<sp/>match.end(</highlight><highlight class="stringliteral">&apos;start&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1acddcfe019f51e747e3fa38702ab4e573" kindref="member">quoted_start</ref>(match):</highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>string[:matchend],<sp/>[],<sp/>string[matchend:],<sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>endmatch<sp/>=<sp/>end_pattern.search(string[matchend:])</highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>endmatch<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>endmatch.start(1):<sp/><sp/></highlight><highlight class="comment">#<sp/>1<sp/>or<sp/>more<sp/>chars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>endmatch.string[:endmatch.start(1)]</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>restore_backslashes:</highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>unescape(text,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>textend<sp/>=<sp/>matchend<sp/>+<sp/>endmatch.end(1)</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rawsource<sp/>=<sp/>unescape(string[matchstart:textend],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>=<sp/>nodeclass(rawsource,<sp/>text)</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(string[:matchstart],<sp/>[node],</highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string[textend:],<sp/>[],<sp/>endmatch.group(1))</highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a471133eb61a70427d04cbec4d6f5d5e9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Inline<sp/>%s<sp/>start-string<sp/>without<sp/>end-string.&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>nodeclass.__name__,<sp/>line=lineno)</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>unescape(string[matchstart:matchend],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prb<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7ac6218f765a3e294e81fe75d16751dc" kindref="member">problematic</ref>(text,<sp/>text,<sp/>msg)</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>string[:matchstart],<sp/>[prb],<sp/>string[matchend:],<sp/>[msg],<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="733"><highlight class="normal"></highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7ac6218f765a3e294e81fe75d16751dc" kindref="member">problematic</ref>(self,<sp/>text,<sp/>rawsource,<sp/>message):</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msgid<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.set_id(message,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ad8e488e29819a4760033c097999d2a1f" kindref="member">parent</ref>)</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>problematic<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1problematic" kindref="compound">nodes.problematic</ref>(rawsource,<sp/>text,<sp/>refid=msgid)</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prbid<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.set_id(problematic)</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message.add_backref(prbid)</highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>problematic</highlight></codeline>
<codeline lineno="740"><highlight class="normal"></highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a3949f503ba2f770ba27cc5caf39e099e" kindref="member">emphasis</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages,<sp/>endstring<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a00b02b4e49d51e1931e4c043f248aa3c" kindref="member">inline_obj</ref>(</highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match,<sp/>lineno,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.emphasis,<sp/><ref refid="classdocutils_1_1nodes_1_1emphasis" kindref="compound">nodes.emphasis</ref>)</highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages</highlight></codeline>
<codeline lineno="745"><highlight class="normal"></highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a38c59d395bf4dcf4a1d2922873f73ebc" kindref="member">strong</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages,<sp/>endstring<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a00b02b4e49d51e1931e4c043f248aa3c" kindref="member">inline_obj</ref>(</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match,<sp/>lineno,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.strong,<sp/><ref refid="classdocutils_1_1nodes_1_1strong" kindref="compound">nodes.strong</ref>)</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages</highlight></codeline>
<codeline lineno="750"><highlight class="normal"></highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a3a976857a8da0c3b73f5ace3adceeb69" kindref="member">interpreted_or_phrase_ref</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end_pattern<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.interpreted_or_phrase_ref</highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>=<sp/>match.string</highlight></codeline>
<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matchstart<sp/>=<sp/>match.start(</highlight><highlight class="stringliteral">&apos;backquote&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matchend<sp/>=<sp/>match.end(</highlight><highlight class="stringliteral">&apos;backquote&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rolestart<sp/>=<sp/>match.start(</highlight><highlight class="stringliteral">&apos;role&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>role<sp/>=<sp/>match.group(</highlight><highlight class="stringliteral">&apos;role&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>role:</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>role<sp/>=<sp/>role[1:-1]</highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;prefix&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1acddcfe019f51e747e3fa38702ab4e573" kindref="member">quoted_start</ref>(match):</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>string[:matchend],<sp/>[],<sp/>string[matchend:],<sp/>[]</highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>endmatch<sp/>=<sp/>end_pattern.search(string[matchend:])</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>endmatch<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>endmatch.start(1):<sp/><sp/></highlight><highlight class="comment">#<sp/>1<sp/>or<sp/>more<sp/>chars</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>textend<sp/>=<sp/>matchend<sp/>+<sp/>endmatch.end()</highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>endmatch.group(</highlight><highlight class="stringliteral">&apos;role&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>role:</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a471133eb61a70427d04cbec4d6f5d5e9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Multiple<sp/>roles<sp/>in<sp/>interpreted<sp/>text<sp/>(both<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;prefix<sp/>and<sp/>suffix<sp/>present;<sp/>only<sp/>one<sp/>allowed).&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>unescape(string[rolestart:textend],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prb<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7ac6218f765a3e294e81fe75d16751dc" kindref="member">problematic</ref>(text,<sp/>text,<sp/>msg)</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>string[:rolestart],<sp/>[prb],<sp/>string[textend:],<sp/>[msg]</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>role<sp/>=<sp/>endmatch.group(</highlight><highlight class="stringliteral">&apos;suffix&apos;</highlight><highlight class="normal">)[1:-1]</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;suffix&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>escaped<sp/>=<sp/>endmatch.string[:endmatch.start(1)]</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rawsource<sp/>=<sp/>unescape(string[matchstart:textend],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>rawsource[-1:]<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>role:</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a471133eb61a70427d04cbec4d6f5d5e9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Mismatch:<sp/>both<sp/>interpreted<sp/>text<sp/>role<sp/>%s<sp/>and<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;reference<sp/>suffix.&apos;</highlight><highlight class="normal"><sp/>%<sp/>position,<sp/>line=lineno)</highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>unescape(string[rolestart:textend],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prb<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7ac6218f765a3e294e81fe75d16751dc" kindref="member">problematic</ref>(text,<sp/>text,<sp/>msg)</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>string[:rolestart],<sp/>[prb],<sp/>string[textend:],<sp/>[msg]</highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a2eade5fb47589d5c63bee49a9ceb484a" kindref="member">phrase_ref</ref>(string[:matchstart],<sp/>string[textend:],</highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rawsource,<sp/>escaped)</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rawsource<sp/>=<sp/>unescape(string[rolestart:textend],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist,<sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a0854bc2c6257a2b4467d1584155a3bce" kindref="member">interpreted</ref>(rawsource,<sp/>escaped,<sp/>role,</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno)</highlight></codeline>
<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(string[:rolestart],<sp/>nodelist,</highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string[textend:],<sp/>messages)</highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a471133eb61a70427d04cbec4d6f5d5e9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Inline<sp/>interpreted<sp/>text<sp/>or<sp/>phrase<sp/>reference<sp/>start-string<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;without<sp/>end-string.&apos;</highlight><highlight class="normal">,<sp/>line=lineno)</highlight></codeline>
<codeline lineno="799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>unescape(string[matchstart:matchend],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prb<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7ac6218f765a3e294e81fe75d16751dc" kindref="member">problematic</ref>(text,<sp/>text,<sp/>msg)</highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>string[:matchstart],<sp/>[prb],<sp/>string[matchend:],<sp/>[msg]</highlight></codeline>
<codeline lineno="802"><highlight class="normal"></highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a2eade5fb47589d5c63bee49a9ceb484a" kindref="member">phrase_ref</ref>(self,<sp/>before,<sp/>after,<sp/>rawsource,<sp/>escaped,<sp/>text=None):</highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>`text`<sp/>is<sp/>ignored<sp/>(since<sp/>0.16)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.embedded_link.search(escaped)</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match:<sp/><sp/></highlight><highlight class="comment">#<sp/>embedded<sp/>&lt;URI&gt;<sp/>or<sp/>&lt;alias_&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>escaped[:match.start(0)]</highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unescaped<sp/>=<sp/>unescape(text)</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rawtext<sp/>=<sp/>unescape(text,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>aliastext<sp/>=<sp/>match.group(2)</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rawaliastext<sp/>=<sp/>unescape(aliastext,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>underscore_escaped<sp/>=<sp/>rawaliastext.endswith(</highlight><highlight class="stringliteral">r&apos;\_&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(aliastext.endswith(</highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>(underscore_escaped</highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.uri.match(aliastext))):</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>aliastype<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alias<sp/>=<sp/>normalize_name(unescape(aliastext[:-1]))</highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1target" kindref="compound">nodes.target</ref>(match.group(1),<sp/>refname=alias)</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target.indirect_reference_name<sp/>=<sp/>whitespace_normalize_name(</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unescape(aliastext[:-1]))</highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>aliastype<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;uri&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>remove<sp/>unescaped<sp/>whitespace</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alias_parts<sp/>=<sp/>split_escaped_whitespace(match.group(2))</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alias<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.join(part.split())</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>part<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>alias_parts)</highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alias<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a95d547e830b64ff7e001d881e21216c5" kindref="member">adjust_uri</ref>(unescape(alias))</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>alias.endswith(</highlight><highlight class="stringliteral">r&apos;\_&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alias<sp/>=<sp/>alias[:-2]<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1target" kindref="compound">nodes.target</ref>(match.group(1),<sp/>refuri=alias)</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target.referenced<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>aliastext:</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1ApplicationError" kindref="compound">ApplicationError</ref>(</highlight><highlight class="stringliteral">&apos;problem<sp/>with<sp/>embedded<sp/>link:<sp/>%r&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>aliastext)</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>text:</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>alias</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unescaped<sp/>=<sp/>unescape(text)</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rawtext<sp/>=<sp/>rawaliastext</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>escaped</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unescaped<sp/>=<sp/>unescape(text)</highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rawtext<sp/>=<sp/>unescape(escaped,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="844"><highlight class="normal"></highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refname<sp/>=<sp/>normalize_name(unescaped)</highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1reference" kindref="compound">nodes.reference</ref>(rawsource,<sp/>text,</highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name=whitespace_normalize_name(unescaped))</highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference[0].rawsource<sp/>=<sp/>rawtext</highlight></codeline>
<codeline lineno="849"><highlight class="normal"></highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_list<sp/>=<sp/>[reference]</highlight></codeline>
<codeline lineno="851"><highlight class="normal"></highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>rawsource[-2:]<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;__&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>target<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>(aliastype<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference[</highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">]<sp/>=<sp/>alias</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_refname(reference)</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>self.document.note_indirect_target(target)<sp/>#<sp/>required?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>target<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>(aliastype<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;uri&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference[</highlight><highlight class="stringliteral">&apos;refuri&apos;</highlight><highlight class="normal">]<sp/>=<sp/>alias</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference[</highlight><highlight class="stringliteral">&apos;anonymous&apos;</highlight><highlight class="normal">]<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>target:</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">].append(refname)</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>aliastype<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference[</highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">]<sp/>=<sp/>alias</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_indirect_target(target)</highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_refname(reference)</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference[</highlight><highlight class="stringliteral">&apos;refuri&apos;</highlight><highlight class="normal">]<sp/>=<sp/>alias</highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_explicit_target(target,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ad8e488e29819a4760033c097999d2a1f" kindref="member">parent</ref>)</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>target.note_referenced_by(name=refname)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_list.append(target)</highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference[</highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">]<sp/>=<sp/>refname</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_refname(reference)</highlight></codeline>
<codeline lineno="876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>before,<sp/>node_list,<sp/>after,<sp/>[]</highlight></codeline>
<codeline lineno="877"><highlight class="normal"></highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a95d547e830b64ff7e001d881e21216c5" kindref="member">adjust_uri</ref>(self,<sp/>uri):</highlight></codeline>
<codeline lineno="879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.email.match(uri)</highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match:</highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;mailto:&apos;</highlight><highlight class="normal"><sp/>+<sp/>uri</highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>uri</highlight></codeline>
<codeline lineno="884"><highlight class="normal"></highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a0854bc2c6257a2b4467d1584155a3bce" kindref="member">interpreted</ref>(self,<sp/>rawsource,<sp/>text,<sp/>role,<sp/>lineno):</highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>role_fn,<sp/>messages<sp/>=<sp/>roles.role(role,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7141e30f49587d0a7adadfbf7af8a946" kindref="member">language</ref>,<sp/>lineno,</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a471133eb61a70427d04cbec4d6f5d5e9" kindref="member">reporter</ref>)</highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>role_fn:</highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodes,<sp/>messages2<sp/>=<sp/>role_fn(role,<sp/>rawsource,<sp/>text,<sp/>lineno,<sp/>self)</highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nodes,<sp/>messages<sp/>+<sp/>messages2</highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a471133eb61a70427d04cbec4d6f5d5e9" kindref="member">reporter</ref>.error(</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Unknown<sp/>interpreted<sp/>text<sp/>role<sp/>&quot;%s&quot;.&apos;</highlight><highlight class="normal"><sp/>%<sp/>role,</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>([self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7ac6218f765a3e294e81fe75d16751dc" kindref="member">problematic</ref>(rawsource,<sp/>rawsource,<sp/>msg)],</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages<sp/>+<sp/>[msg])</highlight></codeline>
<codeline lineno="897"><highlight class="normal"></highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a35a8288ac26eb8221040f9b242351691" kindref="member">literal</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages,<sp/>endstring<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a00b02b4e49d51e1931e4c043f248aa3c" kindref="member">inline_obj</ref>(</highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match,<sp/>lineno,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.literal,<sp/><ref refid="classdocutils_1_1nodes_1_1literal" kindref="compound">nodes.literal</ref>,</highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>restore_backslashes=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages</highlight></codeline>
<codeline lineno="903"><highlight class="normal"></highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a9646e6b4f4355ae28cd442befeff769c" kindref="member">inline_internal_target</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages,<sp/>endstring<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a00b02b4e49d51e1931e4c043f248aa3c" kindref="member">inline_obj</ref>(</highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match,<sp/>lineno,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.target,<sp/><ref refid="classdocutils_1_1nodes_1_1target" kindref="compound">nodes.target</ref>)</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>inlines<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>isinstance(inlines[0],<sp/><ref refid="classdocutils_1_1nodes_1_1target" kindref="compound">nodes.target</ref>):</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>len(inlines)<sp/>==<sp/>1</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/>inlines[0]</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>normalize_name(target.astext())</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">].append(name)</highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_explicit_target(target,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ad8e488e29819a4760033c097999d2a1f" kindref="member">parent</ref>)</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages</highlight></codeline>
<codeline lineno="914"><highlight class="normal"></highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a7eacde4e4ecc5ee57636657eca3e548b" kindref="member">substitution_reference</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="916"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages,<sp/>endstring<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a00b02b4e49d51e1931e4c043f248aa3c" kindref="member">inline_obj</ref>(</highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match,<sp/>lineno,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1afd7bfb226cca57ecd768d6abb0cac694" kindref="member">patterns</ref>.substitution_ref,</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1substitution__reference" kindref="compound">nodes.substitution_reference</ref>)</highlight></codeline>
<codeline lineno="919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(inlines)<sp/>==<sp/>1:</highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subref_node<sp/>=<sp/>inlines[0]</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(subref_node,<sp/><ref refid="classdocutils_1_1nodes_1_1substitution__reference" kindref="compound">nodes.substitution_reference</ref>):</highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subref_text<sp/>=<sp/>subref_node.astext()</highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_substitution_ref(subref_node,<sp/>subref_text)</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>endstring[-1:]<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference_node<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1reference" kindref="compound">nodes.reference</ref>(</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;|%s%s&apos;</highlight><highlight class="normal"><sp/>%<sp/>(subref_text,<sp/>endstring),<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>endstring[-2:]<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;__&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference_node[</highlight><highlight class="stringliteral">&apos;anonymous&apos;</highlight><highlight class="normal">]<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference_node[</highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">]<sp/>=<sp/>normalize_name(subref_text)</highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_refname(reference_node)</highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference_node<sp/>+=<sp/>subref_node</highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inlines<sp/>=<sp/>[reference_node]</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>before,<sp/>inlines,<sp/>remaining,<sp/>sysmessages</highlight></codeline>
<codeline lineno="935"><highlight class="normal"></highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a511f8b03417387b71be785d7a56d596d" kindref="member">footnote_reference</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="938"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Handles<sp/>`nodes.footnote_reference`<sp/>and<sp/>`nodes.citation_reference`</highlight></codeline>
<codeline lineno="939"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>elements.</highlight></codeline>
<codeline lineno="940"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>label<sp/>=<sp/>match.group(</highlight><highlight class="stringliteral">&apos;footnotelabel&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refname<sp/>=<sp/>normalize_name(label)</highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>=<sp/>match.string</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before<sp/>=<sp/>string[:match.start(</highlight><highlight class="stringliteral">&apos;whole&apos;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>remaining<sp/>=<sp/>string[match.end(</highlight><highlight class="stringliteral">&apos;whole&apos;</highlight><highlight class="normal">):]</highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match.group(</highlight><highlight class="stringliteral">&apos;citationlabel&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refnode<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1citation__reference" kindref="compound">nodes.citation_reference</ref>(</highlight><highlight class="stringliteral">&apos;[%s]_&apos;</highlight><highlight class="normal"><sp/>%<sp/>label,</highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refname=refname)</highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refnode<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1Text" kindref="compound">nodes.Text</ref>(label)</highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_citation_ref(refnode)</highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refnode<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1footnote__reference" kindref="compound">nodes.footnote_reference</ref>(</highlight><highlight class="stringliteral">&apos;[%s]_&apos;</highlight><highlight class="normal"><sp/>%<sp/>label)</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>refname[0]<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refname<sp/>=<sp/>refname[1:]</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refnode[</highlight><highlight class="stringliteral">&apos;auto&apos;</highlight><highlight class="normal">]<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_autofootnote_ref(refnode)</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>refname<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;*&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refname<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refnode[</highlight><highlight class="stringliteral">&apos;auto&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;*&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_symbol_footnote_ref(</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refnode)</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refnode<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1Text" kindref="compound">nodes.Text</ref>(label)</highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>refname:</highlight></codeline>
<codeline lineno="965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refnode[</highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">]<sp/>=<sp/>refname</highlight></codeline>
<codeline lineno="966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_footnote_ref(refnode)</highlight></codeline>
<codeline lineno="967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>utils.get_trim_footnote_ref_space(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.settings):</highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>before<sp/>=<sp/>before.rstrip()</highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>before,<sp/>[refnode],<sp/>remaining,<sp/>[]</highlight></codeline>
<codeline lineno="970"><highlight class="normal"></highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a44fb9876a317ff42af10aa775e1c3f15" kindref="member">reference</ref>(self,<sp/>match,<sp/>lineno,<sp/>anonymous=False):</highlight></codeline>
<codeline lineno="972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>referencename<sp/>=<sp/>match.group(</highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refname<sp/>=<sp/>normalize_name(referencename)</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>referencenode<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1reference" kindref="compound">nodes.reference</ref>(</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>referencename<sp/>+<sp/>match.group(</highlight><highlight class="stringliteral">&apos;refend&apos;</highlight><highlight class="normal">),<sp/>referencename,</highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name=whitespace_normalize_name(referencename))</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>referencenode[0].rawsource<sp/>=<sp/>referencename</highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>anonymous:</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>referencenode[</highlight><highlight class="stringliteral">&apos;anonymous&apos;</highlight><highlight class="normal">]<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>referencenode[</highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">]<sp/>=<sp/>refname</highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.note_refname(referencenode)</highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>string<sp/>=<sp/>match.string</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matchstart<sp/>=<sp/>match.start(</highlight><highlight class="stringliteral">&apos;whole&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matchend<sp/>=<sp/>match.end(</highlight><highlight class="stringliteral">&apos;whole&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>string[:matchstart],<sp/>[referencenode],<sp/>string[matchend:],<sp/>[]</highlight></codeline>
<codeline lineno="987"><highlight class="normal"></highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a37b155866e89a8c3bb59130c005ffc39" kindref="member">anonymous_reference</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a44fb9876a317ff42af10aa775e1c3f15" kindref="member">reference</ref>(match,<sp/>lineno,<sp/>anonymous=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="990"><highlight class="normal"></highlight></codeline>
<codeline lineno="991"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ae4e43840d2152f854d0636ba7218b046" kindref="member">standalone_uri</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>match.group(</highlight><highlight class="stringliteral">&apos;scheme&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>match.group(</highlight><highlight class="stringliteral">&apos;scheme&apos;</highlight><highlight class="normal">).lower()<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>urischemes.schemes):</highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match.group(</highlight><highlight class="stringliteral">&apos;email&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>addscheme<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;mailto:&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>addscheme<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>match.group(</highlight><highlight class="stringliteral">&apos;whole&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refuri<sp/>=<sp/>addscheme<sp/>+<sp/>unescape(text)</highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1reference" kindref="compound">nodes.reference</ref>(unescape(text,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">),<sp/>text,</highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refuri=refuri)</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[reference]</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>not<sp/>a<sp/>valid<sp/>scheme</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>MarkupMismatch</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"></highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a3b2422f4983bf968ea4269c05d94e79c" kindref="member">pep_reference</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>match.group(0)</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>text.startswith(</highlight><highlight class="stringliteral">&apos;pep-&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pepnum<sp/>=<sp/>int(unescape(match.group(</highlight><highlight class="stringliteral">&apos;pepnum1&apos;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>text.startswith(</highlight><highlight class="stringliteral">&apos;PEP&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pepnum<sp/>=<sp/>int(unescape(match.group(</highlight><highlight class="stringliteral">&apos;pepnum2&apos;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="1012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>MarkupMismatch</highlight></codeline>
<codeline lineno="1014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ref<sp/>=<sp/>(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.settings.pep_base_url</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.settings.pep_file_url_template<sp/>%<sp/>pepnum)</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[<ref refid="classdocutils_1_1nodes_1_1reference" kindref="compound">nodes.reference</ref>(unescape(text,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">),<sp/>text,<sp/>refuri=ref)]</highlight></codeline>
<codeline lineno="1017"><highlight class="normal"></highlight></codeline>
<codeline lineno="1018"><highlight class="normal"><sp/><sp/><sp/><sp/>rfc_url<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;rfc%d.html&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1019"><highlight class="normal"></highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ade4d3b38bd547b9d2fa4567df1a7996c" kindref="member">rfc_reference</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>match.group(0)</highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>text.startswith(</highlight><highlight class="stringliteral">&apos;RFC&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rfcnum<sp/>=<sp/>int(unescape(match.group(</highlight><highlight class="stringliteral">&apos;rfcnum&apos;</highlight><highlight class="normal">)))</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ref<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1ab1eeaf66732e64f3713ecc4842157859" kindref="member">document</ref>.settings.rfc_base_url<sp/>+<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1acfcde30650f8df59fdf1dbf990f487c6" kindref="member">rfc_url</ref><sp/>%<sp/>rfcnum</highlight></codeline>
<codeline lineno="1025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>MarkupMismatch</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[<ref refid="classdocutils_1_1nodes_1_1reference" kindref="compound">nodes.reference</ref>(unescape(text,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">),<sp/>text,<sp/>refuri=ref)]</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"></highlight></codeline>
<codeline lineno="1029"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6d379aae508d73534d5d0c5afe672fc7" kindref="member">implicit_inline</ref>(self,<sp/>text,<sp/>lineno):</highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1031"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Check<sp/>each<sp/>of<sp/>the<sp/>patterns<sp/>in<sp/>`self.implicit_dispatch`<sp/>for<sp/>a<sp/>match,</highlight></codeline>
<codeline lineno="1032"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>dispatch<sp/>to<sp/>the<sp/>stored<sp/>method<sp/>for<sp/>the<sp/>pattern.<sp/><sp/>Recursively<sp/>check</highlight></codeline>
<codeline lineno="1033"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>text<sp/>before<sp/>and<sp/>after<sp/>the<sp/>match.<sp/><sp/>Return<sp/>a<sp/>list<sp/>of<sp/>`nodes.Text`</highlight></codeline>
<codeline lineno="1034"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>and<sp/>inline<sp/>element<sp/>nodes.</highlight></codeline>
<codeline lineno="1035"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>text:</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[]</highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>pattern,<sp/>method<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a41bb87370a78c1bbafe0da1ce19cc27d" kindref="member">implicit_dispatch</ref>:</highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>pattern.search(text)</highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match:</highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Must<sp/>recurse<sp/>on<sp/>strings<sp/>before<sp/>*and*<sp/>after<sp/>the<sp/>match;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>there<sp/>may<sp/>be<sp/>multiple<sp/>patterns.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6d379aae508d73534d5d0c5afe672fc7" kindref="member">implicit_inline</ref>(text[:match.start()],<sp/>lineno)</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>method(match,<sp/>lineno)</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Inliner_1a6d379aae508d73534d5d0c5afe672fc7" kindref="member">implicit_inline</ref>(text[match.end():],<sp/>lineno))</highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>MarkupMismatch:</highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[<ref refid="classdocutils_1_1nodes_1_1Text" kindref="compound">nodes.Text</ref>(text)]</highlight></codeline>
<codeline lineno="1050"><highlight class="normal"></highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/>dispatch<sp/>=<sp/>{</highlight><highlight class="stringliteral">&apos;*&apos;</highlight><highlight class="normal">:<sp/>emphasis,</highlight></codeline>
<codeline lineno="1052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;**&apos;</highlight><highlight class="normal">:<sp/>strong,</highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;`&apos;</highlight><highlight class="normal">:<sp/>interpreted_or_phrase_ref,</highlight></codeline>
<codeline lineno="1054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;``&apos;</highlight><highlight class="normal">:<sp/>literal,</highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;_`&apos;</highlight><highlight class="normal">:<sp/>inline_internal_target,</highlight></codeline>
<codeline lineno="1056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;]_&apos;</highlight><highlight class="normal">:<sp/>footnote_reference,</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;|&apos;</highlight><highlight class="normal">:<sp/>substitution_reference,</highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal">:<sp/>reference,</highlight></codeline>
<codeline lineno="1059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;__&apos;</highlight><highlight class="normal">:<sp/>anonymous_reference}</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"></highlight></codeline>
<codeline lineno="1061"><highlight class="normal"></highlight></codeline>
<codeline lineno="1062"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacedocutils_1_1parsers_1_1rst_1_1states_1aa8f4dd4030a06396480340dfe7375e10" kindref="member">_loweralpha_to_int</ref>(s,<sp/>_zero=(ord(</highlight><highlight class="stringliteral">&apos;a&apos;</highlight><highlight class="normal">)-1)):</highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ord(s)<sp/>-<sp/>_zero</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"></highlight></codeline>
<codeline lineno="1065"><highlight class="normal"></highlight></codeline>
<codeline lineno="1066"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacedocutils_1_1parsers_1_1rst_1_1states_1a65b2a13e0ab5cd6dfff8f31b2136cb9a" kindref="member">_upperalpha_to_int</ref>(s,<sp/>_zero=(ord(</highlight><highlight class="stringliteral">&apos;A&apos;</highlight><highlight class="normal">)-1)):</highlight></codeline>
<codeline lineno="1067"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ord(s)<sp/>-<sp/>_zero</highlight></codeline>
<codeline lineno="1068"><highlight class="normal"></highlight></codeline>
<codeline lineno="1069"><highlight class="normal"></highlight></codeline>
<codeline lineno="1070"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacedocutils_1_1parsers_1_1rst_1_1states_1a088cac919a3a33d9d8016086aa1b0c2b" kindref="member">_lowerroman_to_int</ref>(s):</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>roman.fromRoman(s.upper())</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"></highlight></codeline>
<codeline lineno="1073"><highlight class="normal"></highlight></codeline>
<codeline lineno="1074" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body" kindref="compound">Body</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState" kindref="compound">RSTState</ref>):</highlight></codeline>
<codeline lineno="1075"><highlight class="normal"></highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1077"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Generic<sp/>classifier<sp/>of<sp/>the<sp/>first<sp/>line<sp/>of<sp/>a<sp/>block.</highlight></codeline>
<codeline lineno="1078"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1079"><highlight class="normal"></highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/>double_width_pad_char<sp/>=<sp/>tableparser.TableParser.double_width_pad_char</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Padding<sp/>character<sp/>for<sp/>East<sp/>Asian<sp/>double-width<sp/>text.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1082"><highlight class="normal"></highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/>enum<sp/>=<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>()</highlight></codeline>
<codeline lineno="1084"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Enumerated<sp/>list<sp/>parsing<sp/>information.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1085"><highlight class="normal"></highlight></codeline>
<codeline lineno="1086"><highlight class="normal"><sp/><sp/><sp/><sp/>enum.formatinfo<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;parens&apos;</highlight><highlight class="normal">:<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>(prefix=</highlight><highlight class="stringliteral">&apos;(&apos;</highlight><highlight class="normal">,<sp/>suffix=</highlight><highlight class="stringliteral">&apos;)&apos;</highlight><highlight class="normal">,<sp/>start=1,<sp/>end=-1),</highlight></codeline>
<codeline lineno="1088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;rparen&apos;</highlight><highlight class="normal">:<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>(prefix=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>suffix=</highlight><highlight class="stringliteral">&apos;)&apos;</highlight><highlight class="normal">,<sp/>start=0,<sp/>end=-1),</highlight></codeline>
<codeline lineno="1089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;period&apos;</highlight><highlight class="normal">:<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>(prefix=</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>suffix=</highlight><highlight class="stringliteral">&apos;.&apos;</highlight><highlight class="normal">,<sp/>start=0,<sp/>end=-1)}</highlight></codeline>
<codeline lineno="1090"><highlight class="normal"><sp/><sp/><sp/><sp/>enum.formats<sp/>=<sp/>enum.formatinfo.keys()</highlight></codeline>
<codeline lineno="1091"><highlight class="normal"><sp/><sp/><sp/><sp/>enum.sequences<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;arabic&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;loweralpha&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;upperalpha&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;lowerroman&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;upperroman&apos;</highlight><highlight class="normal">]<sp/><sp/></highlight><highlight class="comment">#<sp/>ORDERED!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1093"><highlight class="normal"><sp/><sp/><sp/><sp/>enum.sequencepats<sp/>=<sp/>{</highlight><highlight class="stringliteral">&apos;arabic&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;[0-9]+&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;loweralpha&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;[a-z]&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;upperalpha&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;[A-Z]&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;lowerroman&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;[ivxlcdm]+&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;upperroman&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;[IVXLCDM]+&apos;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="1098"><highlight class="normal"><sp/><sp/><sp/><sp/>enum.converters<sp/>=<sp/>{</highlight><highlight class="stringliteral">&apos;arabic&apos;</highlight><highlight class="normal">:<sp/>int,</highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;loweralpha&apos;</highlight><highlight class="normal">:<sp/>_loweralpha_to_int,</highlight></codeline>
<codeline lineno="1100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;upperalpha&apos;</highlight><highlight class="normal">:<sp/>_upperalpha_to_int,</highlight></codeline>
<codeline lineno="1101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;lowerroman&apos;</highlight><highlight class="normal">:<sp/>_lowerroman_to_int,</highlight></codeline>
<codeline lineno="1102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;upperroman&apos;</highlight><highlight class="normal">:<sp/>roman.fromRoman}</highlight></codeline>
<codeline lineno="1103"><highlight class="normal"></highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/>enum.sequenceregexps<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>sequence<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enum.sequences:</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enum.sequenceregexps[sequence]<sp/>=<sp/>re.compile(</highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enum.sequencepats[sequence]<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;$&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1108"><highlight class="normal"></highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/>grid_table_top_pat<sp/>=<sp/>re.compile(</highlight><highlight class="stringliteral">r&apos;\+-[-+]+-\+<sp/>*$&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Matches<sp/>the<sp/>top<sp/>(&amp;<sp/>bottom)<sp/>of<sp/>a<sp/>full<sp/>table).&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1111"><highlight class="normal"></highlight></codeline>
<codeline lineno="1112"><highlight class="normal"><sp/><sp/><sp/><sp/>simple_table_top_pat<sp/>=<sp/>re.compile(</highlight><highlight class="stringliteral">&apos;=+(<sp/>+=+)+<sp/>*$&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Matches<sp/>the<sp/>top<sp/>of<sp/>a<sp/>simple<sp/>table.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1114"><highlight class="normal"></highlight></codeline>
<codeline lineno="1115"><highlight class="normal"><sp/><sp/><sp/><sp/>simple_table_border_pat<sp/>=<sp/>re.compile(</highlight><highlight class="stringliteral">&apos;=+[<sp/>=]*$&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Matches<sp/>the<sp/>bottom<sp/>&amp;<sp/>header<sp/>bottom<sp/>of<sp/>a<sp/>simple<sp/>table.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1117"><highlight class="normal"></highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/>pats<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Fragments<sp/>of<sp/>patterns<sp/>used<sp/>by<sp/>transitions.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1120"><highlight class="normal"></highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;nonalphanum7bit&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;[!-/:-@[-`{-~]&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;alpha&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;[a-zA-Z]&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;alphanum&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;[a-zA-Z0-9]&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;alphanumplus&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;[a-zA-Z0-9_-]&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;enum&apos;</highlight><highlight class="normal">]<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;(%(arabic)s|%(loweralpha)s|%(upperalpha)s|%(lowerroman)s&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;|%(upperroman)s|#)&apos;</highlight><highlight class="normal"><sp/>%<sp/>enum.sequencepats)</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;optname&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;%(alphanum)s%(alphanumplus)s*&apos;</highlight><highlight class="normal"><sp/>%<sp/>pats</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>@@@<sp/>Loosen<sp/>up<sp/>the<sp/>pattern?<sp/><sp/>Allow<sp/>Unicode?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;optarg&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;(%(alpha)s%(alphanumplus)s*|&lt;[^&lt;&gt;]+&gt;)&apos;</highlight><highlight class="normal"><sp/>%<sp/>pats</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;shortopt&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(-|\+)%(alphanum)s(<sp/>?%(optarg)s)?&apos;</highlight><highlight class="normal"><sp/>%<sp/>pats</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;longopt&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(--|/)%(optname)s([<sp/>=]%(optarg)s)?&apos;</highlight><highlight class="normal"><sp/>%<sp/>pats</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;option&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;(%(shortopt)s|%(longopt)s)&apos;</highlight><highlight class="normal"><sp/>%<sp/>pats</highlight></codeline>
<codeline lineno="1133"><highlight class="normal"></highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>format<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enum.formats:</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pats[format]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;(?P&lt;%s&gt;%s%s%s)&apos;</highlight><highlight class="normal"><sp/>%<sp/>(</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>format,<sp/>re.escape(enum.formatinfo[format].prefix),</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pats[</highlight><highlight class="stringliteral">&apos;enum&apos;</highlight><highlight class="normal">],<sp/>re.escape(enum.formatinfo[format].suffix))</highlight></codeline>
<codeline lineno="1138"><highlight class="normal"></highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/>patterns<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;bullet&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;[-+*\u2022\u2023\u2043](<sp/>+|$)&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;enumerator&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;(%(parens)s|%(rparen)s|%(period)s)(<sp/>+|$)&apos;</highlight><highlight class="normal"><sp/>%<sp/>pats,</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;field_marker&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;:(?![:<sp/>])([^:\\]|\\.|:(?!([<sp/>`]|$)))*(?&lt;!<sp/>):(<sp/>+|$)&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;option_marker&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;%(option)s(,<sp/>%(option)s)*(<sp/><sp/>+|<sp/>?$)&apos;</highlight><highlight class="normal"><sp/>%<sp/>pats,</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;doctest&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;&gt;&gt;&gt;(<sp/>+|$)&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;line_block&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;\|(<sp/>+|$)&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;grid_table_top&apos;</highlight><highlight class="normal">:<sp/>grid_table_top_pat,</highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;simple_table_top&apos;</highlight><highlight class="normal">:<sp/>simple_table_top_pat,</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;explicit_markup&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;\.\.(<sp/>+|$)&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;anonymous&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;__(<sp/>+|$)&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;line&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;(%(nonalphanum7bit)s)\1*<sp/>*$&apos;</highlight><highlight class="normal"><sp/>%<sp/>pats,</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;&apos;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/>initial_transitions<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;bullet&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;enumerator&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;field_marker&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;option_marker&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;doctest&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;line_block&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;grid_table_top&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;simple_table_top&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;explicit_markup&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;anonymous&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;line&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"></highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">indent(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Block<sp/>quote.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_indented()</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>elements<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a31768929c5472525c8fa86f52f73568e" kindref="member">block_quote</ref>(indented,<sp/>line_offset)</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>elements</highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Block<sp/>quote&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>context,<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"></highlight></codeline>
<codeline lineno="1176"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a31768929c5472525c8fa86f52f73568e" kindref="member">block_quote</ref>(self,<sp/>indented,<sp/>line_offset):</highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>elements<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>indented:</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blockquote<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1block__quote" kindref="compound">nodes.block_quote</ref>(rawsource=</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented))</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(blockquote.source,<sp/>blockquote.line</highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(line_offset+1)</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(blockquote_lines,</highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attribution_lines,</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attribution_offset,</highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented,</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_line_offset)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1afdd45f500aea53f716e933b7b5d67cbc" kindref="member">split_attribution</ref>(indented,<sp/>line_offset)</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(blockquote_lines,<sp/>line_offset,<sp/>blockquote)</highlight></codeline>
<codeline lineno="1188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>elements.append(blockquote)</highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>attribution_lines:</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attribution,<sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a06205c2039344942052d3e6a0d4d8a9f" kindref="member">parse_attribution</ref>(</highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attribution_lines,<sp/>line_offset+attribution_offset)</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blockquote<sp/>+=<sp/>attribution</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>elements<sp/>+=<sp/>messages</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line_offset<sp/>=<sp/>new_line_offset</highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>indented<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>indented[0]:</highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented<sp/>=<sp/>indented[1:]</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line_offset<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>elements</highlight></codeline>
<codeline lineno="1199"><highlight class="normal"></highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>U+2014<sp/>is<sp/>an<sp/>em-dash:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/>attribution_pattern<sp/>=<sp/>re.compile(</highlight><highlight class="stringliteral">&apos;(---?(?!-)|\u2014)<sp/>*(?=[^<sp/>\\n])&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1202"><highlight class="normal"></highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1afdd45f500aea53f716e933b7b5d67cbc" kindref="member">split_attribution</ref>(self,<sp/>indented,<sp/>line_offset):</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1205"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Check<sp/>for<sp/>a<sp/>block<sp/>quote<sp/>attribution<sp/>and<sp/>split<sp/>it<sp/>off:</highlight></codeline>
<codeline lineno="1206"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1207"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>First<sp/>line<sp/>after<sp/>a<sp/>blank<sp/>line<sp/>must<sp/>begin<sp/>with<sp/>a<sp/>dash<sp/>(&quot;--&quot;,<sp/>&quot;---&quot;,</highlight></codeline>
<codeline lineno="1208"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>em-dash;<sp/>matches<sp/>`self.attribution_pattern`).</highlight></codeline>
<codeline lineno="1209"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Every<sp/>line<sp/>after<sp/>that<sp/>must<sp/>have<sp/>consistent<sp/>indentation.</highlight></codeline>
<codeline lineno="1210"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>Attributions<sp/>must<sp/>be<sp/>preceded<sp/>by<sp/>block<sp/>quote<sp/>content.</highlight></codeline>
<codeline lineno="1211"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1212"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>a<sp/>tuple<sp/>of:<sp/>(block<sp/>quote<sp/>content<sp/>lines,<sp/>attribution<sp/>lines,</highlight></codeline>
<codeline lineno="1213"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attribution<sp/>offset,<sp/>remaining<sp/>indented<sp/>lines,<sp/>remaining<sp/>lines<sp/>offset).</highlight></codeline>
<codeline lineno="1214"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nonblank_seen<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(indented)):</highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line<sp/>=<sp/>indented[i].rstrip()</highlight></codeline>
<codeline lineno="1219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>line:</highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>nonblank_seen<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>blank<sp/>==<sp/>i<sp/>-<sp/>1:<sp/><sp/></highlight><highlight class="comment">#<sp/>last<sp/>line<sp/>blank</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a598e64e7ce5067301a8ed87cd4845085" kindref="member">attribution_pattern</ref>.match(line)</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match:</highlight></codeline>
<codeline lineno="1223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attribution_end,<sp/>indent<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a329b32bec752172b7d560a20531c339c" kindref="member">check_attribution</ref>(</highlight></codeline>
<codeline lineno="1224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented,<sp/>i)</highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>attribution_end:</highlight></codeline>
<codeline lineno="1226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a_lines<sp/>=<sp/>indented[i:attribution_end]</highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a_lines.trim_left(match.end(),<sp/>end=1)</highlight></codeline>
<codeline lineno="1228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a_lines.trim_left(indent,<sp/>start=1)</highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(indented[:i],<sp/>a_lines,</highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i,<sp/>indented[attribution_end:],</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line_offset<sp/>+<sp/>attribution_end)</highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nonblank_seen<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank<sp/>=<sp/>i</highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>indented,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1237"><highlight class="normal"></highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a329b32bec752172b7d560a20531c339c" kindref="member">check_attribution</ref>(self,<sp/>indented,<sp/>attribution_start):</highlight></codeline>
<codeline lineno="1239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1240"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Check<sp/>attribution<sp/>shape.</highlight></codeline>
<codeline lineno="1241"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>the<sp/>index<sp/>past<sp/>the<sp/>end<sp/>of<sp/>the<sp/>attribution,<sp/>and<sp/>the<sp/>indent.</highlight></codeline>
<codeline lineno="1242"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indent<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>=<sp/>attribution_start<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="1245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(attribution_start<sp/>+<sp/>1,<sp/>len(indented)):</highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line<sp/>=<sp/>indented[i].rstrip()</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>line:</highlight></codeline>
<codeline lineno="1248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indent<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indent<sp/>=<sp/>len(line)<sp/>-<sp/>len(line.lstrip())</highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>len(line)<sp/>-<sp/>len(line.lstrip())<sp/>!=<sp/>indent:</highlight></codeline>
<codeline lineno="1252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>bad<sp/>shape;<sp/>not<sp/>an<sp/>attribution</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>return<sp/>index<sp/>of<sp/>line<sp/>after<sp/>last<sp/>attribution<sp/>line:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="1256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>i,<sp/>(indent<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>0)</highlight></codeline>
<codeline lineno="1257"><highlight class="normal"></highlight></codeline>
<codeline lineno="1258"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a06205c2039344942052d3e6a0d4d8a9f" kindref="member">parse_attribution</ref>(self,<sp/>indented,<sp/>line_offset):</highlight></codeline>
<codeline lineno="1259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented).rstrip()</highlight></codeline>
<codeline lineno="1260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>1<sp/>+<sp/>line_offset<sp/><sp/></highlight><highlight class="comment">#<sp/>line_offset<sp/>is<sp/>zero-based</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>textnodes,<sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a7f7691db57b736f35c1ebc6d56a9dff9" kindref="member">inline_text</ref>(text,<sp/>lineno)</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1attribution" kindref="compound">nodes.attribution</ref>(text,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>*textnodes)</highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node.source,<sp/>node.line<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(lineno)</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>node,<sp/>messages</highlight></codeline>
<codeline lineno="1265"><highlight class="normal"></highlight></codeline>
<codeline lineno="1266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a64762f2a2fb2adfe5619aee96a42b454" kindref="member">bullet</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Bullet<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ul<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1bullet__list" kindref="compound">nodes.bullet_list</ref>()</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ul.source,<sp/>ul.line<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>ul</highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ul[</highlight><highlight class="stringliteral">&apos;bullet&apos;</highlight><highlight class="normal">]<sp/>=<sp/>match.string[0]</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a52fd1c8a60f3ad05db3a0592aee89fdd" kindref="member">list_item</ref>(match.end())</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ul<sp/>+=<sp/>i</highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>next<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_line_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=ul,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;BulletList&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=blank_finish)</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(new_line_offset)</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Bullet<sp/>list&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1284"><highlight class="normal"></highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a52fd1c8a60f3ad05db3a0592aee89fdd" kindref="member">list_item</ref>(self,<sp/>indent):</highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="1287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line[indent:]:</highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented,<sp/>line_offset,<sp/>blank_finish<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_known_indented(indent))</highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(indent))</highlight></codeline>
<codeline lineno="1293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>listitem<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1list__item" kindref="compound">nodes.list_item</ref>(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented))</highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>listitem.source,<sp/>listitem.line<sp/>=<sp/>src,<sp/>srcline</highlight></codeline>
<codeline lineno="1295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indented:</highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(indented,<sp/>input_offset=line_offset,</highlight></codeline>
<codeline lineno="1297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=listitem)</highlight></codeline>
<codeline lineno="1298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>listitem,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1299"><highlight class="normal"></highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac2bb26c6b2af67bd8607cfab6cca868f" kindref="member">enumerator</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Enumerated<sp/>List<sp/>Item&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>format,<sp/>sequence,<sp/>text,<sp/>ordinal<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1abcf11fb5a2f06b29ee0844292337acc7" kindref="member">parse_enumerator</ref>(match)</highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ad1b0b99b5c08daed4e8114526f79620b" kindref="member">is_enumerated_list_item</ref>(ordinal,<sp/>sequence,<sp/>format):</highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1statemachine_1_1TransitionCorrection" kindref="compound">statemachine.TransitionCorrection</ref>(</highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumlist<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1enumerated__list" kindref="compound">nodes.enumerated_list</ref>()</highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>enumlist</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sequence<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumlist[</highlight><highlight class="stringliteral">&apos;enumtype&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;arabic&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumlist[</highlight><highlight class="stringliteral">&apos;enumtype&apos;</highlight><highlight class="normal">]<sp/>=<sp/>sequence</highlight></codeline>
<codeline lineno="1311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumlist[</highlight><highlight class="stringliteral">&apos;prefix&apos;</highlight><highlight class="normal">]<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.formatinfo[format].prefix</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumlist[</highlight><highlight class="stringliteral">&apos;suffix&apos;</highlight><highlight class="normal">]<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.formatinfo[format].suffix</highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>ordinal<sp/>!=<sp/>1:</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumlist[</highlight><highlight class="stringliteral">&apos;start&apos;</highlight><highlight class="normal">]<sp/>=<sp/>ordinal</highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.info(</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Enumerated<sp/>list<sp/>start<sp/>value<sp/>not<sp/>ordinal-1:<sp/>&quot;%s&quot;<sp/>(ordinal<sp/>%s)&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>(text,<sp/>ordinal))</highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>listitem,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a52fd1c8a60f3ad05db3a0592aee89fdd" kindref="member">list_item</ref>(match.end())</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumlist<sp/>+=<sp/>listitem</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>next<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newline_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=enumlist,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;EnumeratedList&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=blank_finish,</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>extra_settings={</highlight><highlight class="stringliteral">&apos;lastordinal&apos;</highlight><highlight class="normal">:<sp/>ordinal,</highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;format&apos;</highlight><highlight class="normal">:<sp/>format,</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;auto&apos;</highlight><highlight class="normal">:<sp/>sequence<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal">})</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(newline_offset)</highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Enumerated<sp/>list&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1334"><highlight class="normal"></highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1abcf11fb5a2f06b29ee0844292337acc7" kindref="member">parse_enumerator</ref>(self,<sp/>match,<sp/>expected_sequence=None):</highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1337"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Analyze<sp/>an<sp/>enumerator<sp/>and<sp/>return<sp/>the<sp/>results.</highlight></codeline>
<codeline lineno="1338"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1339"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:Return:</highlight></codeline>
<codeline lineno="1340"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>the<sp/>enumerator<sp/>format<sp/>(&apos;period&apos;,<sp/>&apos;parens&apos;,<sp/>or<sp/>&apos;rparen&apos;),</highlight></codeline>
<codeline lineno="1341"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>the<sp/>sequence<sp/>used<sp/>(&apos;arabic&apos;,<sp/>&apos;loweralpha&apos;,<sp/>&apos;upperroman&apos;,<sp/>etc.),</highlight></codeline>
<codeline lineno="1342"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>the<sp/>text<sp/>of<sp/>the<sp/>enumerator,<sp/>stripped<sp/>of<sp/>formatting,<sp/>and</highlight></codeline>
<codeline lineno="1343"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>the<sp/>ordinal<sp/>value<sp/>of<sp/>the<sp/>enumerator<sp/>(&apos;a&apos;<sp/>-&gt;<sp/>1,<sp/>&apos;ii&apos;<sp/>-&gt;<sp/>2,<sp/>etc.;</highlight></codeline>
<codeline lineno="1344"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>``None``<sp/>is<sp/>returned<sp/>for<sp/>invalid<sp/>enumerator<sp/>text).</highlight></codeline>
<codeline lineno="1345"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1346"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>enumerator<sp/>format<sp/>has<sp/>already<sp/>been<sp/>determined<sp/>by<sp/>the<sp/>regular</highlight></codeline>
<codeline lineno="1347"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expression<sp/>match.<sp/>If<sp/>`expected_sequence`<sp/>is<sp/>given,<sp/>that<sp/>sequence<sp/>is</highlight></codeline>
<codeline lineno="1348"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tried<sp/>first.<sp/>If<sp/>not,<sp/>we<sp/>check<sp/>for<sp/>Roman<sp/>numeral<sp/>1.<sp/>This<sp/>way,</highlight></codeline>
<codeline lineno="1349"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>single-character<sp/>Roman<sp/>numerals<sp/>(which<sp/>are<sp/>also<sp/>alphabetical)<sp/>can<sp/>be</highlight></codeline>
<codeline lineno="1350"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matched.<sp/>If<sp/>no<sp/>sequence<sp/>has<sp/>been<sp/>matched,<sp/>all<sp/>sequences<sp/>are<sp/>checked<sp/>in</highlight></codeline>
<codeline lineno="1351"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>order.</highlight></codeline>
<codeline lineno="1352"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>groupdict<sp/>=<sp/>match.groupdict()</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sequence<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>format<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.formats:</highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>groupdict[format]:<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>was<sp/>this<sp/>the<sp/>format<sp/>matched?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>yes;<sp/>keep<sp/>`format`</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>shouldn&apos;t<sp/>happen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ParserError" kindref="compound">ParserError</ref>(</highlight><highlight class="stringliteral">&apos;enumerator<sp/>format<sp/>not<sp/>matched&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>groupdict[format][self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.formatinfo[format].start<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>noqa:<sp/>E203,E501</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.formatinfo[format].end]</highlight></codeline>
<codeline lineno="1362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>text<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sequence<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>expected_sequence:</highlight></codeline>
<codeline lineno="1365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.sequenceregexps[expected_sequence].match(text):</highlight></codeline>
<codeline lineno="1367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sequence<sp/>=<sp/>expected_sequence</highlight></codeline>
<codeline lineno="1368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>shouldn&apos;t<sp/>happen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ParserError" kindref="compound">ParserError</ref>(</highlight><highlight class="stringliteral">&apos;unknown<sp/>enumerator<sp/>sequence:<sp/>%s&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>sequence)</highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>text<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;i&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sequence<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;lowerroman&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>text<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;I&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sequence<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;upperroman&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>sequence:</highlight></codeline>
<codeline lineno="1376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>sequence<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.sequences:</highlight></codeline>
<codeline lineno="1377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.sequenceregexps[sequence].match(text):</highlight></codeline>
<codeline lineno="1378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>shouldn&apos;t<sp/>happen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ParserError" kindref="compound">ParserError</ref>(</highlight><highlight class="stringliteral">&apos;enumerator<sp/>sequence<sp/>not<sp/>matched&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sequence<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ordinal<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="1383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ordinal<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.converters[sequence](text)</highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>roman.InvalidRomanNumeralError:</highlight></codeline>
<codeline lineno="1387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ordinal<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>format,<sp/>sequence,<sp/>text,<sp/>ordinal</highlight></codeline>
<codeline lineno="1389"><highlight class="normal"></highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ad1b0b99b5c08daed4e8114526f79620b" kindref="member">is_enumerated_list_item</ref>(self,<sp/>ordinal,<sp/>sequence,<sp/>format):</highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1392"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Check<sp/>validity<sp/>based<sp/>on<sp/>the<sp/>ordinal<sp/>value<sp/>and<sp/>the<sp/>second<sp/>line.</highlight></codeline>
<codeline lineno="1393"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1394"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>true<sp/>if<sp/>the<sp/>ordinal<sp/>is<sp/>valid<sp/>and<sp/>the<sp/>second<sp/>line<sp/>is<sp/>blank,</highlight></codeline>
<codeline lineno="1395"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented,<sp/>or<sp/>starts<sp/>with<sp/>the<sp/>next<sp/>enumerator<sp/>or<sp/>an<sp/>auto-enumerator.</highlight></codeline>
<codeline lineno="1396"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>ordinal<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next_line<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.next_line()</highlight></codeline>
<codeline lineno="1401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>EOFError:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>end<sp/>of<sp/>input<sp/>lines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line()</highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1</highlight></codeline>
<codeline lineno="1404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line()</highlight></codeline>
<codeline lineno="1406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>next_line[:1].strip():<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>blank<sp/>or<sp/>indented</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1</highlight></codeline>
<codeline lineno="1408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1acb47210406032e67fe53f1cd270b2424" kindref="member">make_enumerator</ref>(ordinal<sp/>+<sp/>1,<sp/>sequence,<sp/>format)</highlight></codeline>
<codeline lineno="1409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>result:</highlight></codeline>
<codeline lineno="1410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next_enumerator,<sp/>auto_enumerator<sp/>=<sp/>result</highlight></codeline>
<codeline lineno="1411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next_line.startswith(next_enumerator)</highlight></codeline>
<codeline lineno="1413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>next_line.startswith(auto_enumerator)):</highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>TypeError:</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1418"><highlight class="normal"></highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1acb47210406032e67fe53f1cd270b2424" kindref="member">make_enumerator</ref>(self,<sp/>ordinal,<sp/>sequence,<sp/>format):</highlight></codeline>
<codeline lineno="1420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1421"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Construct<sp/>and<sp/>return<sp/>the<sp/>next<sp/>enumerated<sp/>list<sp/>item<sp/>marker,<sp/>and<sp/>an</highlight></codeline>
<codeline lineno="1422"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>auto-enumerator<sp/>(&quot;#&quot;<sp/>instead<sp/>of<sp/>the<sp/>regular<sp/>enumerator).</highlight></codeline>
<codeline lineno="1423"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1424"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>``None``<sp/>for<sp/>invalid<sp/>(out<sp/>of<sp/>range)<sp/>ordinals.</highlight></codeline>
<codeline lineno="1425"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sequence<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumerator<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>sequence<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;arabic&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumerator<sp/>=<sp/>str(ordinal)</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sequence.endswith(</highlight><highlight class="stringliteral">&apos;alpha&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>ordinal<sp/>&gt;<sp/>26:</highlight></codeline>
<codeline lineno="1433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumerator<sp/>=<sp/>chr(ordinal<sp/>+<sp/>ord(</highlight><highlight class="stringliteral">&apos;a&apos;</highlight><highlight class="normal">)<sp/>-<sp/>1)</highlight></codeline>
<codeline lineno="1435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>sequence.endswith(</highlight><highlight class="stringliteral">&apos;roman&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="1436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumerator<sp/>=<sp/>roman.toRoman(ordinal)</highlight></codeline>
<codeline lineno="1438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>roman.RomanError:</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>shouldn&apos;t<sp/>happen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ParserError" kindref="compound">ParserError</ref>(</highlight><highlight class="stringliteral">&apos;unknown<sp/>enumerator<sp/>sequence:<sp/>&quot;%s&quot;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>sequence)</highlight></codeline>
<codeline lineno="1443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sequence.startswith(</highlight><highlight class="stringliteral">&apos;lower&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumerator<sp/>=<sp/>enumerator.lower()</highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>sequence.startswith(</highlight><highlight class="stringliteral">&apos;upper&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>enumerator<sp/>=<sp/>enumerator.upper()</highlight></codeline>
<codeline lineno="1447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>shouldn&apos;t<sp/>happen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ParserError" kindref="compound">ParserError</ref>(</highlight><highlight class="stringliteral">&apos;unknown<sp/>enumerator<sp/>sequence:<sp/>&quot;%s&quot;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>sequence)</highlight></codeline>
<codeline lineno="1450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>formatinfo<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a0588ea0c8d1e97355816df5cf5e09f24" kindref="member">enum</ref>.formatinfo[format]</highlight></codeline>
<codeline lineno="1451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>next_enumerator<sp/>=<sp/>(formatinfo.prefix<sp/>+<sp/>enumerator<sp/>+<sp/>formatinfo.suffix</highlight></codeline>
<codeline lineno="1452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>auto_enumerator<sp/>=<sp/>formatinfo.prefix<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal"><sp/>+<sp/>formatinfo.suffix<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>next_enumerator,<sp/>auto_enumerator</highlight></codeline>
<codeline lineno="1455"><highlight class="normal"></highlight></codeline>
<codeline lineno="1456"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a72be1e8f2e9c76f355c533b534ebe2ef" kindref="member">field_marker</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Field<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field_list<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1field__list" kindref="compound">nodes.field_list</ref>()</highlight></codeline>
<codeline lineno="1459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>field_list</highlight></codeline>
<codeline lineno="1460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ad7427eacc497bcb7f2b491550158911d" kindref="member">field</ref>(match)</highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field_list<sp/>+=<sp/>field</highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>next<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newline_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="1465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=field_list,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;FieldList&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=blank_finish)</highlight></codeline>
<codeline lineno="1468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(newline_offset)</highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Field<sp/>list&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1472"><highlight class="normal"></highlight></codeline>
<codeline lineno="1473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">field(self,<sp/>match):</highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1adbb59fd4913246b4f6b64eec0bf7a6e4" kindref="member">parse_field_marker</ref>(match)</highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="1477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end())</highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field_node<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1field" kindref="compound">nodes.field</ref>()</highlight></codeline>
<codeline lineno="1480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field_node.source<sp/>=<sp/>src</highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field_node.line<sp/>=<sp/>srcline</highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name_nodes,<sp/>name_messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a7f7691db57b736f35c1ebc6d56a9dff9" kindref="member">inline_text</ref>(name,<sp/>lineno)</highlight></codeline>
<codeline lineno="1483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field_node<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1field__name" kindref="compound">nodes.field_name</ref>(name,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>*name_nodes)</highlight></codeline>
<codeline lineno="1484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field_body<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1field__body" kindref="compound">nodes.field_body</ref>(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented),<sp/>*name_messages)</highlight></codeline>
<codeline lineno="1485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field_node<sp/>+=<sp/>field_body</highlight></codeline>
<codeline lineno="1486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indented:</highlight></codeline>
<codeline lineno="1487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac4580c45e3f3d40f04a79908bf67eb2e" kindref="member">parse_field_body</ref>(indented,<sp/>line_offset,<sp/>field_body)</highlight></codeline>
<codeline lineno="1488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>field_node,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1489"><highlight class="normal"></highlight></codeline>
<codeline lineno="1490"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1adbb59fd4913246b4f6b64eec0bf7a6e4" kindref="member">parse_field_marker</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="1491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Extract<sp/>&amp;<sp/>return<sp/>field<sp/>name<sp/>from<sp/>a<sp/>field<sp/>marker<sp/>match.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field<sp/>=<sp/>match.group()[1:]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>strip<sp/>off<sp/>leading<sp/>&apos;:&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field<sp/>=<sp/>field[:field.rfind(</highlight><highlight class="stringliteral">&apos;:&apos;</highlight><highlight class="normal">)]<sp/><sp/></highlight><highlight class="comment">#<sp/>strip<sp/>off<sp/>trailing<sp/>&apos;:&apos;<sp/>etc.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>field</highlight></codeline>
<codeline lineno="1495"><highlight class="normal"></highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac4580c45e3f3d40f04a79908bf67eb2e" kindref="member">parse_field_body</ref>(self,<sp/>indented,<sp/>offset,<sp/>node):</highlight></codeline>
<codeline lineno="1497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(indented,<sp/>input_offset=offset,<sp/>node=node)</highlight></codeline>
<codeline lineno="1498"><highlight class="normal"></highlight></codeline>
<codeline lineno="1499"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ad1bb550b7bb82173c20df35ae0568066" kindref="member">option_marker</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Option<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optionlist<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1option__list" kindref="compound">nodes.option_list</ref>()</highlight></codeline>
<codeline lineno="1502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(optionlist.source,<sp/>optionlist.line</highlight></codeline>
<codeline lineno="1503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="1504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>listitem,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a22c96723c1734e5603d47e88d0c74054" kindref="member">option_list_item</ref>(match)</highlight></codeline>
<codeline lineno="1506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>MarkupError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>error:</highlight></codeline>
<codeline lineno="1507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>This<sp/>shouldn&apos;t<sp/>happen;<sp/>pattern<sp/>won&apos;t<sp/>match.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight><highlight class="stringliteral">&apos;Invalid<sp/>option<sp/>list<sp/>marker:<sp/>%s&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>error)</highlight></codeline>
<codeline lineno="1510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="1511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end())</highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>elements<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a31768929c5472525c8fa86f52f73568e" kindref="member">block_quote</ref>(indented,<sp/>line_offset)</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>elements</highlight></codeline>
<codeline lineno="1515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Option<sp/>list&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>optionlist</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optionlist<sp/>+=<sp/>listitem</highlight></codeline>
<codeline lineno="1520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>next<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newline_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="1522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="1523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=optionlist,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;OptionList&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=blank_finish)</highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(newline_offset)</highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Option<sp/>list&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"></highlight></codeline>
<codeline lineno="1531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a22c96723c1734e5603d47e88d0c74054" kindref="member">option_list_item</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="1532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a9e6937887f98e06eaf3678cf584f40ed" kindref="member">parse_option_marker</ref>(match)</highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end())</highlight></codeline>
<codeline lineno="1536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>indented:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>not<sp/>an<sp/>option<sp/>list<sp/>item</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(offset)</highlight></codeline>
<codeline lineno="1538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1statemachine_1_1TransitionCorrection" kindref="compound">statemachine.TransitionCorrection</ref>(</highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option_group<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1option__group" kindref="compound">nodes.option_group</ref>(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>*options)</highlight></codeline>
<codeline lineno="1540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>description<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1description" kindref="compound">nodes.description</ref>(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented))</highlight></codeline>
<codeline lineno="1541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option_list_item<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1option__list__item" kindref="compound">nodes.option_list_item</ref>(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>option_group,</highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>description)</highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indented:</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(indented,<sp/>input_offset=line_offset,</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=description)</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>option_list_item,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1547"><highlight class="normal"></highlight></codeline>
<codeline lineno="1548"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a9e6937887f98e06eaf3678cf584f40ed" kindref="member">parse_option_marker</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="1549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1550"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Return<sp/>a<sp/>list<sp/>of<sp/>`node.option`<sp/>and<sp/>`node.option_argument`<sp/>objects,</highlight></codeline>
<codeline lineno="1551"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parsed<sp/>from<sp/>an<sp/>option<sp/>marker<sp/>match.</highlight></codeline>
<codeline lineno="1552"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1553"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:Exception:<sp/>`MarkupError`<sp/>for<sp/>invalid<sp/>option<sp/>markers.</highlight></codeline>
<codeline lineno="1554"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optlist<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>split<sp/>at<sp/>&quot;,<sp/>&quot;,<sp/>except<sp/>inside<sp/>&lt;<sp/>&gt;<sp/>(complex<sp/>arguments)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optionstrings<sp/>=<sp/>re.split(</highlight><highlight class="stringliteral">r&apos;,<sp/>(?![^&lt;]*&gt;)&apos;</highlight><highlight class="normal">,<sp/>match.group().rstrip())</highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>optionstring<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>optionstrings:</highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tokens<sp/>=<sp/>optionstring.split()</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delimiter<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>firstopt<sp/>=<sp/>tokens[0].split(</highlight><highlight class="stringliteral">&apos;=&apos;</highlight><highlight class="normal">,<sp/>1)</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(firstopt)<sp/>&gt;<sp/>1:</highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>&quot;--opt=value&quot;<sp/>form</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tokens[:1]<sp/>=<sp/>firstopt</highlight></codeline>
<codeline lineno="1565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delimiter<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;=&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>(len(tokens[0])<sp/>&gt;<sp/>2</highlight></codeline>
<codeline lineno="1567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>((tokens[0].startswith(</highlight><highlight class="stringliteral">&apos;-&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>tokens[0].startswith(</highlight><highlight class="stringliteral">&apos;--&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="1569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>tokens[0].startswith(</highlight><highlight class="stringliteral">&apos;+&apos;</highlight><highlight class="normal">))):</highlight></codeline>
<codeline lineno="1570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>&quot;-ovalue&quot;<sp/>form</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tokens[:1]<sp/>=<sp/>[tokens[0][:2],<sp/>tokens[0][2:]]</highlight></codeline>
<codeline lineno="1572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delimiter<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(tokens)<sp/>&gt;<sp/>1<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>(tokens[1].startswith(</highlight><highlight class="stringliteral">&apos;&lt;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>tokens[-1].endswith(</highlight><highlight class="stringliteral">&apos;&gt;&apos;</highlight><highlight class="normal">)):</highlight></codeline>
<codeline lineno="1575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>&quot;-o<sp/>&lt;value1<sp/>value2&gt;&quot;<sp/>form;<sp/>join<sp/>all<sp/>values<sp/>into<sp/>one<sp/>token</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tokens[1:]<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(tokens[1:])]</highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>0<sp/>&lt;<sp/>len(tokens)<sp/>&lt;=<sp/>2:</highlight></codeline>
<codeline lineno="1578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1option" kindref="compound">nodes.option</ref>(optionstring)</highlight></codeline>
<codeline lineno="1579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1option__string" kindref="compound">nodes.option_string</ref>(tokens[0],<sp/>tokens[0])</highlight></codeline>
<codeline lineno="1580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(tokens)<sp/>&gt;<sp/>1:</highlight></codeline>
<codeline lineno="1581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1option__argument" kindref="compound">nodes.option_argument</ref>(tokens[1],<sp/>tokens[1],</highlight></codeline>
<codeline lineno="1582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delimiter=delimiter)</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optlist.append(option)</highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" kindref="compound">MarkupError</ref>(</highlight></codeline>
<codeline lineno="1586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;wrong<sp/>number<sp/>of<sp/>option<sp/>tokens<sp/>(=%s),<sp/>should<sp/>be<sp/>1<sp/>or<sp/>2:<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;&quot;%s&quot;&apos;</highlight><highlight class="normal"><sp/>%<sp/>(len(tokens),<sp/>optionstring))</highlight></codeline>
<codeline lineno="1588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>optlist</highlight></codeline>
<codeline lineno="1589"><highlight class="normal"></highlight></codeline>
<codeline lineno="1590"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacedoctest" kindref="compound">doctest</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_text_block())</highlight></codeline>
<codeline lineno="1592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>TODO:<sp/>prepend<sp/>class<sp/>value<sp/>[&apos;pycon&apos;]<sp/>(Python<sp/>Console)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>parse<sp/>with<sp/>`directives.body.CodeBlock`<sp/>(returns<sp/>literal-block</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>with<sp/>class<sp/>&quot;code&quot;<sp/>and<sp/>syntax<sp/>highlight<sp/>markup).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1doctest__block" kindref="compound">nodes.doctest_block</ref>(data,<sp/>data)</highlight></codeline>
<codeline lineno="1596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1597"><highlight class="normal"></highlight></codeline>
<codeline lineno="1598"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1add2ed167133143a668f69974476796eb" kindref="member">line_block</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;First<sp/>line<sp/>of<sp/>a<sp/>line<sp/>block.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1line__block" kindref="compound">nodes.line_block</ref>()</highlight></codeline>
<codeline lineno="1601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>block</highlight></codeline>
<codeline lineno="1602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="1603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line,<sp/>messages,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a5e338f2ed171eec25f8d9d836b5b5d7d" kindref="member">line_block_line</ref>(match,<sp/>lineno)</highlight></codeline>
<codeline lineno="1604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>+=<sp/>line</highlight></codeline>
<codeline lineno="1605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>messages</highlight></codeline>
<codeline lineno="1606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>next<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_line_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="1609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="1610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=block,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;LineBlock&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=0)</highlight></codeline>
<codeline lineno="1613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(new_line_offset)</highlight></codeline>
<codeline lineno="1614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="1616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Line<sp/>block<sp/>ends<sp/>without<sp/>a<sp/>blank<sp/>line.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno+1)</highlight></codeline>
<codeline lineno="1618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(block):</highlight></codeline>
<codeline lineno="1619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>block[0].indent<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block[0].indent<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="1621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a2df951b0f62086ea846ae747cad8dc0e" kindref="member">nest_line_block_lines</ref>(block)</highlight></codeline>
<codeline lineno="1622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1623"><highlight class="normal"></highlight></codeline>
<codeline lineno="1624"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a5e338f2ed171eec25f8d9d836b5b5d7d" kindref="member">line_block_line</ref>(self,<sp/>match,<sp/>lineno):</highlight></codeline>
<codeline lineno="1625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Return<sp/>one<sp/>line<sp/>element<sp/>of<sp/>a<sp/>line_block.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end(),</highlight></codeline>
<codeline lineno="1628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>until_blank=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented)</highlight></codeline>
<codeline lineno="1630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text_nodes,<sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a7f7691db57b736f35c1ebc6d56a9dff9" kindref="member">inline_text</ref>(text,<sp/>lineno)</highlight></codeline>
<codeline lineno="1631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1line" kindref="compound">nodes.line</ref>(text,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>*text_nodes)</highlight></codeline>
<codeline lineno="1632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match.string.rstrip()<sp/>!=<sp/></highlight><highlight class="stringliteral">&apos;|&apos;</highlight><highlight class="normal">:<sp/><sp/></highlight><highlight class="comment">#<sp/>not<sp/>empty</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line.indent<sp/>=<sp/>len(match.group(1))<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="1634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>line,<sp/>messages,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1635"><highlight class="normal"></highlight></codeline>
<codeline lineno="1636"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a2df951b0f62086ea846ae747cad8dc0e" kindref="member">nest_line_block_lines</ref>(self,<sp/>block):</highlight></codeline>
<codeline lineno="1637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>index<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(1,<sp/>len(block)):</highlight></codeline>
<codeline lineno="1638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>getattr(block[index],<sp/></highlight><highlight class="stringliteral">&apos;indent&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block[index].indent<sp/>=<sp/>block[index<sp/>-<sp/>1].indent</highlight></codeline>
<codeline lineno="1640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1aec74755ecbac55ebf820c9c90530953c" kindref="member">nest_line_block_segment</ref>(block)</highlight></codeline>
<codeline lineno="1641"><highlight class="normal"></highlight></codeline>
<codeline lineno="1642"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1aec74755ecbac55ebf820c9c90530953c" kindref="member">nest_line_block_segment</ref>(self,<sp/>block):</highlight></codeline>
<codeline lineno="1643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indents<sp/>=<sp/>[item.indent<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>item<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>block]</highlight></codeline>
<codeline lineno="1644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>least<sp/>=<sp/>min(indents)</highlight></codeline>
<codeline lineno="1645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_items<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="1646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_block<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1line__block" kindref="compound">nodes.line_block</ref>()</highlight></codeline>
<codeline lineno="1647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>item<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>block:</highlight></codeline>
<codeline lineno="1648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>item.indent<sp/>&gt;<sp/>least:</highlight></codeline>
<codeline lineno="1649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_block.append(item)</highlight></codeline>
<codeline lineno="1650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(new_block):</highlight></codeline>
<codeline lineno="1652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1aec74755ecbac55ebf820c9c90530953c" kindref="member">nest_line_block_segment</ref>(new_block)</highlight></codeline>
<codeline lineno="1653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_items.append(new_block)</highlight></codeline>
<codeline lineno="1654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_block<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1line__block" kindref="compound">nodes.line_block</ref>()</highlight></codeline>
<codeline lineno="1655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_items.append(item)</highlight></codeline>
<codeline lineno="1656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(new_block):</highlight></codeline>
<codeline lineno="1657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1aec74755ecbac55ebf820c9c90530953c" kindref="member">nest_line_block_segment</ref>(new_block)</highlight></codeline>
<codeline lineno="1658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_items.append(new_block)</highlight></codeline>
<codeline lineno="1659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block[:]<sp/>=<sp/>new_items</highlight></codeline>
<codeline lineno="1660"><highlight class="normal"></highlight></codeline>
<codeline lineno="1661"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ab42278af97feca41313e4deff49eea65" kindref="member">grid_table_top</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Top<sp/>border<sp/>of<sp/>a<sp/>full<sp/>table.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1abeefde2f141dfe152584b730d6ff0890" kindref="member">table_top</ref>(match,<sp/>context,<sp/>next_state,</highlight></codeline>
<codeline lineno="1664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a08d69b9abf814076e4b7414c777a33d0" kindref="member">isolate_grid_table</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac1b39c870eb206cf0f12951464b0098c" kindref="member">isolate_grid_table</ref>,</highlight></codeline>
<codeline lineno="1665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1tableparser_1_1GridTableParser" kindref="compound">tableparser.GridTableParser</ref>)</highlight></codeline>
<codeline lineno="1666"><highlight class="normal"></highlight></codeline>
<codeline lineno="1667"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a914d49a96331a5c6819f0fe2130d700f" kindref="member">simple_table_top</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="1668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Top<sp/>border<sp/>of<sp/>a<sp/>simple<sp/>table.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1abeefde2f141dfe152584b730d6ff0890" kindref="member">table_top</ref>(match,<sp/>context,<sp/>next_state,</highlight></codeline>
<codeline lineno="1670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a08d3007583666919159a88eaf42b0855" kindref="member">isolate_simple_table</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac39760a3834ed0a4a747c87cce5493ba" kindref="member">isolate_simple_table</ref>,</highlight></codeline>
<codeline lineno="1671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1tableparser_1_1SimpleTableParser" kindref="compound">tableparser.SimpleTableParser</ref>)</highlight></codeline>
<codeline lineno="1672"><highlight class="normal"></highlight></codeline>
<codeline lineno="1673"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1abeefde2f141dfe152584b730d6ff0890" kindref="member">table_top</ref>(self,<sp/>match,<sp/>context,<sp/>next_state,</highlight></codeline>
<codeline lineno="1674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>isolate_function,<sp/>parser_class):</highlight></codeline>
<codeline lineno="1675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Top<sp/>border<sp/>of<sp/>a<sp/>generic<sp/>table.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1abdbc43baf2002228df0b7c7a512c855b" kindref="member">table</ref>(isolate_function,<sp/>parser_class)</highlight></codeline>
<codeline lineno="1677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>nodelist</highlight></codeline>
<codeline lineno="1678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="1679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="1680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Blank<sp/>line<sp/>required<sp/>after<sp/>table.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()+1)</highlight></codeline>
<codeline lineno="1682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="1683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="1684"><highlight class="normal"></highlight></codeline>
<codeline lineno="1685"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1abdbc43baf2002228df0b7c7a512c855b" kindref="member">table</ref>(self,<sp/>isolate_function,<sp/>parser_class):</highlight></codeline>
<codeline lineno="1686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Parse<sp/>a<sp/>table.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block,<sp/>messages,<sp/>blank_finish<sp/>=<sp/>isolate_function()</highlight></codeline>
<codeline lineno="1688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>block:</highlight></codeline>
<codeline lineno="1689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parser<sp/>=<sp/>parser_class()</highlight></codeline>
<codeline lineno="1691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tabledata<sp/>=<sp/>parser.parse(block)</highlight></codeline>
<codeline lineno="1692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tableline<sp/>=<sp/>(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()<sp/>-<sp/>len(block)</highlight></codeline>
<codeline lineno="1693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>1)</highlight></codeline>
<codeline lineno="1694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>table<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a4e018e06a57db946b1313181aa6b3d48" kindref="member">build_table</ref>(tabledata,<sp/>tableline)</highlight></codeline>
<codeline lineno="1695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist<sp/>=<sp/>[table]<sp/>+<sp/>messages</highlight></codeline>
<codeline lineno="1696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1tableparser_1_1TableMarkupError" kindref="compound">tableparser.TableMarkupError</ref><sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>err:</highlight></codeline>
<codeline lineno="1697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a486d68672f2c8791f2c278b25c0b8854" kindref="member">malformed_table</ref>(block,<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(err.args),</highlight></codeline>
<codeline lineno="1698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset=err.offset)<sp/>+<sp/>messages</highlight></codeline>
<codeline lineno="1699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist<sp/>=<sp/>messages</highlight></codeline>
<codeline lineno="1701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nodelist,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1702"><highlight class="normal"></highlight></codeline>
<codeline lineno="1703"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a08d69b9abf814076e4b7414c777a33d0" kindref="member">isolate_grid_table</ref>(self):</highlight></codeline>
<codeline lineno="1704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="1705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="1706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_text_block(flush_left=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1statemachine_1_1UnexpectedIndentationError" kindref="compound">statemachine.UnexpectedIndentationError</ref><sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>err:</highlight></codeline>
<codeline lineno="1709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block,<sp/>src,<sp/>srcline<sp/>=<sp/>err.args</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages.append(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight><highlight class="stringliteral">&apos;Unexpected<sp/>indentation.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>source=src,<sp/>line=srcline))</highlight></codeline>
<codeline lineno="1712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block.disconnect()</highlight></codeline>
<codeline lineno="1714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>for<sp/>East<sp/>Asian<sp/>chars:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block.pad_double_width(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a464db254c0e4d4cfdcbe5b9d368c2b17" kindref="member">double_width_pad_char</ref>)</highlight></codeline>
<codeline lineno="1716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>width<sp/>=<sp/>len(block[0].strip())</highlight></codeline>
<codeline lineno="1717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(block)):</highlight></codeline>
<codeline lineno="1718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block[i]<sp/>=<sp/>block[i].strip()</highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>block[i][0]<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;+|&apos;</highlight><highlight class="normal">:<sp/><sp/></highlight><highlight class="comment">#<sp/>check<sp/>left<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line(len(block)<sp/>-<sp/>i)</highlight></codeline>
<codeline lineno="1722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>block[i:]</highlight></codeline>
<codeline lineno="1723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a492b35ce9c0013ac864bd1dbd3b4cbca" kindref="member">grid_table_top_pat</ref>.match(block[-1]):<sp/><sp/></highlight><highlight class="comment">#<sp/>find<sp/>bottom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="1726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>from<sp/>second-last<sp/>to<sp/>third<sp/>line<sp/>of<sp/>table:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(block)<sp/>-<sp/>2,<sp/>1,<sp/>-1):</highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a492b35ce9c0013ac864bd1dbd3b4cbca" kindref="member">grid_table_top_pat</ref>.match(block[i]):</highlight></codeline>
<codeline lineno="1729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line(len(block)<sp/>-<sp/>i<sp/>+<sp/>1)</highlight></codeline>
<codeline lineno="1730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>block[i+1:]</highlight></codeline>
<codeline lineno="1731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages.extend(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a486d68672f2c8791f2c278b25c0b8854" kindref="member">malformed_table</ref>(block))</highlight></codeline>
<codeline lineno="1734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>messages,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(block)):<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>check<sp/>right<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(block[i])<sp/>!=<sp/>width<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>block[i][-1]<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;+|&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages.extend(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a486d68672f2c8791f2c278b25c0b8854" kindref="member">malformed_table</ref>(block))</highlight></codeline>
<codeline lineno="1738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>messages,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>block,<sp/>messages,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1740"><highlight class="normal"></highlight></codeline>
<codeline lineno="1741"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a08d3007583666919159a88eaf42b0855" kindref="member">isolate_simple_table</ref>(self):</highlight></codeline>
<codeline lineno="1742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>start<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset</highlight></codeline>
<codeline lineno="1743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines</highlight></codeline>
<codeline lineno="1744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>limit<sp/>=<sp/>len(lines)<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="1745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>toplen<sp/>=<sp/>len(lines[start].strip())</highlight></codeline>
<codeline lineno="1746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern_match<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a846bccd9e4bc0b84489bd1f83631e889" kindref="member">simple_table_border_pat</ref>.match</highlight></codeline>
<codeline lineno="1747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="1748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found_at<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>=<sp/>start<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="1750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>i<sp/>&lt;=<sp/>limit:</highlight></codeline>
<codeline lineno="1751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line<sp/>=<sp/>lines[i]</highlight></codeline>
<codeline lineno="1752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>pattern_match(line)</highlight></codeline>
<codeline lineno="1753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match:</highlight></codeline>
<codeline lineno="1754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(line.strip())<sp/>!=<sp/>toplen:</highlight></codeline>
<codeline lineno="1755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.next_line(i<sp/>-<sp/>start)</highlight></codeline>
<codeline lineno="1756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a486d68672f2c8791f2c278b25c0b8854" kindref="member">malformed_table</ref>(</highlight></codeline>
<codeline lineno="1757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines[start:i+1],<sp/></highlight><highlight class="stringliteral">&apos;Bottom/header<sp/>table<sp/>border<sp/>does<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;not<sp/>match<sp/>top<sp/>border.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>messages,<sp/>i<sp/>==<sp/>limit<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>lines[i+1].strip()</highlight></codeline>
<codeline lineno="1760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="1761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>found_at<sp/>=<sp/>i</highlight></codeline>
<codeline lineno="1762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>found<sp/>==<sp/>2<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>i<sp/>==<sp/>limit<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>lines[i+1].strip():</highlight></codeline>
<codeline lineno="1763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>end<sp/>=<sp/>i</highlight></codeline>
<codeline lineno="1764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="1766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>reached<sp/>end<sp/>of<sp/>input_lines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>found:</highlight></codeline>
<codeline lineno="1768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>extra<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;<sp/>or<sp/>no<sp/>blank<sp/>line<sp/>after<sp/>table<sp/>bottom&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.next_line(found_at<sp/>-<sp/>start)</highlight></codeline>
<codeline lineno="1770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>=<sp/>lines[start:found_at+1]</highlight></codeline>
<codeline lineno="1771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>extra<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.next_line(i<sp/>-<sp/>start<sp/>-<sp/>1)</highlight></codeline>
<codeline lineno="1774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>=<sp/>lines[start:]</highlight></codeline>
<codeline lineno="1775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a486d68672f2c8791f2c278b25c0b8854" kindref="member">malformed_table</ref>(</highlight></codeline>
<codeline lineno="1776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block,<sp/></highlight><highlight class="stringliteral">&apos;No<sp/>bottom<sp/>table<sp/>border<sp/>found%s.&apos;</highlight><highlight class="normal"><sp/>%<sp/>extra)</highlight></codeline>
<codeline lineno="1777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>messages,<sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>extra</highlight></codeline>
<codeline lineno="1778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.next_line(end<sp/>-<sp/>start)</highlight></codeline>
<codeline lineno="1779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>=<sp/>lines[start:end+1]</highlight></codeline>
<codeline lineno="1780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>for<sp/>East<sp/>Asian<sp/>chars:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block.pad_double_width(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a464db254c0e4d4cfdcbe5b9d368c2b17" kindref="member">double_width_pad_char</ref>)</highlight></codeline>
<codeline lineno="1782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>block,<sp/>[],<sp/>end<sp/>==<sp/>limit<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>lines[end+1].strip()</highlight></codeline>
<codeline lineno="1783"><highlight class="normal"></highlight></codeline>
<codeline lineno="1784"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a486d68672f2c8791f2c278b25c0b8854" kindref="member">malformed_table</ref>(self,<sp/>block,<sp/>detail=&apos;&apos;,<sp/>offset=0):</highlight></codeline>
<codeline lineno="1785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block.replace(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a464db254c0e4d4cfdcbe5b9d368c2b17" kindref="member">double_width_pad_char</ref>,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(block)</highlight></codeline>
<codeline lineno="1787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;Malformed<sp/>table.&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>startline<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()<sp/>-<sp/>len(block)<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="1789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>detail:</highlight></codeline>
<codeline lineno="1790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>+=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>detail</highlight></codeline>
<codeline lineno="1791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>error<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(message,<sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(data,<sp/>data),</highlight></codeline>
<codeline lineno="1792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=startline+offset)</highlight></codeline>
<codeline lineno="1793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[error]</highlight></codeline>
<codeline lineno="1794"><highlight class="normal"></highlight></codeline>
<codeline lineno="1795"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a4e018e06a57db946b1313181aa6b3d48" kindref="member">build_table</ref>(self,<sp/>tabledata,<sp/>tableline,<sp/>stub_columns=0,<sp/>widths=None):</highlight></codeline>
<codeline lineno="1796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>colwidths,<sp/>headrows,<sp/>bodyrows<sp/>=<sp/>tabledata</highlight></codeline>
<codeline lineno="1797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>table<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1table" kindref="compound">nodes.table</ref>()</highlight></codeline>
<codeline lineno="1798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>widths<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;auto&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>table[</highlight><highlight class="stringliteral">&apos;classes&apos;</highlight><highlight class="normal">]<sp/>+=<sp/>[</highlight><highlight class="stringliteral">&apos;colwidths-auto&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="1800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>widths:<sp/><sp/></highlight><highlight class="comment">#<sp/>&quot;grid&quot;<sp/>or<sp/>list<sp/>of<sp/>integers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>table[</highlight><highlight class="stringliteral">&apos;classes&apos;</highlight><highlight class="normal">]<sp/>+=<sp/>[</highlight><highlight class="stringliteral">&apos;colwidths-given&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="1802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tgroup<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1tgroup" kindref="compound">nodes.tgroup</ref>(cols=len(colwidths))</highlight></codeline>
<codeline lineno="1803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>table<sp/>+=<sp/>tgroup</highlight></codeline>
<codeline lineno="1804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>colwidth<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>colwidths:</highlight></codeline>
<codeline lineno="1805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>colspec<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1colspec" kindref="compound">nodes.colspec</ref>(colwidth=colwidth)</highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>stub_columns:</highlight></codeline>
<codeline lineno="1807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>colspec.attributes[</highlight><highlight class="stringliteral">&apos;stub&apos;</highlight><highlight class="normal">]<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="1808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>stub_columns<sp/>-=<sp/>1</highlight></codeline>
<codeline lineno="1809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tgroup<sp/>+=<sp/>colspec</highlight></codeline>
<codeline lineno="1810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>headrows:</highlight></codeline>
<codeline lineno="1811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>thead<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1thead" kindref="compound">nodes.thead</ref>()</highlight></codeline>
<codeline lineno="1812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tgroup<sp/>+=<sp/>thead</highlight></codeline>
<codeline lineno="1813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>row<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>headrows:</highlight></codeline>
<codeline lineno="1814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>thead<sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a88601ac766bcc469db91d5de10d84b55" kindref="member">build_table_row</ref>(row,<sp/>tableline)</highlight></codeline>
<codeline lineno="1815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tbody<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1tbody" kindref="compound">nodes.tbody</ref>()</highlight></codeline>
<codeline lineno="1816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tgroup<sp/>+=<sp/>tbody</highlight></codeline>
<codeline lineno="1817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>row<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>bodyrows:</highlight></codeline>
<codeline lineno="1818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tbody<sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a88601ac766bcc469db91d5de10d84b55" kindref="member">build_table_row</ref>(row,<sp/>tableline)</highlight></codeline>
<codeline lineno="1819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>table</highlight></codeline>
<codeline lineno="1820"><highlight class="normal"></highlight></codeline>
<codeline lineno="1821"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a88601ac766bcc469db91d5de10d84b55" kindref="member">build_table_row</ref>(self,<sp/>rowdata,<sp/>tableline):</highlight></codeline>
<codeline lineno="1822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>row<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1row" kindref="compound">nodes.row</ref>()</highlight></codeline>
<codeline lineno="1823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>cell<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>rowdata:</highlight></codeline>
<codeline lineno="1824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>cell<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>morerows,<sp/>morecols,<sp/>offset,<sp/>cellblock<sp/>=<sp/>cell</highlight></codeline>
<codeline lineno="1827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attributes<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="1828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>morerows:</highlight></codeline>
<codeline lineno="1829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attributes[</highlight><highlight class="stringliteral">&apos;morerows&apos;</highlight><highlight class="normal">]<sp/>=<sp/>morerows</highlight></codeline>
<codeline lineno="1830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>morecols:</highlight></codeline>
<codeline lineno="1831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attributes[</highlight><highlight class="stringliteral">&apos;morecols&apos;</highlight><highlight class="normal">]<sp/>=<sp/>morecols</highlight></codeline>
<codeline lineno="1832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>entry<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1entry" kindref="compound">nodes.entry</ref>(**attributes)</highlight></codeline>
<codeline lineno="1833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>row<sp/>+=<sp/>entry</highlight></codeline>
<codeline lineno="1834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.join(cellblock):</highlight></codeline>
<codeline lineno="1835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(cellblock,<sp/>input_offset=tableline+offset,</highlight></codeline>
<codeline lineno="1836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=entry)</highlight></codeline>
<codeline lineno="1837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>row</highlight></codeline>
<codeline lineno="1838"><highlight class="normal"></highlight></codeline>
<codeline lineno="1839"><highlight class="normal"><sp/><sp/><sp/><sp/>explicit<sp/>=<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>()</highlight></codeline>
<codeline lineno="1840"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Patterns<sp/>and<sp/>constants<sp/>used<sp/>for<sp/>explicit<sp/>markup<sp/>recognition.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1841"><highlight class="normal"></highlight></codeline>
<codeline lineno="1842"><highlight class="normal"><sp/><sp/><sp/><sp/>explicit.patterns<sp/>=<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Struct" kindref="compound">Struct</ref>(</highlight></codeline>
<codeline lineno="1843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target=re.compile(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1844"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="1845"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>anonymous<sp/>target</highlight></codeline>
<codeline lineno="1846"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>*OR*</highlight></codeline>
<codeline lineno="1847"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?!_)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>no<sp/>underscore<sp/>at<sp/>the<sp/>beginning</highlight></codeline>
<codeline lineno="1848"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;quote&gt;`?)<sp/><sp/><sp/>#<sp/>optional<sp/>open<sp/>quote</highlight></codeline>
<codeline lineno="1849"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?![<sp/>`])<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>first<sp/>char.<sp/>not<sp/>space<sp/>or</highlight></codeline>
<codeline lineno="1850"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>backquote</highlight></codeline>
<codeline lineno="1851"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;name&gt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>reference<sp/>name</highlight></codeline>
<codeline lineno="1852"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.+?</highlight></codeline>
<codeline lineno="1853"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1854"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(non_whitespace_escape_before)s</highlight></codeline>
<codeline lineno="1855"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P=quote)<sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>close<sp/>quote<sp/>if<sp/>open<sp/>quote<sp/>used</highlight></codeline>
<codeline lineno="1856"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1857"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?&lt;!(?&lt;!\x00):)<sp/>#<sp/>no<sp/>unescaped<sp/>colon<sp/>at<sp/>end</highlight></codeline>
<codeline lineno="1858"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(non_whitespace_escape_before)s</highlight></codeline>
<codeline lineno="1859"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<sp/>]?<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>optional<sp/>space</highlight></codeline>
<codeline lineno="1860"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>end<sp/>of<sp/>reference<sp/>name</highlight></codeline>
<codeline lineno="1861"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>([<sp/>]+|$)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>followed<sp/>by<sp/>whitespace</highlight></codeline>
<codeline lineno="1862"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>vars(Inliner),<sp/>re.VERBOSE),</highlight></codeline>
<codeline lineno="1863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference=re.compile(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1864"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="1865"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;simple&gt;%(simplename)s)_</highlight></codeline>
<codeline lineno="1866"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>*OR*</highlight></codeline>
<codeline lineno="1867"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>`<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>open<sp/>backquote</highlight></codeline>
<codeline lineno="1868"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?![<sp/>])<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>not<sp/>space</highlight></codeline>
<codeline lineno="1869"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;phrase&gt;.+?)<sp/><sp/><sp/><sp/>#<sp/>hyperlink<sp/>phrase</highlight></codeline>
<codeline lineno="1870"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(non_whitespace_escape_before)s</highlight></codeline>
<codeline lineno="1871"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>`_<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>close<sp/>backquote,</highlight></codeline>
<codeline lineno="1872"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>reference<sp/>mark</highlight></codeline>
<codeline lineno="1873"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1874"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>end<sp/>of<sp/>string</highlight></codeline>
<codeline lineno="1875"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>vars(Inliner),<sp/>re.VERBOSE),</highlight></codeline>
<codeline lineno="1876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution=re.compile(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1877"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight></codeline>
<codeline lineno="1878"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?![<sp/>])<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>first<sp/>char.<sp/>not<sp/>space</highlight></codeline>
<codeline lineno="1879"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?P&lt;name&gt;.+?)<sp/><sp/><sp/><sp/>#<sp/>substitution<sp/>text</highlight></codeline>
<codeline lineno="1880"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%(non_whitespace_escape_before)s</highlight></codeline>
<codeline lineno="1881"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>close<sp/>delimiter</highlight></codeline>
<codeline lineno="1882"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="1883"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>([<sp/>]+|$)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>followed<sp/>by<sp/>whitespace</highlight></codeline>
<codeline lineno="1884"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>vars(Inliner),</highlight></codeline>
<codeline lineno="1885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>re.VERBOSE),)</highlight></codeline>
<codeline lineno="1886"><highlight class="normal"></highlight></codeline>
<codeline lineno="1887"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a72143edacbcc997df4a43496662ef28e" kindref="member">footnote</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="1888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="1889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end())</highlight></codeline>
<codeline lineno="1891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>label<sp/>=<sp/>match.group(1)</highlight></codeline>
<codeline lineno="1892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>normalize_name(label)</highlight></codeline>
<codeline lineno="1893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>footnote<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1footnote" kindref="compound">nodes.footnote</ref>(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented))</highlight></codeline>
<codeline lineno="1894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>footnote.source<sp/>=<sp/>src</highlight></codeline>
<codeline lineno="1895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>footnote.line<sp/>=<sp/>srcline</highlight></codeline>
<codeline lineno="1896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name[0]<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>auto-numbered</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>name[1:]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>autonumber<sp/>label</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>footnote[</highlight><highlight class="stringliteral">&apos;auto&apos;</highlight><highlight class="normal">]<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="1899"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name:</highlight></codeline>
<codeline lineno="1900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>footnote[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">].append(name)</highlight></codeline>
<codeline lineno="1901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_autofootnote(footnote)</highlight></codeline>
<codeline lineno="1902"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;*&apos;</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>auto-symbol</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1903"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1904"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>footnote[</highlight><highlight class="stringliteral">&apos;auto&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;*&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_symbol_footnote(footnote)</highlight></codeline>
<codeline lineno="1906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>manually<sp/>numbered</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>footnote<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1label" kindref="compound">nodes.label</ref>(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>label)</highlight></codeline>
<codeline lineno="1908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>footnote[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">].append(name)</highlight></codeline>
<codeline lineno="1909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_footnote(footnote)</highlight></codeline>
<codeline lineno="1910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>name:</highlight></codeline>
<codeline lineno="1911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_explicit_target(footnote,<sp/>footnote)</highlight></codeline>
<codeline lineno="1912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.set_id(footnote,<sp/>footnote)</highlight></codeline>
<codeline lineno="1914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indented:</highlight></codeline>
<codeline lineno="1915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(indented,<sp/>input_offset=offset,<sp/>node=footnote)</highlight></codeline>
<codeline lineno="1916"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[footnote],<sp/>blank_finish</highlight></codeline>
<codeline lineno="1917"><highlight class="normal"></highlight></codeline>
<codeline lineno="1918"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a10defcb5716dbe47f97bccad568205a7" kindref="member">citation</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="1919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="1920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1921"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end())</highlight></codeline>
<codeline lineno="1922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>label<sp/>=<sp/>match.group(1)</highlight></codeline>
<codeline lineno="1923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>normalize_name(label)</highlight></codeline>
<codeline lineno="1924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>citation<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1citation" kindref="compound">nodes.citation</ref>(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented))</highlight></codeline>
<codeline lineno="1925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>citation.source<sp/>=<sp/>src</highlight></codeline>
<codeline lineno="1926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>citation.line<sp/>=<sp/>srcline</highlight></codeline>
<codeline lineno="1927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>citation<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1label" kindref="compound">nodes.label</ref>(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>label)</highlight></codeline>
<codeline lineno="1928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>citation[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">].append(name)</highlight></codeline>
<codeline lineno="1929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_citation(citation)</highlight></codeline>
<codeline lineno="1930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_explicit_target(citation,<sp/>citation)</highlight></codeline>
<codeline lineno="1931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indented:</highlight></codeline>
<codeline lineno="1932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(indented,<sp/>input_offset=offset,<sp/>node=citation)</highlight></codeline>
<codeline lineno="1933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[citation],<sp/>blank_finish</highlight></codeline>
<codeline lineno="1934"><highlight class="normal"></highlight></codeline>
<codeline lineno="1935"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ae2205a8663bc57fb387c3d1f8a8208e0" kindref="member">hyperlink_target</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="1936"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a742b37c4f19768c0d1967b54e5c83afe" kindref="member">explicit</ref>.patterns.target</highlight></codeline>
<codeline lineno="1937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="1938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(block,<sp/>indent,<sp/>offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="1939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(</highlight></codeline>
<codeline lineno="1940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match.end(),<sp/>until_blank=</highlight><highlight class="keyword">True</highlight><highlight class="normal">,<sp/>strip_indent=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>match.string[:match.end()]<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(block)</highlight></codeline>
<codeline lineno="1942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>=<sp/>[escape2null(line)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>block]</highlight></codeline>
<codeline lineno="1943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>escaped<sp/>=<sp/>block[0]</highlight></codeline>
<codeline lineno="1944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blockindex<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="1945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targetmatch<sp/>=<sp/>pattern.match(escaped)</highlight></codeline>
<codeline lineno="1947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>targetmatch:</highlight></codeline>
<codeline lineno="1948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blockindex<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="1950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>escaped<sp/>+=<sp/>block[blockindex]</highlight></codeline>
<codeline lineno="1952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>IndexError:</highlight></codeline>
<codeline lineno="1953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" kindref="compound">MarkupError</ref>(</highlight><highlight class="stringliteral">&apos;malformed<sp/>hyperlink<sp/>target.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>block[:blockindex]</highlight></codeline>
<codeline lineno="1955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block[0]<sp/>=<sp/>(block[0]<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">)[targetmatch.end()-len(escaped)-1:].strip()</highlight></codeline>
<codeline lineno="1956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a9c8179115937db8bb0d4b60a9a462666" kindref="member">make_target</ref>(block,<sp/>blocktext,<sp/>lineno,</highlight></codeline>
<codeline lineno="1957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>targetmatch.group(</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="1958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[target],<sp/>blank_finish</highlight></codeline>
<codeline lineno="1959"><highlight class="normal"></highlight></codeline>
<codeline lineno="1960"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a9c8179115937db8bb0d4b60a9a462666" kindref="member">make_target</ref>(self,<sp/>block,<sp/>block_text,<sp/>lineno,<sp/>target_name):</highlight></codeline>
<codeline lineno="1961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target_type,<sp/>data<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a569b11fff5f630628f60264a997874c2" kindref="member">parse_target</ref>(block,<sp/>block_text,<sp/>lineno)</highlight></codeline>
<codeline lineno="1962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>target_type<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1target" kindref="compound">nodes.target</ref>(block_text,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>refname=normalize_name(data))</highlight></codeline>
<codeline lineno="1964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target.indirect_reference_name<sp/>=<sp/>data</highlight></codeline>
<codeline lineno="1965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a9c317d817a667df1fb199417a20e490d" kindref="member">add_target</ref>(target_name,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>target,<sp/>lineno)</highlight></codeline>
<codeline lineno="1966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_indirect_target(target)</highlight></codeline>
<codeline lineno="1967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>target</highlight></codeline>
<codeline lineno="1968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>target_type<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;refuri&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1target" kindref="compound">nodes.target</ref>(block_text,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a9c317d817a667df1fb199417a20e490d" kindref="member">add_target</ref>(target_name,<sp/>data,<sp/>target,<sp/>lineno)</highlight></codeline>
<codeline lineno="1971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>target</highlight></codeline>
<codeline lineno="1972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>data</highlight></codeline>
<codeline lineno="1974"><highlight class="normal"></highlight></codeline>
<codeline lineno="1975"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a569b11fff5f630628f60264a997874c2" kindref="member">parse_target</ref>(self,<sp/>block,<sp/>block_text,<sp/>lineno):</highlight></codeline>
<codeline lineno="1976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="1977"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Determine<sp/>the<sp/>type<sp/>of<sp/>reference<sp/>of<sp/>a<sp/>target.</highlight></codeline>
<codeline lineno="1978"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1979"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:Return:<sp/>A<sp/>2-tuple,<sp/>one<sp/>of:</highlight></codeline>
<codeline lineno="1980"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="1981"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&apos;refname&apos;<sp/>and<sp/>the<sp/>indirect<sp/>reference<sp/>name</highlight></codeline>
<codeline lineno="1982"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&apos;refuri&apos;<sp/>and<sp/>the<sp/>URI</highlight></codeline>
<codeline lineno="1983"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>&apos;malformed&apos;<sp/>and<sp/>a<sp/>system_message<sp/>node</highlight></codeline>
<codeline lineno="1984"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>block<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>block[-1].strip()[-1:]<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal">:<sp/><sp/></highlight><highlight class="comment">#<sp/>possible<sp/>indirect<sp/>target</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(line.strip()<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>block)</highlight></codeline>
<codeline lineno="1987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refname<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a586196d8a6d2792cc8e7f38cd467719e" kindref="member">is_reference</ref>(reference)</highlight></codeline>
<codeline lineno="1988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>refname:</highlight></codeline>
<codeline lineno="1989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;refname&apos;</highlight><highlight class="normal">,<sp/>refname</highlight></codeline>
<codeline lineno="1990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ref_parts<sp/>=<sp/>split_escaped_whitespace(</highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(block))</highlight></codeline>
<codeline lineno="1991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reference<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.join(unescape(part).split())</highlight></codeline>
<codeline lineno="1992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>part<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>ref_parts)</highlight></codeline>
<codeline lineno="1993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;refuri&apos;</highlight><highlight class="normal">,<sp/>reference</highlight></codeline>
<codeline lineno="1994"><highlight class="normal"></highlight></codeline>
<codeline lineno="1995"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a586196d8a6d2792cc8e7f38cd467719e" kindref="member">is_reference</ref>(self,<sp/>reference):</highlight></codeline>
<codeline lineno="1996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a742b37c4f19768c0d1967b54e5c83afe" kindref="member">explicit</ref>.patterns.reference.match(</highlight></codeline>
<codeline lineno="1997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>whitespace_normalize_name(reference))</highlight></codeline>
<codeline lineno="1998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>match:</highlight></codeline>
<codeline lineno="1999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>unescape(match.group(</highlight><highlight class="stringliteral">&apos;simple&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>match.group(</highlight><highlight class="stringliteral">&apos;phrase&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="2001"><highlight class="normal"></highlight></codeline>
<codeline lineno="2002"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a9c317d817a667df1fb199417a20e490d" kindref="member">add_target</ref>(self,<sp/>targetname,<sp/>refuri,<sp/>target,<sp/>lineno):</highlight></codeline>
<codeline lineno="2003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target.line<sp/>=<sp/>lineno</highlight></codeline>
<codeline lineno="2004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>targetname:</highlight></codeline>
<codeline lineno="2005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>normalize_name(unescape(targetname))</highlight></codeline>
<codeline lineno="2006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">].append(name)</highlight></codeline>
<codeline lineno="2007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>refuri:</highlight></codeline>
<codeline lineno="2008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uri<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab2f32a611bef1b1c6ddbfddd91d58075" kindref="member">inliner</ref>.adjust_uri(refuri)</highlight></codeline>
<codeline lineno="2009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>uri:</highlight></codeline>
<codeline lineno="2010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target[</highlight><highlight class="stringliteral">&apos;refuri&apos;</highlight><highlight class="normal">]<sp/>=<sp/>uri</highlight></codeline>
<codeline lineno="2011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1ApplicationError" kindref="compound">ApplicationError</ref>(</highlight><highlight class="stringliteral">&apos;problem<sp/>with<sp/>URI:<sp/>%r&apos;</highlight><highlight class="normal"><sp/>%<sp/>refuri)</highlight></codeline>
<codeline lineno="2013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_explicit_target(target,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref>)</highlight></codeline>
<codeline lineno="2014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>anonymous<sp/>target</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>refuri:</highlight></codeline>
<codeline lineno="2016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target[</highlight><highlight class="stringliteral">&apos;refuri&apos;</highlight><highlight class="normal">]<sp/>=<sp/>refuri</highlight></codeline>
<codeline lineno="2017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target[</highlight><highlight class="stringliteral">&apos;anonymous&apos;</highlight><highlight class="normal">]<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="2018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_anonymous_target(target)</highlight></codeline>
<codeline lineno="2019"><highlight class="normal"></highlight></codeline>
<codeline lineno="2020"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a039202f6bdf2d82a6107f9c47f8ee186" kindref="member">substitution_def</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="2021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a742b37c4f19768c0d1967b54e5c83afe" kindref="member">explicit</ref>.patterns.substitution</highlight></codeline>
<codeline lineno="2022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="2023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(block,<sp/>indent,<sp/>offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end(),</highlight></codeline>
<codeline lineno="2025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strip_indent=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>(match.string[:match.end()]<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(block))</highlight></codeline>
<codeline lineno="2027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block.disconnect()</highlight></codeline>
<codeline lineno="2028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>escaped<sp/>=<sp/>escape2null(block[0].rstrip())</highlight></codeline>
<codeline lineno="2029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blockindex<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="2030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subdefmatch<sp/>=<sp/>pattern.match(escaped)</highlight></codeline>
<codeline lineno="2032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>subdefmatch:</highlight></codeline>
<codeline lineno="2033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blockindex<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="2035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>escaped<sp/>=<sp/>escaped<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal"><sp/>+<sp/>escape2null(</highlight></codeline>
<codeline lineno="2037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block[blockindex].strip())</highlight></codeline>
<codeline lineno="2038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>IndexError:</highlight></codeline>
<codeline lineno="2039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" kindref="compound">MarkupError</ref>(</highlight><highlight class="stringliteral">&apos;malformed<sp/>substitution<sp/>definition.&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>block[:blockindex]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>strip<sp/>out<sp/>the<sp/>substitution<sp/>marker</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>start<sp/>=<sp/>subdefmatch.end()-len(escaped)-1</highlight></codeline>
<codeline lineno="2042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block[0]<sp/>=<sp/>(block[0].strip()<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">)[start:-1]</highlight></codeline>
<codeline lineno="2043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>block[0]:</highlight></codeline>
<codeline lineno="2044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>block[0]</highlight></codeline>
<codeline lineno="2045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="2046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>block<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>block[-1].strip():</highlight></codeline>
<codeline lineno="2047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block.pop()</highlight></codeline>
<codeline lineno="2048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>subname<sp/>=<sp/>subdefmatch.group(</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution_node<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1substitution__definition" kindref="compound">nodes.substitution_definition</ref>(blocktext)</highlight></codeline>
<codeline lineno="2050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution_node.source<sp/>=<sp/>src</highlight></codeline>
<codeline lineno="2051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution_node.line<sp/>=<sp/>srcline</highlight></codeline>
<codeline lineno="2052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>block:</highlight></codeline>
<codeline lineno="2053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="2054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Substitution<sp/>definition<sp/>&quot;%s&quot;<sp/>missing<sp/>contents.&apos;</highlight><highlight class="normal"><sp/>%<sp/>subname,</highlight></codeline>
<codeline lineno="2055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(blocktext,<sp/>blocktext),</highlight></codeline>
<codeline lineno="2056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>source=src,<sp/>line=srcline)</highlight></codeline>
<codeline lineno="2057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[msg],<sp/>blank_finish</highlight></codeline>
<codeline lineno="2058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block[0]<sp/>=<sp/>block[0].strip()</highlight></codeline>
<codeline lineno="2059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution_node[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">].append(</highlight></codeline>
<codeline lineno="2060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodes.whitespace_normalize_name(subname))</highlight></codeline>
<codeline lineno="2061"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_abs_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="2062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block,<sp/>input_offset=offset,<sp/>node=substitution_node,</highlight></codeline>
<codeline lineno="2063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initial_state=</highlight><highlight class="stringliteral">&apos;SubstitutionDef&apos;</highlight><highlight class="normal">,<sp/>blank_finish=blank_finish)</highlight></codeline>
<codeline lineno="2064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="2065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>node<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>substitution_node[:]:</highlight></codeline>
<codeline lineno="2066"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>(isinstance(node,<sp/><ref refid="classdocutils_1_1nodes_1_1Inline" kindref="compound">nodes.Inline</ref>)</highlight></codeline>
<codeline lineno="2067"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>isinstance(node,<sp/><ref refid="classdocutils_1_1nodes_1_1Text" kindref="compound">nodes.Text</ref>)):</highlight></codeline>
<codeline lineno="2068"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>substitution_node[i]</highlight></codeline>
<codeline lineno="2069"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>substitution_node[i]</highlight></codeline>
<codeline lineno="2070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="2072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>node<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>substitution_node.findall(<ref refid="classdocutils_1_1nodes_1_1Element" kindref="compound">nodes.Element</ref>):</highlight></codeline>
<codeline lineno="2073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a97cc8e64b7040b573004b062da3d8aff" kindref="member">disallowed_inside_substitution_definitions</ref>(node):</highlight></codeline>
<codeline lineno="2074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pformat<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>node.pformat().rstrip())</highlight></codeline>
<codeline lineno="2075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight></codeline>
<codeline lineno="2076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Substitution<sp/>definition<sp/>contains<sp/>illegal<sp/>element<sp/>&lt;%s&gt;:&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2077"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>node.tagname,</highlight></codeline>
<codeline lineno="2078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pformat,<sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(blocktext,<sp/>blocktext),</highlight></codeline>
<codeline lineno="2079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>source=src,<sp/>line=srcline)</highlight></codeline>
<codeline lineno="2080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[msg],<sp/>blank_finish</highlight></codeline>
<codeline lineno="2081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(substitution_node)<sp/>==<sp/>0:</highlight></codeline>
<codeline lineno="2082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="2083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Substitution<sp/>definition<sp/>&quot;%s&quot;<sp/>empty<sp/>or<sp/>invalid.&apos;</highlight><highlight class="normal"><sp/>%<sp/>subname,</highlight></codeline>
<codeline lineno="2084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(blocktext,<sp/>blocktext),</highlight></codeline>
<codeline lineno="2085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>source=src,<sp/>line=srcline)</highlight></codeline>
<codeline lineno="2086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[msg],<sp/>blank_finish</highlight></codeline>
<codeline lineno="2087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.note_substitution_def(</highlight></codeline>
<codeline lineno="2088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution_node,<sp/>subname,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref>)</highlight></codeline>
<codeline lineno="2089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[substitution_node],<sp/>blank_finish</highlight></codeline>
<codeline lineno="2090"><highlight class="normal"></highlight></codeline>
<codeline lineno="2091"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a97cc8e64b7040b573004b062da3d8aff" kindref="member">disallowed_inside_substitution_definitions</ref>(self,<sp/>node):</highlight></codeline>
<codeline lineno="2092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(node[</highlight><highlight class="stringliteral">&apos;ids&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="2093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>isinstance(node,<sp/><ref refid="classdocutils_1_1nodes_1_1reference" kindref="compound">nodes.reference</ref>)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>node.get(</highlight><highlight class="stringliteral">&apos;anonymous&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>isinstance(node,<sp/><ref refid="classdocutils_1_1nodes_1_1footnote__reference" kindref="compound">nodes.footnote_reference</ref>)<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>node.get(</highlight><highlight class="stringliteral">&apos;auto&apos;</highlight><highlight class="normal">)):<sp/><sp/></highlight><highlight class="comment">#<sp/>noqa:<sp/>E501</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2098"><highlight class="normal"></highlight></codeline>
<codeline lineno="2099"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a01a2c2073b1b2910321cd549b5ef17ca" kindref="member">directive</ref>(self,<sp/>match,<sp/>**option_presets):</highlight></codeline>
<codeline lineno="2100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Returns<sp/>a<sp/>2-tuple:<sp/>list<sp/>of<sp/>nodes,<sp/>and<sp/>a<sp/>&quot;blank<sp/>finish&quot;<sp/>boolean.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>type_name<sp/>=<sp/>match.group(1)</highlight></codeline>
<codeline lineno="2102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directive_class,<sp/>messages<sp/>=<sp/>directives.directive(</highlight></codeline>
<codeline lineno="2103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>type_name,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref>.language,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>)</highlight></codeline>
<codeline lineno="2104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>messages</highlight></codeline>
<codeline lineno="2105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>directive_class:</highlight></codeline>
<codeline lineno="2106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ad6b1e83d56dc0a381e7f3dc68b829e07" kindref="member">run_directive</ref>(</highlight></codeline>
<codeline lineno="2107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directive_class,<sp/>match,<sp/>type_name,<sp/>option_presets)</highlight></codeline>
<codeline lineno="2108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a64362353b327f7fd8a90f0d510fcab73" kindref="member">unknown_directive</ref>(type_name)</highlight></codeline>
<codeline lineno="2110"><highlight class="normal"></highlight></codeline>
<codeline lineno="2111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ad6b1e83d56dc0a381e7f3dc68b829e07" kindref="member">run_directive</ref>(self,<sp/>directive,<sp/>match,<sp/>type_name,<sp/>option_presets):</highlight></codeline>
<codeline lineno="2112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2113"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parse<sp/>a<sp/>directive<sp/>then<sp/>run<sp/>its<sp/>directive<sp/>function.</highlight></codeline>
<codeline lineno="2114"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2115"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parameters:</highlight></codeline>
<codeline lineno="2116"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2117"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>`directive`:<sp/>The<sp/>class<sp/>implementing<sp/>the<sp/>directive.<sp/><sp/>Must<sp/>be</highlight></codeline>
<codeline lineno="2118"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a<sp/>subclass<sp/>of<sp/>`rst.Directive`.</highlight></codeline>
<codeline lineno="2119"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2120"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>`match`:<sp/>A<sp/>regular<sp/>expression<sp/>match<sp/>object<sp/>which<sp/>matched<sp/>the<sp/>first</highlight></codeline>
<codeline lineno="2121"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line<sp/>of<sp/>the<sp/>directive.</highlight></codeline>
<codeline lineno="2122"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2123"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>`type_name`:<sp/>The<sp/>directive<sp/>name,<sp/>as<sp/>used<sp/>in<sp/>the<sp/>source<sp/>text.</highlight></codeline>
<codeline lineno="2124"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2125"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>`option_presets`:<sp/>A<sp/>dictionary<sp/>of<sp/>preset<sp/>options,<sp/>defaults<sp/>for<sp/>the</highlight></codeline>
<codeline lineno="2126"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directive<sp/>options.<sp/><sp/>Currently,<sp/>only<sp/>an<sp/>&quot;alt&quot;<sp/>option<sp/>is<sp/>passed<sp/>by</highlight></codeline>
<codeline lineno="2127"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>substitution<sp/>definitions<sp/>(value:<sp/>the<sp/>substitution<sp/>name),<sp/>which<sp/>may</highlight></codeline>
<codeline lineno="2128"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>be<sp/>used<sp/>by<sp/>an<sp/>embedded<sp/>image<sp/>directive.</highlight></codeline>
<codeline lineno="2129"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2130"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Returns<sp/>a<sp/>2-tuple:<sp/>list<sp/>of<sp/>nodes,<sp/>and<sp/>a<sp/>&quot;blank<sp/>finish&quot;<sp/>boolean.</highlight></codeline>
<codeline lineno="2131"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(directive,<sp/>(FunctionType,<sp/>MethodType)):</highlight></codeline>
<codeline lineno="2133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedocutils_1_1parsers_1_1rst" kindref="compound">docutils.parsers.rst</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>convert_directive_function</highlight></codeline>
<codeline lineno="2134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directive<sp/>=<sp/>convert_directive_function(directive)</highlight></codeline>
<codeline lineno="2135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="2136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initial_line_offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset</highlight></codeline>
<codeline lineno="2137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end(),</highlight></codeline>
<codeline lineno="2139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strip_top=0)</highlight></codeline>
<codeline lineno="2140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block_text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[</highlight></codeline>
<codeline lineno="2141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initial_line_offset<sp/>:<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1])<sp/><sp/></highlight><highlight class="comment">#<sp/>noqa:<sp/>E203,E501</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arguments,<sp/>options,<sp/>content,<sp/>content_offset<sp/>=<sp/>(</highlight></codeline>
<codeline lineno="2144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac2560db2af6830d15809d7967096115b" kindref="member">parse_directive_block</ref>(indented,<sp/>line_offset,</highlight></codeline>
<codeline lineno="2145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directive,<sp/>option_presets))</highlight></codeline>
<codeline lineno="2146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>MarkupError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>detail:</highlight></codeline>
<codeline lineno="2147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>error<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight></codeline>
<codeline lineno="2148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Error<sp/>in<sp/>&quot;%s&quot;<sp/>directive:\n%s.&apos;</highlight><highlight class="normal"><sp/>%<sp/>(type_name,</highlight></codeline>
<codeline lineno="2149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(detail.args)),</highlight></codeline>
<codeline lineno="2150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(block_text,<sp/>block_text),<sp/>line=lineno)</highlight></codeline>
<codeline lineno="2151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[error],<sp/>blank_finish</highlight></codeline>
<codeline lineno="2152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directive_instance<sp/>=<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a01a2c2073b1b2910321cd549b5ef17ca" kindref="member">directive</ref>(</highlight></codeline>
<codeline lineno="2153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>type_name,<sp/>arguments,<sp/>options,<sp/>content,<sp/>lineno,</highlight></codeline>
<codeline lineno="2154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content_offset,<sp/>block_text,<sp/>self,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>)</highlight></codeline>
<codeline lineno="2155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>directive_instance.run()</highlight></codeline>
<codeline lineno="2157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1DirectiveError" kindref="compound">docutils.parsers.rst.DirectiveError</ref><sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>error:</highlight></codeline>
<codeline lineno="2158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg_node<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.system_message(error.level,<sp/>error.msg,</highlight></codeline>
<codeline lineno="2159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="2160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg_node<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(block_text,<sp/>block_text)</highlight></codeline>
<codeline lineno="2161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>[msg_node]</highlight></codeline>
<codeline lineno="2162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>isinstance(result,<sp/>list),<sp/>\</highlight></codeline>
<codeline lineno="2163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Directive<sp/>&quot;%s&quot;<sp/>must<sp/>return<sp/>a<sp/>list<sp/>of<sp/>nodes.&apos;</highlight><highlight class="normal"><sp/>%<sp/>type_name</highlight></codeline>
<codeline lineno="2164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(result)):</highlight></codeline>
<codeline lineno="2165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>isinstance(result[i],<sp/><ref refid="classdocutils_1_1nodes_1_1Node" kindref="compound">nodes.Node</ref>),<sp/>\</highlight></codeline>
<codeline lineno="2166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;Directive<sp/>&quot;%s&quot;<sp/>returned<sp/>non-Node<sp/>object<sp/>(index<sp/>%s):<sp/>%r&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>(type_name,<sp/>i,<sp/>result[i]))</highlight></codeline>
<codeline lineno="2168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(result,</highlight></codeline>
<codeline lineno="2169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.is_next_line_blank())</highlight></codeline>
<codeline lineno="2170"><highlight class="normal"></highlight></codeline>
<codeline lineno="2171"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac2560db2af6830d15809d7967096115b" kindref="member">parse_directive_block</ref>(self,<sp/>indented,<sp/>line_offset,<sp/>directive,</highlight></codeline>
<codeline lineno="2172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option_presets):</highlight></codeline>
<codeline lineno="2173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option_spec<sp/>=<sp/>directive.option_spec</highlight></codeline>
<codeline lineno="2174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>has_content<sp/>=<sp/>directive.has_content</highlight></codeline>
<codeline lineno="2175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indented<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>indented[0].strip():</highlight></codeline>
<codeline lineno="2176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented.trim_start()</highlight></codeline>
<codeline lineno="2177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line_offset<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="2178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>indented<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>indented[-1].strip():</highlight></codeline>
<codeline lineno="2179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented.trim_end()</highlight></codeline>
<codeline lineno="2180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indented<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>(directive.required_arguments</highlight></codeline>
<codeline lineno="2181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>directive.optional_arguments</highlight></codeline>
<codeline lineno="2182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>option_spec):</highlight></codeline>
<codeline lineno="2183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i,<sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enumerate(indented):</highlight></codeline>
<codeline lineno="2184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>line.strip():</highlight></codeline>
<codeline lineno="2185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="2188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arg_block<sp/>=<sp/>indented[:i]</highlight></codeline>
<codeline lineno="2189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>indented[i+1:]</highlight></codeline>
<codeline lineno="2190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content_offset<sp/>=<sp/>line_offset<sp/>+<sp/>i<sp/>+<sp/>1</highlight></codeline>
<codeline lineno="2191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>indented</highlight></codeline>
<codeline lineno="2193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content_offset<sp/>=<sp/>line_offset</highlight></codeline>
<codeline lineno="2194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arg_block<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>option_spec:</highlight></codeline>
<codeline lineno="2196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options,<sp/>arg_block<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac49f6487ebe69d167bd380b68394605b" kindref="member">parse_directive_options</ref>(</highlight></codeline>
<codeline lineno="2197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option_presets,<sp/>option_spec,<sp/>arg_block)</highlight></codeline>
<codeline lineno="2198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="2200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>arg_block<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>(directive.required_arguments</highlight></codeline>
<codeline lineno="2201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>directive.optional_arguments):</highlight></codeline>
<codeline lineno="2202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>arg_block<sp/>+<sp/>indented[i:]</highlight></codeline>
<codeline lineno="2203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content_offset<sp/>=<sp/>line_offset</highlight></codeline>
<codeline lineno="2204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arg_block<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>content<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>content[0].strip():</highlight></codeline>
<codeline lineno="2206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content.trim_start()</highlight></codeline>
<codeline lineno="2207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content_offset<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="2208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>directive.required_arguments<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>directive.optional_arguments:</highlight></codeline>
<codeline lineno="2209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arguments<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1aa47a5faa248b6b773e7de1d31d412dfa" kindref="member">parse_directive_arguments</ref>(</highlight></codeline>
<codeline lineno="2210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directive,<sp/>arg_block)</highlight></codeline>
<codeline lineno="2211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arguments<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>content<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>has_content:</highlight></codeline>
<codeline lineno="2214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" kindref="compound">MarkupError</ref>(</highlight><highlight class="stringliteral">&apos;no<sp/>content<sp/>permitted&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>arguments,<sp/>options,<sp/>content,<sp/>content_offset</highlight></codeline>
<codeline lineno="2216"><highlight class="normal"></highlight></codeline>
<codeline lineno="2217"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ac49f6487ebe69d167bd380b68394605b" kindref="member">parse_directive_options</ref>(self,<sp/>option_presets,<sp/>option_spec,<sp/>arg_block):</highlight></codeline>
<codeline lineno="2218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options<sp/>=<sp/>option_presets.copy()</highlight></codeline>
<codeline lineno="2219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i,<sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>enumerate(arg_block):</highlight></codeline>
<codeline lineno="2220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>re.match(Body.patterns[</highlight><highlight class="stringliteral">&apos;field_marker&apos;</highlight><highlight class="normal">],<sp/>line):</highlight></codeline>
<codeline lineno="2221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_block<sp/>=<sp/>arg_block[i:]</highlight></codeline>
<codeline lineno="2222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arg_block<sp/>=<sp/>arg_block[:i]</highlight></codeline>
<codeline lineno="2223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_block<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>opt_block:</highlight></codeline>
<codeline lineno="2227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>success,<sp/>data<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ae9a63f4fa092e65e17bb9428d6e02794" kindref="member">parse_extension_options</ref>(option_spec,</highlight></codeline>
<codeline lineno="2228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>opt_block)</highlight></codeline>
<codeline lineno="2229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>success:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>data<sp/>is<sp/>a<sp/>dict<sp/>of<sp/>options</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options.update(data)</highlight></codeline>
<codeline lineno="2231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>data<sp/>is<sp/>an<sp/>error<sp/>string</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" kindref="compound">MarkupError</ref>(data)</highlight></codeline>
<codeline lineno="2233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>options,<sp/>arg_block</highlight></codeline>
<codeline lineno="2234"><highlight class="normal"></highlight></codeline>
<codeline lineno="2235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1aa47a5faa248b6b773e7de1d31d412dfa" kindref="member">parse_directive_arguments</ref>(self,<sp/>directive,<sp/>arg_block):</highlight></codeline>
<codeline lineno="2236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>required<sp/>=<sp/>directive.required_arguments</highlight></codeline>
<codeline lineno="2237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optional<sp/>=<sp/>directive.optional_arguments</highlight></codeline>
<codeline lineno="2238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arg_text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(arg_block)</highlight></codeline>
<codeline lineno="2239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arguments<sp/>=<sp/>arg_text.split()</highlight></codeline>
<codeline lineno="2240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(arguments)<sp/>&lt;<sp/>required:</highlight></codeline>
<codeline lineno="2241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" kindref="compound">MarkupError</ref>(</highlight><highlight class="stringliteral">&apos;%s<sp/>argument(s)<sp/>required,<sp/>%s<sp/>supplied&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>(required,<sp/>len(arguments)))</highlight></codeline>
<codeline lineno="2243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>len(arguments)<sp/>&gt;<sp/>required<sp/>+<sp/>optional:</highlight></codeline>
<codeline lineno="2244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>directive.final_argument_whitespace:</highlight></codeline>
<codeline lineno="2245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arguments<sp/>=<sp/>arg_text.split(</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>required<sp/>+<sp/>optional<sp/>-<sp/>1)</highlight></codeline>
<codeline lineno="2246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1MarkupError" kindref="compound">MarkupError</ref>(</highlight></codeline>
<codeline lineno="2248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;maximum<sp/>%s<sp/>argument(s)<sp/>allowed,<sp/>%s<sp/>supplied&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>(required<sp/>+<sp/>optional,<sp/>len(arguments)))</highlight></codeline>
<codeline lineno="2250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>arguments</highlight></codeline>
<codeline lineno="2251"><highlight class="normal"></highlight></codeline>
<codeline lineno="2252"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ae9a63f4fa092e65e17bb9428d6e02794" kindref="member">parse_extension_options</ref>(self,<sp/>option_spec,<sp/>datalines):</highlight></codeline>
<codeline lineno="2253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2254"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Parse<sp/>`datalines`<sp/>for<sp/>a<sp/>field<sp/>list<sp/>containing<sp/>extension<sp/>options</highlight></codeline>
<codeline lineno="2255"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>matching<sp/>`option_spec`.</highlight></codeline>
<codeline lineno="2256"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2257"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:Parameters:</highlight></codeline>
<codeline lineno="2258"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>`option_spec`:<sp/>a<sp/>mapping<sp/>of<sp/>option<sp/>name<sp/>to<sp/>conversion</highlight></codeline>
<codeline lineno="2259"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>function,<sp/>which<sp/>should<sp/>raise<sp/>an<sp/>exception<sp/>on<sp/>bad<sp/>input.</highlight></codeline>
<codeline lineno="2260"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>`datalines`:<sp/>a<sp/>list<sp/>of<sp/>input<sp/>strings.</highlight></codeline>
<codeline lineno="2261"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2262"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>:Return:</highlight></codeline>
<codeline lineno="2263"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>Success<sp/>value,<sp/>1<sp/>or<sp/>0.</highlight></codeline>
<codeline lineno="2264"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>An<sp/>option<sp/>dictionary<sp/>on<sp/>success,<sp/>an<sp/>error<sp/>string<sp/>on<sp/>failure.</highlight></codeline>
<codeline lineno="2265"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1field__list" kindref="compound">nodes.field_list</ref>()</highlight></codeline>
<codeline lineno="2267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newline_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="2268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>datalines,<sp/>0,<sp/>node,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;ExtensionOptions&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>newline_offset<sp/>!=<sp/>len(datalines):<sp/><sp/></highlight><highlight class="comment">#<sp/>incomplete<sp/>parse<sp/>of<sp/>block</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0,<sp/></highlight><highlight class="stringliteral">&apos;invalid<sp/>option<sp/>block&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options<sp/>=<sp/>utils.extract_extension_options(node,<sp/>option_spec)</highlight></codeline>
<codeline lineno="2274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>KeyError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>detail:</highlight></codeline>
<codeline lineno="2275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0,<sp/></highlight><highlight class="stringliteral">&apos;unknown<sp/>option:<sp/>&quot;%s&quot;&apos;</highlight><highlight class="normal"><sp/>%<sp/>detail.args[0]</highlight></codeline>
<codeline lineno="2276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>(ValueError,<sp/>TypeError)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>detail:</highlight></codeline>
<codeline lineno="2277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0,<sp/></highlight><highlight class="stringliteral">&apos;invalid<sp/>option<sp/>value:<sp/>%s&apos;</highlight><highlight class="normal"><sp/>%<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(detail.args)</highlight></codeline>
<codeline lineno="2278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1utils_1_1ExtensionOptionError" kindref="compound">utils.ExtensionOptionError</ref><sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>detail:</highlight></codeline>
<codeline lineno="2279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0,<sp/></highlight><highlight class="stringliteral">&apos;invalid<sp/>option<sp/>data:<sp/>%s&apos;</highlight><highlight class="normal"><sp/>%<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(detail.args)</highlight></codeline>
<codeline lineno="2280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="2281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1,<sp/>options</highlight></codeline>
<codeline lineno="2282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0,<sp/></highlight><highlight class="stringliteral">&apos;option<sp/>data<sp/>incompletely<sp/>parsed&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2284"><highlight class="normal"></highlight></codeline>
<codeline lineno="2285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a64362353b327f7fd8a90f0d510fcab73" kindref="member">unknown_directive</ref>(self,<sp/>type_name):</highlight></codeline>
<codeline lineno="2286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="2287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(0,<sp/>strip_indent=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented)</highlight></codeline>
<codeline lineno="2290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>error<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight><highlight class="stringliteral">&apos;Unknown<sp/>directive<sp/>type<sp/>&quot;%s&quot;.&apos;</highlight><highlight class="normal"><sp/>%<sp/>type_name,</highlight></codeline>
<codeline lineno="2291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(text,<sp/>text),</highlight></codeline>
<codeline lineno="2292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="2293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[error],<sp/>blank_finish</highlight></codeline>
<codeline lineno="2294"><highlight class="normal"></highlight></codeline>
<codeline lineno="2295"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1aba9f798705cc25f0318e02f599fbf705" kindref="member">comment</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="2296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.is_next_line_blank():</highlight></codeline>
<codeline lineno="2297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>first_comment_line<sp/>=<sp/>match.string[match.end():]</highlight></codeline>
<codeline lineno="2298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>first_comment_line.strip():<sp/><sp/></highlight><highlight class="comment">#<sp/>empty<sp/>comment</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[<ref refid="classdocutils_1_1nodes_1_1comment" kindref="compound">nodes.comment</ref>()],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>&quot;A<sp/>tiny<sp/>but<sp/>practical<sp/>wart.&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>first_comment_line.startswith(</highlight><highlight class="stringliteral">&apos;end<sp/>of<sp/>inclusion<sp/>from<sp/>&quot;&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="2301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>cf.<sp/>parsers.rst.directives.misc.Include</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ad05309b955d4186dc04bdf6808f171f2" kindref="member">document</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a45b8af82571fa21212c12d990f11d62d" kindref="member">document</ref>.include_log.pop()</highlight></codeline>
<codeline lineno="2303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end())</highlight></codeline>
<codeline lineno="2306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>indented<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>indented[-1].strip():</highlight></codeline>
<codeline lineno="2307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented.trim_end()</highlight></codeline>
<codeline lineno="2308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented)</highlight></codeline>
<codeline lineno="2309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[<ref refid="classdocutils_1_1nodes_1_1comment" kindref="compound">nodes.comment</ref>(text,<sp/>text)],<sp/>blank_finish</highlight></codeline>
<codeline lineno="2310"><highlight class="normal"></highlight></codeline>
<codeline lineno="2311"><highlight class="normal"><sp/><sp/><sp/><sp/>explicit.constructs<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="2312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(footnote,</highlight></codeline>
<codeline lineno="2313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>re.compile(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2314"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\.\.[<sp/>]+<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>explicit<sp/>markup<sp/>start</highlight></codeline>
<codeline lineno="2315"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\[</highlight></codeline>
<codeline lineno="2316"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>footnote<sp/>label:</highlight></codeline>
<codeline lineno="2317"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[0-9]+<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>manually<sp/>numbered<sp/>footnote</highlight></codeline>
<codeline lineno="2318"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>*OR*</highlight></codeline>
<codeline lineno="2319"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\#<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>anonymous<sp/>auto-numbered<sp/>footnote</highlight></codeline>
<codeline lineno="2320"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>*OR*</highlight></codeline>
<codeline lineno="2321"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\#%s<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>auto-number<sp/>ed?)<sp/>footnote<sp/>label</highlight></codeline>
<codeline lineno="2322"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>*OR*</highlight></codeline>
<codeline lineno="2323"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>auto-symbol<sp/>footnote</highlight></codeline>
<codeline lineno="2324"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="2325"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\]</highlight></codeline>
<codeline lineno="2326"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>([<sp/>]+|$)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>whitespace<sp/>or<sp/>end<sp/>of<sp/>line</highlight></codeline>
<codeline lineno="2327"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>Inliner.simplename,<sp/>re.VERBOSE)),</highlight></codeline>
<codeline lineno="2328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(citation,</highlight></codeline>
<codeline lineno="2329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>re.compile(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2330"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\.\.[<sp/>]+<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>explicit<sp/>markup<sp/>start</highlight></codeline>
<codeline lineno="2331"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\[(%s)\]<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>citation<sp/>label</highlight></codeline>
<codeline lineno="2332"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>([<sp/>]+|$)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>whitespace<sp/>or<sp/>end<sp/>of<sp/>line</highlight></codeline>
<codeline lineno="2333"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>Inliner.simplename,<sp/>re.VERBOSE)),</highlight></codeline>
<codeline lineno="2334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(hyperlink_target,</highlight></codeline>
<codeline lineno="2335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>re.compile(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2336"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\.\.[<sp/>]+<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>explicit<sp/>markup<sp/>start</highlight></codeline>
<codeline lineno="2337"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>target<sp/>indicator</highlight></codeline>
<codeline lineno="2338"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?![<sp/>]|$)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>first<sp/>char.<sp/>not<sp/>space<sp/>or<sp/>EOL</highlight></codeline>
<codeline lineno="2339"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">,<sp/>re.VERBOSE)),</highlight></codeline>
<codeline lineno="2340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(substitution_def,</highlight></codeline>
<codeline lineno="2341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>re.compile(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2342"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\.\.[<sp/>]+<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>explicit<sp/>markup<sp/>start</highlight></codeline>
<codeline lineno="2343"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\|<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>substitution<sp/>indicator</highlight></codeline>
<codeline lineno="2344"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(?![<sp/>]|$)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>first<sp/>char.<sp/>not<sp/>space<sp/>or<sp/>EOL</highlight></codeline>
<codeline lineno="2345"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal">,<sp/>re.VERBOSE)),</highlight></codeline>
<codeline lineno="2346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(directive,</highlight></codeline>
<codeline lineno="2347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>re.compile(</highlight><highlight class="stringliteral">r&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2348"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>\.\.[<sp/>]+<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>explicit<sp/>markup<sp/>start</highlight></codeline>
<codeline lineno="2349"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(%s)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>directive<sp/>name</highlight></codeline>
<codeline lineno="2350"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[<sp/>]?<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>optional<sp/>space</highlight></codeline>
<codeline lineno="2351"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>::<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>directive<sp/>delimiter</highlight></codeline>
<codeline lineno="2352"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>([<sp/>]+|$)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#<sp/>whitespace<sp/>or<sp/>end<sp/>of<sp/>line</highlight></codeline>
<codeline lineno="2353"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"><sp/>%<sp/>Inliner.simplename,<sp/>re.VERBOSE))]</highlight></codeline>
<codeline lineno="2354"><highlight class="normal"></highlight></codeline>
<codeline lineno="2355"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a38855a687ea7aa4b89a55479d3b28ade" kindref="member">explicit_markup</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Footnotes,<sp/>hyperlink<sp/>targets,<sp/>directives,<sp/>comments.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1acfe1842b1114a0bba1c213c15eedbee2" kindref="member">explicit_construct</ref>(match)</highlight></codeline>
<codeline lineno="2358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>nodelist</highlight></codeline>
<codeline lineno="2359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a68de20fb1e39d9c39000a36669368291" kindref="member">explicit_list</ref>(blank_finish)</highlight></codeline>
<codeline lineno="2360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2361"><highlight class="normal"></highlight></codeline>
<codeline lineno="2362"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1acfe1842b1114a0bba1c213c15eedbee2" kindref="member">explicit_construct</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="2363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Determine<sp/>which<sp/>explicit<sp/>construct<sp/>this<sp/>is,<sp/>parse<sp/>&amp;<sp/>return<sp/>it.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errors<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>method,<sp/>pattern<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a742b37c4f19768c0d1967b54e5c83afe" kindref="member">explicit</ref>.constructs:</highlight></codeline>
<codeline lineno="2366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expmatch<sp/>=<sp/>pattern.match(match.string)</highlight></codeline>
<codeline lineno="2367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>expmatch:</highlight></codeline>
<codeline lineno="2368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>method(self,<sp/>expmatch)</highlight></codeline>
<codeline lineno="2370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>MarkupError<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>error:</highlight></codeline>
<codeline lineno="2371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="2372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">.join(error.args)</highlight></codeline>
<codeline lineno="2373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>errors.append(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(message,<sp/>line=lineno))</highlight></codeline>
<codeline lineno="2374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1aba9f798705cc25f0318e02f599fbf705" kindref="member">comment</ref>(match)</highlight></codeline>
<codeline lineno="2376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nodelist<sp/>+<sp/>errors,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2377"><highlight class="normal"></highlight></codeline>
<codeline lineno="2378"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a68de20fb1e39d9c39000a36669368291" kindref="member">explicit_list</ref>(self,<sp/>blank_finish):</highlight></codeline>
<codeline lineno="2379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2380"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Create<sp/>a<sp/>nested<sp/>state<sp/>machine<sp/>for<sp/>a<sp/>series<sp/>of<sp/>explicit<sp/>markup</highlight></codeline>
<codeline lineno="2381"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>constructs<sp/>(including<sp/>anonymous<sp/>hyperlink<sp/>targets).</highlight></codeline>
<codeline lineno="2382"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>next<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newline_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="2385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="2386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="2387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref>,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;Explicit&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=blank_finish,</highlight></codeline>
<codeline lineno="2389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match_titles=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.match_titles)</highlight></codeline>
<codeline lineno="2390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(newline_offset)</highlight></codeline>
<codeline lineno="2391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="2392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Explicit<sp/>markup&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2393"><highlight class="normal"></highlight></codeline>
<codeline lineno="2394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a360d91f83fb60e90022b65db625e730e" kindref="member">anonymous</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Anonymous<sp/>hyperlink<sp/>targets.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a945fdd8b66ffd8c19bd4754a0568173d" kindref="member">anonymous_target</ref>(match)</highlight></codeline>
<codeline lineno="2397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>nodelist</highlight></codeline>
<codeline lineno="2398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a68de20fb1e39d9c39000a36669368291" kindref="member">explicit_list</ref>(blank_finish)</highlight></codeline>
<codeline lineno="2399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2400"><highlight class="normal"></highlight></codeline>
<codeline lineno="2401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a945fdd8b66ffd8c19bd4754a0568173d" kindref="member">anonymous_target</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="2402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="2403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(block,<sp/>indent,<sp/>offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end(),</highlight></codeline>
<codeline lineno="2405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>until_blank=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>match.string[:match.end()]<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(block)</highlight></codeline>
<codeline lineno="2407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>=<sp/>[escape2null(line)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>block]</highlight></codeline>
<codeline lineno="2408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>target<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a9c8179115937db8bb0d4b60a9a462666" kindref="member">make_target</ref>(block,<sp/>blocktext,<sp/>lineno,<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[target],<sp/>blank_finish</highlight></codeline>
<codeline lineno="2410"><highlight class="normal"></highlight></codeline>
<codeline lineno="2411"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">line(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Section<sp/>title<sp/>overline<sp/>or<sp/>transition<sp/>marker.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.match_titles:</highlight></codeline>
<codeline lineno="2414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[match.string],<sp/></highlight><highlight class="stringliteral">&apos;Line&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>match.string.strip()<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;::&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1statemachine_1_1TransitionCorrection" kindref="compound">statemachine.TransitionCorrection</ref>(</highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>len(match.string.strip())<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="2418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.info(</highlight></codeline>
<codeline lineno="2419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Unexpected<sp/>possible<sp/>title<sp/>overline<sp/>or<sp/>transition.\n&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Treating<sp/>it<sp/>as<sp/>ordinary<sp/>text<sp/>because<sp/>it&apos;s<sp/>so<sp/>short.&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number())</highlight></codeline>
<codeline lineno="2422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="2423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1statemachine_1_1TransitionCorrection" kindref="compound">statemachine.TransitionCorrection</ref>(</highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line</highlight></codeline>
<codeline lineno="2426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.severe(</highlight></codeline>
<codeline lineno="2427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Unexpected<sp/>section<sp/>title<sp/>or<sp/>transition.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(blocktext,<sp/>blocktext),</highlight></codeline>
<codeline lineno="2429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number())</highlight></codeline>
<codeline lineno="2430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="2431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2432"><highlight class="normal"></highlight></codeline>
<codeline lineno="2433"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a654ad0b1cd6845d4e1d6f81dae6969dd" kindref="member">text</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Titles,<sp/>definition<sp/>lists,<sp/>paragraphs.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[match.string],<sp/></highlight><highlight class="stringliteral">&apos;Text&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2436"><highlight class="normal"></highlight></codeline>
<codeline lineno="2437"><highlight class="normal"></highlight></codeline>
<codeline lineno="2438" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822Body" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822Body" kindref="compound">RFC2822Body</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body" kindref="compound">Body</ref>):</highlight></codeline>
<codeline lineno="2439"><highlight class="normal"></highlight></codeline>
<codeline lineno="2440"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2441"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>RFC2822<sp/>headers<sp/>are<sp/>only<sp/>valid<sp/>as<sp/>the<sp/>first<sp/>constructs<sp/>in<sp/>documents.<sp/><sp/>As</highlight></codeline>
<codeline lineno="2442"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>soon<sp/>as<sp/>anything<sp/>else<sp/>appears,<sp/>the<sp/>`Body`<sp/>state<sp/>should<sp/>take<sp/>over.</highlight></codeline>
<codeline lineno="2443"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2444"><highlight class="normal"></highlight></codeline>
<codeline lineno="2445"><highlight class="normal"><sp/><sp/><sp/><sp/>patterns<sp/>=<sp/>Body.patterns.copy()<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>can&apos;t<sp/>modify<sp/>the<sp/>original</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2446"><highlight class="normal"><sp/><sp/><sp/><sp/>patterns[</highlight><highlight class="stringliteral">&apos;rfc2822&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">r&apos;[!-9;-~]+:(<sp/>+|$)&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2447"><highlight class="normal"><sp/><sp/><sp/><sp/>initial_transitions<sp/>=<sp/>[(name,<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>Body.initial_transitions]</highlight></codeline>
<codeline lineno="2449"><highlight class="normal"><sp/><sp/><sp/><sp/>initial_transitions.insert(-1,<sp/>(</highlight><highlight class="stringliteral">&apos;rfc2822&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">))<sp/><sp/></highlight><highlight class="comment">#<sp/>just<sp/>before<sp/>&apos;text&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2450"><highlight class="normal"></highlight></codeline>
<codeline lineno="2451"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822Body_1a220f596048b73109d7c00f71877bb431" kindref="member">rfc2822</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;RFC2822-style<sp/>field<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fieldlist<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1field__list" kindref="compound">nodes.field_list</ref>(classes=[</highlight><highlight class="stringliteral">&apos;rfc2822&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="2454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>fieldlist</highlight></codeline>
<codeline lineno="2455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822Body_1a9a4ea62bdfa2d79acb7314e31b9dae8e" kindref="member">rfc2822_field</ref>(match)</highlight></codeline>
<codeline lineno="2456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fieldlist<sp/>+=<sp/>field</highlight></codeline>
<codeline lineno="2457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1<sp/><sp/></highlight><highlight class="comment">#<sp/>next<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newline_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="2459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="2460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="2461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=fieldlist,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;RFC2822List&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=blank_finish)</highlight></codeline>
<codeline lineno="2463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(newline_offset)</highlight></codeline>
<codeline lineno="2464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="2465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight></codeline>
<codeline lineno="2466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;RFC2822-style<sp/>field<sp/>list&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2468"><highlight class="normal"></highlight></codeline>
<codeline lineno="2469"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822Body_1a9a4ea62bdfa2d79acb7314e31b9dae8e" kindref="member">rfc2822_field</ref>(self,<sp/>match):</highlight></codeline>
<codeline lineno="2470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>match.string[:match.string.find(</highlight><highlight class="stringliteral">&apos;:&apos;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="2471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_first_known_indented(match.end(),</highlight></codeline>
<codeline lineno="2473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>until_blank=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fieldnode<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1field" kindref="compound">nodes.field</ref>()</highlight></codeline>
<codeline lineno="2475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fieldnode<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1field__name" kindref="compound">nodes.field_name</ref>(name,<sp/>name)</highlight></codeline>
<codeline lineno="2476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fieldbody<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1field__body" kindref="compound">nodes.field_body</ref>(</highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented))</highlight></codeline>
<codeline lineno="2477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fieldnode<sp/>+=<sp/>fieldbody</highlight></codeline>
<codeline lineno="2478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>indented:</highlight></codeline>
<codeline lineno="2479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(indented,<sp/>input_offset=line_offset,</highlight></codeline>
<codeline lineno="2480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=fieldbody)</highlight></codeline>
<codeline lineno="2481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>fieldnode,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2482"><highlight class="normal"></highlight></codeline>
<codeline lineno="2483"><highlight class="normal"></highlight></codeline>
<codeline lineno="2484" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body" kindref="compound">Body</ref>):</highlight></codeline>
<codeline lineno="2485"><highlight class="normal"></highlight></codeline>
<codeline lineno="2486"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2487"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Superclass<sp/>for<sp/>second<sp/>and<sp/>subsequent<sp/>compound<sp/>element<sp/>members.<sp/><sp/>Compound</highlight></codeline>
<codeline lineno="2488"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>elements<sp/>are<sp/>lists<sp/>and<sp/>list-like<sp/>constructs.</highlight></codeline>
<codeline lineno="2489"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2490"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>All<sp/>transition<sp/>methods<sp/>are<sp/>disabled<sp/>(redefined<sp/>as<sp/>`invalid_input`).</highlight></codeline>
<codeline lineno="2491"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Override<sp/>individual<sp/>methods<sp/>in<sp/>subclasses<sp/>to<sp/>re-enable.</highlight></codeline>
<codeline lineno="2492"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2493"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>For<sp/>example,<sp/>once<sp/>an<sp/>initial<sp/>bullet<sp/>list<sp/>item,<sp/>say,<sp/>is<sp/>recognized,<sp/>the</highlight></codeline>
<codeline lineno="2494"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>`BulletList`<sp/>subclass<sp/>takes<sp/>over,<sp/>with<sp/>a<sp/>&quot;bullet_list&quot;<sp/>node<sp/>as<sp/>its</highlight></codeline>
<codeline lineno="2495"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>container.<sp/><sp/>Upon<sp/>encountering<sp/>the<sp/>initial<sp/>bullet<sp/>list<sp/>item,<sp/>`Body.bullet`</highlight></codeline>
<codeline lineno="2496"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>calls<sp/>its<sp/>``self.nested_list_parse``<sp/>(`RSTState.nested_list_parse`),<sp/>which</highlight></codeline>
<codeline lineno="2497"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>starts<sp/>up<sp/>a<sp/>nested<sp/>parsing<sp/>session<sp/>with<sp/>`BulletList`<sp/>as<sp/>the<sp/>initial<sp/>state.</highlight></codeline>
<codeline lineno="2498"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Only<sp/>the<sp/>``bullet``<sp/>transition<sp/>method<sp/>is<sp/>enabled<sp/>in<sp/>`BulletList`;<sp/>as<sp/>long</highlight></codeline>
<codeline lineno="2499"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>as<sp/>only<sp/>bullet<sp/>list<sp/>items<sp/>are<sp/>encountered,<sp/>they<sp/>are<sp/>parsed<sp/>and<sp/>inserted</highlight></codeline>
<codeline lineno="2500"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>into<sp/>the<sp/>container.<sp/><sp/>The<sp/>first<sp/>construct<sp/>which<sp/>is<sp/>*not*<sp/>a<sp/>bullet<sp/>list<sp/>item</highlight></codeline>
<codeline lineno="2501"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>triggers<sp/>the<sp/>`invalid_input`<sp/>method,<sp/>which<sp/>ends<sp/>the<sp/>nested<sp/>parse<sp/>and</highlight></codeline>
<codeline lineno="2502"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>closes<sp/>the<sp/>container.<sp/><sp/>`BulletList`<sp/>needs<sp/>to<sp/>recognize<sp/>input<sp/>that<sp/>is</highlight></codeline>
<codeline lineno="2503"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>invalid<sp/>in<sp/>the<sp/>context<sp/>of<sp/>a<sp/>bullet<sp/>list,<sp/>which<sp/>means<sp/>everything<sp/>*other</highlight></codeline>
<codeline lineno="2504"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>than*<sp/>bullet<sp/>list<sp/>items,<sp/>so<sp/>it<sp/>inherits<sp/>the<sp/>transition<sp/>list<sp/>created<sp/>in</highlight></codeline>
<codeline lineno="2505"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>`Body`.</highlight></codeline>
<codeline lineno="2506"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2507"><highlight class="normal"></highlight></codeline>
<codeline lineno="2508"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1ac4b35e29a2575aa74b7c668cc99b47af" kindref="member">invalid_input</ref>(self,<sp/>match=None,<sp/>context=None,<sp/>next_state=None):</highlight></codeline>
<codeline lineno="2509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Not<sp/>a<sp/>compound<sp/>element<sp/>member.<sp/>Abort<sp/>this<sp/>state<sp/>machine.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line()<sp/><sp/></highlight><highlight class="comment">#<sp/>back<sp/>up<sp/>so<sp/>parent<sp/>SM<sp/>can<sp/>reassess</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError</highlight></codeline>
<codeline lineno="2512"><highlight class="normal"></highlight></codeline>
<codeline lineno="2513"><highlight class="normal"><sp/><sp/><sp/><sp/>indent<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2514"><highlight class="normal"><sp/><sp/><sp/><sp/>bullet<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2515"><highlight class="normal"><sp/><sp/><sp/><sp/>enumerator<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2516"><highlight class="normal"><sp/><sp/><sp/><sp/>field_marker<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2517"><highlight class="normal"><sp/><sp/><sp/><sp/>option_marker<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2518"><highlight class="normal"><sp/><sp/><sp/><sp/>doctest<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2519"><highlight class="normal"><sp/><sp/><sp/><sp/>line_block<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2520"><highlight class="normal"><sp/><sp/><sp/><sp/>grid_table_top<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2521"><highlight class="normal"><sp/><sp/><sp/><sp/>simple_table_top<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2522"><highlight class="normal"><sp/><sp/><sp/><sp/>explicit_markup<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2523"><highlight class="normal"><sp/><sp/><sp/><sp/>anonymous<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2524"><highlight class="normal"><sp/><sp/><sp/><sp/>line<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2525"><highlight class="normal"><sp/><sp/><sp/><sp/>text<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2526"><highlight class="normal"></highlight></codeline>
<codeline lineno="2527"><highlight class="normal"></highlight></codeline>
<codeline lineno="2528" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1BulletList" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1BulletList" kindref="compound">BulletList</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>):</highlight></codeline>
<codeline lineno="2529"><highlight class="normal"></highlight></codeline>
<codeline lineno="2530"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>and<sp/>subsequent<sp/>bullet_list<sp/>list_items.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2531"><highlight class="normal"></highlight></codeline>
<codeline lineno="2532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1a0594609cab4873f0b183b6e8a76bd5b5" kindref="member">bullet</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Bullet<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>match.string[0]<sp/>!=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref>[</highlight><highlight class="stringliteral">&apos;bullet&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="2535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>different<sp/>bullet:<sp/>new<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1ac4b35e29a2575aa74b7c668cc99b47af" kindref="member">invalid_input</ref>()</highlight></codeline>
<codeline lineno="2537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>listitem,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a52fd1c8a60f3ad05db3a0592aee89fdd" kindref="member">list_item</ref>(match.end())</highlight></codeline>
<codeline lineno="2538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>listitem</highlight></codeline>
<codeline lineno="2539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1BulletList_1aa185608e5662ec51f8aebbb99d1d70b8" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2541"><highlight class="normal"></highlight></codeline>
<codeline lineno="2542"><highlight class="normal"></highlight></codeline>
<codeline lineno="2543" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1DefinitionList" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1DefinitionList" kindref="compound">DefinitionList</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>):</highlight></codeline>
<codeline lineno="2544"><highlight class="normal"></highlight></codeline>
<codeline lineno="2545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>and<sp/>subsequent<sp/>definition_list_items.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2546"><highlight class="normal"></highlight></codeline>
<codeline lineno="2547"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1a65f29e8fedf3e776e7196c4882eaadf2" kindref="member">text</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Definition<sp/>lists.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[match.string],<sp/></highlight><highlight class="stringliteral">&apos;Definition&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2550"><highlight class="normal"></highlight></codeline>
<codeline lineno="2551"><highlight class="normal"></highlight></codeline>
<codeline lineno="2552" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1EnumeratedList" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1EnumeratedList" kindref="compound">EnumeratedList</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>):</highlight></codeline>
<codeline lineno="2553"><highlight class="normal"></highlight></codeline>
<codeline lineno="2554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>and<sp/>subsequent<sp/>enumerated_list<sp/>list_items.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2555"><highlight class="normal"></highlight></codeline>
<codeline lineno="2556"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1ad04de7b73693663d9c6571b06a593bad" kindref="member">enumerator</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Enumerated<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>format,<sp/>sequence,<sp/>text,<sp/>ordinal<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1abcf11fb5a2f06b29ee0844292337acc7" kindref="member">parse_enumerator</ref>(</highlight></codeline>
<codeline lineno="2559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>match,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref>[</highlight><highlight class="stringliteral">&apos;enumtype&apos;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="2560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(format<sp/>!=<sp/>self.format</highlight></codeline>
<codeline lineno="2561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>(sequence<sp/>!=<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>(sequence<sp/>!=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref>[</highlight><highlight class="stringliteral">&apos;enumtype&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="2562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1EnumeratedList_1a12df4d495ad6a3a572843a2b3d9ade72" kindref="member">auto</ref></highlight></codeline>
<codeline lineno="2563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>ordinal<sp/>!=<sp/>(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1EnumeratedList_1afe03b0d74127eb520c7c411b15068f5c" kindref="member">lastordinal</ref><sp/>+<sp/>1)))</highlight></codeline>
<codeline lineno="2564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ad1b0b99b5c08daed4e8114526f79620b" kindref="member">is_enumerated_list_item</ref>(ordinal,<sp/>sequence,<sp/>format)):</highlight></codeline>
<codeline lineno="2565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>different<sp/>enumeration:<sp/>new<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1ac4b35e29a2575aa74b7c668cc99b47af" kindref="member">invalid_input</ref>()</highlight></codeline>
<codeline lineno="2567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>sequence<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;#&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1EnumeratedList_1a12df4d495ad6a3a572843a2b3d9ade72" kindref="member">auto</ref><sp/>=<sp/>1</highlight></codeline>
<codeline lineno="2569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>listitem,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a52fd1c8a60f3ad05db3a0592aee89fdd" kindref="member">list_item</ref>(match.end())</highlight></codeline>
<codeline lineno="2570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>listitem</highlight></codeline>
<codeline lineno="2571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1EnumeratedList_1a2cb066d6696d3299b63abebce87432a5" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1EnumeratedList_1afe03b0d74127eb520c7c411b15068f5c" kindref="member">lastordinal</ref><sp/>=<sp/>ordinal</highlight></codeline>
<codeline lineno="2573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2574"><highlight class="normal"></highlight></codeline>
<codeline lineno="2575"><highlight class="normal"></highlight></codeline>
<codeline lineno="2576" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1FieldList" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1FieldList" kindref="compound">FieldList</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>):</highlight></codeline>
<codeline lineno="2577"><highlight class="normal"></highlight></codeline>
<codeline lineno="2578"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>and<sp/>subsequent<sp/>field_list<sp/>fields.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2579"><highlight class="normal"></highlight></codeline>
<codeline lineno="2580"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1a3e8935c5a59ac6e27c5fc2aa94bd7d7d" kindref="member">field_marker</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Field<sp/>list<sp/>field.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1ad7427eacc497bcb7f2b491550158911d" kindref="member">field</ref>(match)</highlight></codeline>
<codeline lineno="2583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>field</highlight></codeline>
<codeline lineno="2584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1FieldList_1a0efb0f88d92694973ca69e88e5ff71b8" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2586"><highlight class="normal"></highlight></codeline>
<codeline lineno="2587"><highlight class="normal"></highlight></codeline>
<codeline lineno="2588" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1OptionList" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1OptionList" kindref="compound">OptionList</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>):</highlight></codeline>
<codeline lineno="2589"><highlight class="normal"></highlight></codeline>
<codeline lineno="2590"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>and<sp/>subsequent<sp/>option_list<sp/>option_list_items.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2591"><highlight class="normal"></highlight></codeline>
<codeline lineno="2592"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1adf534234ee1e700b0e858f96e8ed049e" kindref="member">option_marker</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Option<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>option_list_item,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a22c96723c1734e5603d47e88d0c74054" kindref="member">option_list_item</ref>(match)</highlight></codeline>
<codeline lineno="2596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>MarkupError:</highlight></codeline>
<codeline lineno="2597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1ac4b35e29a2575aa74b7c668cc99b47af" kindref="member">invalid_input</ref>()</highlight></codeline>
<codeline lineno="2598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>option_list_item</highlight></codeline>
<codeline lineno="2599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1OptionList_1a26a43bc411b66f0829a0e37f48e74f86" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2601"><highlight class="normal"></highlight></codeline>
<codeline lineno="2602"><highlight class="normal"></highlight></codeline>
<codeline lineno="2603" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822List" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822List" kindref="compound">RFC2822List</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>,<sp/><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822Body" kindref="compound">RFC2822Body</ref>):</highlight></codeline>
<codeline lineno="2604"><highlight class="normal"></highlight></codeline>
<codeline lineno="2605"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>and<sp/>subsequent<sp/>RFC2822-style<sp/>field_list<sp/>fields.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2606"><highlight class="normal"></highlight></codeline>
<codeline lineno="2607"><highlight class="normal"><sp/><sp/><sp/><sp/>patterns<sp/>=<sp/>RFC2822Body.patterns</highlight></codeline>
<codeline lineno="2608"><highlight class="normal"><sp/><sp/><sp/><sp/>initial_transitions<sp/>=<sp/>RFC2822Body.initial_transitions</highlight></codeline>
<codeline lineno="2609"><highlight class="normal"></highlight></codeline>
<codeline lineno="2610"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822List_1a795296ca55fdbb4bac683c053d9f0482" kindref="member">rfc2822</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;RFC2822-style<sp/>field<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>field,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822Body_1a9a4ea62bdfa2d79acb7314e31b9dae8e" kindref="member">rfc2822_field</ref>(match)</highlight></codeline>
<codeline lineno="2613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>field</highlight></codeline>
<codeline lineno="2614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RFC2822List_1a87fc48861de8eba314d012d041ec3079" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;RFC2822List&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2616"><highlight class="normal"></highlight></codeline>
<codeline lineno="2617"><highlight class="normal"><sp/><sp/><sp/><sp/>blank<sp/>=<sp/>SpecializedBody.invalid_input</highlight></codeline>
<codeline lineno="2618"><highlight class="normal"></highlight></codeline>
<codeline lineno="2619"><highlight class="normal"></highlight></codeline>
<codeline lineno="2620" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ExtensionOptions" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ExtensionOptions" kindref="compound">ExtensionOptions</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1FieldList" kindref="compound">FieldList</ref>):</highlight></codeline>
<codeline lineno="2621"><highlight class="normal"></highlight></codeline>
<codeline lineno="2622"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2623"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Parse<sp/>field_list<sp/>fields<sp/>for<sp/>extension<sp/>options.</highlight></codeline>
<codeline lineno="2624"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2625"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>No<sp/>nested<sp/>parsing<sp/>is<sp/>done<sp/>(including<sp/>inline<sp/>markup<sp/>parsing).</highlight></codeline>
<codeline lineno="2626"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2627"><highlight class="normal"></highlight></codeline>
<codeline lineno="2628"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1ExtensionOptions_1a1e6c31a7bd079fd83ef983d41b695b75" kindref="member">parse_field_body</ref>(self,<sp/>indented,<sp/>offset,<sp/>node):</highlight></codeline>
<codeline lineno="2629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Override<sp/>`Body.parse_field_body`<sp/>for<sp/>simpler<sp/>parsing.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>list(indented)<sp/>+<sp/>[</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="2632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>line.strip():</highlight></codeline>
<codeline lineno="2633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines.append(line)</highlight></codeline>
<codeline lineno="2634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>lines:</highlight></codeline>
<codeline lineno="2635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(lines)</highlight></codeline>
<codeline lineno="2636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>+=<sp/><ref refid="classdocutils_1_1nodes_1_1paragraph" kindref="compound">nodes.paragraph</ref>(text,<sp/>text)</highlight></codeline>
<codeline lineno="2637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2638"><highlight class="normal"></highlight></codeline>
<codeline lineno="2639"><highlight class="normal"></highlight></codeline>
<codeline lineno="2640" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1LineBlock" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1LineBlock" kindref="compound">LineBlock</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>):</highlight></codeline>
<codeline lineno="2641"><highlight class="normal"></highlight></codeline>
<codeline lineno="2642"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>and<sp/>subsequent<sp/>lines<sp/>of<sp/>a<sp/>line_block.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2643"><highlight class="normal"></highlight></codeline>
<codeline lineno="2644"><highlight class="normal"><sp/><sp/><sp/><sp/>blank<sp/>=<sp/>SpecializedBody.invalid_input</highlight></codeline>
<codeline lineno="2645"><highlight class="normal"></highlight></codeline>
<codeline lineno="2646"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1af9f80e55dd70eebde1fdf41cc5c79723" kindref="member">line_block</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;New<sp/>line<sp/>of<sp/>line<sp/>block.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="2649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line,<sp/>messages,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a5e338f2ed171eec25f8d9d836b5b5d7d" kindref="member">line_block_line</ref>(match,<sp/>lineno)</highlight></codeline>
<codeline lineno="2650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>line</highlight></codeline>
<codeline lineno="2651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref>.parent<sp/>+=<sp/>messages</highlight></codeline>
<codeline lineno="2652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1LineBlock_1a027c0b024ea632b3179eab2427cfda59" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2654"><highlight class="normal"></highlight></codeline>
<codeline lineno="2655"><highlight class="normal"></highlight></codeline>
<codeline lineno="2656" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Explicit" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Explicit" kindref="compound">Explicit</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody" kindref="compound">SpecializedBody</ref>):</highlight></codeline>
<codeline lineno="2657"><highlight class="normal"></highlight></codeline>
<codeline lineno="2658"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>and<sp/>subsequent<sp/>explicit<sp/>markup<sp/>construct.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2659"><highlight class="normal"></highlight></codeline>
<codeline lineno="2660"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1a5788c2c2476cdb4924a535e6f6b29874" kindref="member">explicit_markup</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Footnotes,<sp/>hyperlink<sp/>targets,<sp/>directives,<sp/>comments.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1acfe1842b1114a0bba1c213c15eedbee2" kindref="member">explicit_construct</ref>(match)</highlight></codeline>
<codeline lineno="2663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>nodelist</highlight></codeline>
<codeline lineno="2664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Explicit_1ac178b7b1d8ae8368eca0da38edf5a8a5" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2666"><highlight class="normal"></highlight></codeline>
<codeline lineno="2667"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedBody_1ad96d9821bf6a916ab65389ce8f77f507" kindref="member">anonymous</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Anonymous<sp/>hyperlink<sp/>targets.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a945fdd8b66ffd8c19bd4754a0568173d" kindref="member">anonymous_target</ref>(match)</highlight></codeline>
<codeline lineno="2670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>nodelist</highlight></codeline>
<codeline lineno="2671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Explicit_1ac178b7b1d8ae8368eca0da38edf5a8a5" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2673"><highlight class="normal"></highlight></codeline>
<codeline lineno="2674"><highlight class="normal"><sp/><sp/><sp/><sp/>blank<sp/>=<sp/>SpecializedBody.invalid_input</highlight></codeline>
<codeline lineno="2675"><highlight class="normal"></highlight></codeline>
<codeline lineno="2676"><highlight class="normal"></highlight></codeline>
<codeline lineno="2677" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SubstitutionDef" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SubstitutionDef" kindref="compound">SubstitutionDef</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body" kindref="compound">Body</ref>):</highlight></codeline>
<codeline lineno="2678"><highlight class="normal"></highlight></codeline>
<codeline lineno="2679"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2680"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Parser<sp/>for<sp/>the<sp/>contents<sp/>of<sp/>a<sp/>substitution_definition<sp/>element.</highlight></codeline>
<codeline lineno="2681"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2682"><highlight class="normal"></highlight></codeline>
<codeline lineno="2683"><highlight class="normal"><sp/><sp/><sp/><sp/>patterns<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="2684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;embedded_directive&apos;</highlight><highlight class="normal">:<sp/>re.compile(</highlight><highlight class="stringliteral">r&apos;(%s)::(<sp/>+|$)&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>%<sp/>Inliner.simplename),</highlight></codeline>
<codeline lineno="2686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;&apos;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="2687"><highlight class="normal"><sp/><sp/><sp/><sp/>initial_transitions<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;embedded_directive&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="2688"><highlight class="normal"></highlight></codeline>
<codeline lineno="2689"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SubstitutionDef_1adcff7feeeb4982718b49edddb498b15a" kindref="member">embedded_directive</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a01a2c2073b1b2910321cd549b5ef17ca" kindref="member">directive</ref>(match,</highlight></codeline>
<codeline lineno="2691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>alt=self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref>[</highlight><highlight class="stringliteral">&apos;names&apos;</highlight><highlight class="normal">][0])</highlight></codeline>
<codeline lineno="2692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a94df4547d8ce5474d838e4062d8f9efb" kindref="member">parent</ref><sp/>+=<sp/>nodelist</highlight></codeline>
<codeline lineno="2693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.at_eof():</highlight></codeline>
<codeline lineno="2694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SubstitutionDef_1a28dbea6089c053076fe38b49560ca82b" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError</highlight></codeline>
<codeline lineno="2696"><highlight class="normal"></highlight></codeline>
<codeline lineno="2697"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SubstitutionDef_1a3d8cb53002261ec07b0366fa32388665" kindref="member">text</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.at_eof():</highlight></codeline>
<codeline lineno="2699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SubstitutionDef_1a28dbea6089c053076fe38b49560ca82b" kindref="member">blank_finish</ref><sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Body_1a57ade338cde1c95c4e8cab8452da8113" kindref="member">state_machine</ref><ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.is_next_line_blank()</highlight></codeline>
<codeline lineno="2700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError</highlight></codeline>
<codeline lineno="2701"><highlight class="normal"></highlight></codeline>
<codeline lineno="2702"><highlight class="normal"></highlight></codeline>
<codeline lineno="2703" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text" kindref="compound">Text</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState" kindref="compound">RSTState</ref>):</highlight></codeline>
<codeline lineno="2704"><highlight class="normal"></highlight></codeline>
<codeline lineno="2705"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2706"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Classifier<sp/>of<sp/>second<sp/>line<sp/>of<sp/>a<sp/>text<sp/>block.</highlight></codeline>
<codeline lineno="2707"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2708"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Could<sp/>be<sp/>a<sp/>paragraph,<sp/>a<sp/>definition<sp/>list<sp/>item,<sp/>or<sp/>a<sp/>title.</highlight></codeline>
<codeline lineno="2709"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2710"><highlight class="normal"></highlight></codeline>
<codeline lineno="2711"><highlight class="normal"><sp/><sp/><sp/><sp/>patterns<sp/>=<sp/>{</highlight><highlight class="stringliteral">&apos;underline&apos;</highlight><highlight class="normal">:<sp/>Body.patterns[</highlight><highlight class="stringliteral">&apos;line&apos;</highlight><highlight class="normal">],</highlight></codeline>
<codeline lineno="2712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;&apos;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="2713"><highlight class="normal"><sp/><sp/><sp/><sp/>initial_transitions<sp/>=<sp/>[(</highlight><highlight class="stringliteral">&apos;underline&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">),<sp/>(</highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">)]</highlight></codeline>
<codeline lineno="2714"><highlight class="normal"></highlight></codeline>
<codeline lineno="2715"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1ab4146fb10580188defa4b47ad5ea9fa1" kindref="member">blank</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;End<sp/>of<sp/>paragraph.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>NOTE:<sp/>self.paragraph<sp/>returns<sp/>[node,<sp/>system_message(s)],<sp/>literalnext</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paragraph,<sp/>literalnext<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a77f9de6f6116937a098014209464db6c" kindref="member">paragraph</ref>(</highlight></codeline>
<codeline lineno="2719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>context,<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()<sp/>-<sp/>1)</highlight></codeline>
<codeline lineno="2720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>paragraph</highlight></codeline>
<codeline lineno="2721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>literalnext:</highlight></codeline>
<codeline lineno="2722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a14781dcdab7d72f6e170f53fa5a53a2a" kindref="member">literal_block</ref>()</highlight></codeline>
<codeline lineno="2723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2724"><highlight class="normal"></highlight></codeline>
<codeline lineno="2725"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a0800dd94a11174ad3c500e9fee215b48" kindref="member">eof</ref>(self,<sp/>context):</highlight></codeline>
<codeline lineno="2726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>context:</highlight></codeline>
<codeline lineno="2727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1ab4146fb10580188defa4b47ad5ea9fa1" kindref="member">blank</ref><ref refid="classdocutils_1_1statemachine_1_1StateWS_1a2db0563a9c868a20109777f99e1a0f99" kindref="member">blank</ref>(</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>context,<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[]</highlight></codeline>
<codeline lineno="2729"><highlight class="normal"></highlight></codeline>
<codeline lineno="2730"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">indent(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Definition<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1definition__list" kindref="compound">nodes.definition_list</ref>()</highlight></codeline>
<codeline lineno="2733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>the<sp/>definition<sp/>list<sp/>starts<sp/>on<sp/>the<sp/>line<sp/>before<sp/>the<sp/>indent:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="2735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl.source,<sp/>dl.line<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(lineno)</highlight></codeline>
<codeline lineno="2736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl_item,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a53ab2181cf23dc44d739f2e87846f1d7" kindref="member">definition_list_item</ref>(context)</highlight></codeline>
<codeline lineno="2737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl<sp/>+=<sp/>dl_item</highlight></codeline>
<codeline lineno="2738"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>dl</highlight></codeline>
<codeline lineno="2739"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset<sp/>+<sp/>1<sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>next<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2740"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newline_offset,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa87f97b7d8a883b05e519fafb0eff413" kindref="member">nested_list_parse</ref>(</highlight></codeline>
<codeline lineno="2741"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="2742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="2743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node=dl,<sp/>initial_state=</highlight><highlight class="stringliteral">&apos;DefinitionList&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blank_finish=blank_finish,<sp/>blank_finish_state=</highlight><highlight class="stringliteral">&apos;Definition&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(newline_offset)</highlight></codeline>
<codeline lineno="2746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="2747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Definition<sp/>list&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2749"><highlight class="normal"></highlight></codeline>
<codeline lineno="2750"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">underline(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Section<sp/>title.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="2753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>title<sp/>=<sp/>context[0].rstrip()</highlight></codeline>
<codeline lineno="2754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>underline<sp/>=<sp/>match.string.rstrip()</highlight></codeline>
<codeline lineno="2755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>source<sp/>=<sp/>title<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>underline</highlight></codeline>
<codeline lineno="2756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>column_width(title)<sp/>&gt;<sp/>len(underline):</highlight></codeline>
<codeline lineno="2758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(underline)<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="2759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.match_titles:</highlight></codeline>
<codeline lineno="2760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.info(</highlight></codeline>
<codeline lineno="2761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Possible<sp/>title<sp/>underline,<sp/>too<sp/>short<sp/>for<sp/>the<sp/>title.\n&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Treating<sp/>it<sp/>as<sp/>ordinary<sp/>text<sp/>because<sp/>it&apos;s<sp/>so<sp/>short.&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="2764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="2765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1statemachine_1_1TransitionCorrection" kindref="compound">statemachine.TransitionCorrection</ref>(</highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>context[0]<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line</highlight></codeline>
<codeline lineno="2768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="2769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Title<sp/>underline<sp/>too<sp/>short.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(blocktext,<sp/>blocktext),</highlight></codeline>
<codeline lineno="2771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="2772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages.append(msg)</highlight></codeline>
<codeline lineno="2773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.match_titles:</highlight></codeline>
<codeline lineno="2774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>context[0]<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line</highlight></codeline>
<codeline lineno="2775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>We<sp/>need<sp/>get_source_and_line()<sp/>here<sp/>to<sp/>report<sp/>correctly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="2777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>TODO:<sp/>why<sp/>is<sp/>abs_line_number()<sp/>==<sp/>srcline+1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>if<sp/>the<sp/>error<sp/>is<sp/>in<sp/>a<sp/>table<sp/>(try<sp/>with<sp/>test_tables.py)?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>print(&quot;get_source_and_line&quot;,<sp/>srcline)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>print(&quot;abs_line_number&quot;,<sp/>self.state_machine.abs_line_number())</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.severe(</highlight></codeline>
<codeline lineno="2782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Unexpected<sp/>section<sp/>title.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(blocktext,<sp/>blocktext),</highlight></codeline>
<codeline lineno="2784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>source=src,<sp/>line=srcline)</highlight></codeline>
<codeline lineno="2785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>messages</highlight></codeline>
<codeline lineno="2786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="2787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>style<sp/>=<sp/>underline[0]</highlight></codeline>
<codeline lineno="2789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>context[:]<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="2790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a3c950bcb6be79f0d128e79d6ccb50ee7" kindref="member">section</ref>(title,<sp/>source,<sp/>style,<sp/>lineno<sp/>-<sp/>1,<sp/>messages)</highlight></codeline>
<codeline lineno="2791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2792"><highlight class="normal"></highlight></codeline>
<codeline lineno="2793"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a5dd1a034ebbefc14d10d0e9a8b50a78f" kindref="member">text</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Paragraph.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>startline<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="2796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_text_block(flush_left=</highlight><highlight class="keyword">True</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1statemachine_1_1UnexpectedIndentationError" kindref="compound">statemachine.UnexpectedIndentationError</ref><sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>err:</highlight></codeline>
<codeline lineno="2800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block,<sp/>src,<sp/>srcline<sp/>=<sp/>err.args</highlight></codeline>
<codeline lineno="2801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight><highlight class="stringliteral">&apos;Unexpected<sp/>indentation.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>source=src,<sp/>line=srcline)</highlight></codeline>
<codeline lineno="2803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines<sp/>=<sp/>context<sp/>+<sp/>list(block)</highlight></codeline>
<codeline lineno="2804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>paragraph,<sp/>literalnext<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a77f9de6f6116937a098014209464db6c" kindref="member">paragraph</ref>(lines,<sp/>startline)</highlight></codeline>
<codeline lineno="2805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>paragraph</highlight></codeline>
<codeline lineno="2806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="2807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>literalnext:</highlight></codeline>
<codeline lineno="2808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2809"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.next_line()</highlight></codeline>
<codeline lineno="2810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>EOFError:</highlight></codeline>
<codeline lineno="2811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a14781dcdab7d72f6e170f53fa5a53a2a" kindref="member">literal_block</ref>()</highlight></codeline>
<codeline lineno="2813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="2814"><highlight class="normal"></highlight></codeline>
<codeline lineno="2815"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a14781dcdab7d72f6e170f53fa5a53a2a" kindref="member">literal_block</ref>(self):</highlight></codeline>
<codeline lineno="2816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Return<sp/>a<sp/>list<sp/>of<sp/>nodes.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_indented()</highlight></codeline>
<codeline lineno="2819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>indented<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>indented[-1].strip():</highlight></codeline>
<codeline lineno="2820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indented.trim_end()</highlight></codeline>
<codeline lineno="2821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>indented:</highlight></codeline>
<codeline lineno="2822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a3125af66302e633a736bad68063d8b28" kindref="member">quoted_literal_block</ref>()</highlight></codeline>
<codeline lineno="2823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(indented)</highlight></codeline>
<codeline lineno="2824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>literal_block<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(data,<sp/>data)</highlight></codeline>
<codeline lineno="2825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(literal_block.source,</highlight></codeline>
<codeline lineno="2826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>literal_block.line)<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(offset+1)</highlight></codeline>
<codeline lineno="2827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist<sp/>=<sp/>[literal_block]</highlight></codeline>
<codeline lineno="2828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>blank_finish:</highlight></codeline>
<codeline lineno="2829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodelist.append(self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1ab50b597c5a44b4b55c05b274f6d64463" kindref="member">unindent_warning</ref>(</highlight><highlight class="stringliteral">&apos;Literal<sp/>block&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="2830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nodelist</highlight></codeline>
<codeline lineno="2831"><highlight class="normal"></highlight></codeline>
<codeline lineno="2832"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a3125af66302e633a736bad68063d8b28" kindref="member">quoted_literal_block</ref>(self):</highlight></codeline>
<codeline lineno="2833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>abs_line_offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_offset()</highlight></codeline>
<codeline lineno="2834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line_offset</highlight></codeline>
<codeline lineno="2835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parent_node<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1Element" kindref="compound">nodes.Element</ref>()</highlight></codeline>
<codeline lineno="2836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>new_abs_offset<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(</highlight></codeline>
<codeline lineno="2837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.input_lines[offset:],</highlight></codeline>
<codeline lineno="2838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>input_offset=abs_line_offset,<sp/>node=parent_node,<sp/>match_titles=</highlight><highlight class="keyword">False</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state_machine_kwargs={</highlight><highlight class="stringliteral">&apos;state_classes&apos;</highlight><highlight class="normal">:<sp/>(QuotedLiteralBlock,),</highlight></codeline>
<codeline lineno="2840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;initial_state&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&apos;QuotedLiteralBlock&apos;</highlight><highlight class="normal">})</highlight></codeline>
<codeline lineno="2841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a6a8818a4ab37653cd050ad3c0f08875a" kindref="member">goto_line</ref>(new_abs_offset)</highlight></codeline>
<codeline lineno="2842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>parent_node.children</highlight></codeline>
<codeline lineno="2843"><highlight class="normal"></highlight></codeline>
<codeline lineno="2844"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a53ab2181cf23dc44d739f2e87846f1d7" kindref="member">definition_list_item</ref>(self,<sp/>termline):</highlight></codeline>
<codeline lineno="2845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>the<sp/>parser<sp/>is<sp/>already<sp/>on<sp/>the<sp/>second<sp/>(indented)<sp/>line:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2846"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dd_lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="2847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_lineno<sp/>=<sp/>dd_lineno<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="2848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(indented,<sp/>indent,<sp/>line_offset,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_indented()</highlight></codeline>
<codeline lineno="2850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl_item<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1definition__list__item" kindref="compound">nodes.definition_list_item</ref>(</highlight></codeline>
<codeline lineno="2851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(termline<sp/>+<sp/>list(indented)))</highlight></codeline>
<codeline lineno="2852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(dl_item.source,</highlight></codeline>
<codeline lineno="2853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl_item.line)<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(dt_lineno)</highlight></codeline>
<codeline lineno="2854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_nodes,<sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1aebc50ac5973fcd6a7780f6753227e5d5" kindref="member">term</ref>(termline,<sp/>dt_lineno)</highlight></codeline>
<codeline lineno="2855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl_item<sp/>+=<sp/>dt_nodes</highlight></codeline>
<codeline lineno="2856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dd<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1definition" kindref="compound">nodes.definition</ref>(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">,<sp/>*messages)</highlight></codeline>
<codeline lineno="2857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dd.source,<sp/>dd.line<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(dd_lineno)</highlight></codeline>
<codeline lineno="2858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl_item<sp/>+=<sp/>dd</highlight></codeline>
<codeline lineno="2859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>termline[0][-2:]<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;::&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dd<sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.info(</highlight></codeline>
<codeline lineno="2861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Blank<sp/>line<sp/>missing<sp/>before<sp/>literal<sp/>block<sp/>(after<sp/>the<sp/>&quot;::&quot;)?<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Interpreted<sp/>as<sp/>a<sp/>definition<sp/>list<sp/>item.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=dd_lineno)</highlight></codeline>
<codeline lineno="2864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>TODO:<sp/>drop<sp/>a<sp/>definition<sp/>if<sp/>it<sp/>is<sp/>an<sp/>empty<sp/>comment<sp/>to<sp/>allow</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/><sp/><sp/><sp/>definition<sp/>list<sp/>items<sp/>with<sp/>several<sp/>terms?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/><sp/><sp/><sp/>https://sourceforge.net/p/docutils/feature-requests/60/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1acf826b13abf1d45e97e948d107fef4bb" kindref="member">nested_parse</ref>(indented,<sp/>input_offset=line_offset,<sp/>node=dd)</highlight></codeline>
<codeline lineno="2868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>dl_item,<sp/>blank_finish</highlight></codeline>
<codeline lineno="2869"><highlight class="normal"></highlight></codeline>
<codeline lineno="2870"><highlight class="normal"><sp/><sp/><sp/><sp/>classifier_delimiter<sp/>=<sp/>re.compile(</highlight><highlight class="stringliteral">&apos;<sp/>+:<sp/>+&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="2871"><highlight class="normal"></highlight></codeline>
<codeline lineno="2872"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1aebc50ac5973fcd6a7780f6753227e5d5" kindref="member">term</ref>(self,<sp/>lines,<sp/>lineno):</highlight></codeline>
<codeline lineno="2873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Return<sp/>a<sp/>definition_list&apos;s<sp/>term<sp/>and<sp/>optional<sp/>classifiers.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>len(lines)<sp/>==<sp/>1</highlight></codeline>
<codeline lineno="2875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text_nodes,<sp/>messages<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a7f7691db57b736f35c1ebc6d56a9dff9" kindref="member">inline_text</ref>(lines[0],<sp/>lineno)</highlight></codeline>
<codeline lineno="2876"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1term" kindref="compound">nodes.term</ref>(lines[0])</highlight></codeline>
<codeline lineno="2877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt.source,<sp/>dt.line<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(lineno)</highlight></codeline>
<codeline lineno="2878"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_list<sp/>=<sp/>[dt]</highlight></codeline>
<codeline lineno="2879"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>i<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>range(len(text_nodes)):</highlight></codeline>
<codeline lineno="2880"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node<sp/>=<sp/>text_nodes[i]</highlight></codeline>
<codeline lineno="2881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>isinstance(node,<sp/><ref refid="classdocutils_1_1nodes_1_1Text" kindref="compound">nodes.Text</ref>):</highlight></codeline>
<codeline lineno="2882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parts<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a8df9f3f8cacdda4110b6aa7fd6a18285" kindref="member">classifier_delimiter</ref>.split(node)</highlight></codeline>
<codeline lineno="2883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(parts)<sp/>==<sp/>1:</highlight></codeline>
<codeline lineno="2884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_list[-1]<sp/>+=<sp/>node</highlight></codeline>
<codeline lineno="2885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/>parts[0].rstrip()</highlight></codeline>
<codeline lineno="2887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>textnode<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1Text" kindref="compound">nodes.Text</ref>(text)</highlight></codeline>
<codeline lineno="2888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_list[-1]<sp/>+=<sp/>textnode</highlight></codeline>
<codeline lineno="2889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>part<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>parts[1:]:</highlight></codeline>
<codeline lineno="2890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_list.append(</highlight></codeline>
<codeline lineno="2891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1classifier" kindref="compound">nodes.classifier</ref>(unescape(part,<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal">),<sp/>part))</highlight></codeline>
<codeline lineno="2892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_list[-1]<sp/>+=<sp/>node</highlight></codeline>
<codeline lineno="2894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>node_list,<sp/>messages</highlight></codeline>
<codeline lineno="2895"><highlight class="normal"></highlight></codeline>
<codeline lineno="2896"><highlight class="normal"></highlight></codeline>
<codeline lineno="2897" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText" kindref="compound">SpecializedText</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text" kindref="compound">Text</ref>):</highlight></codeline>
<codeline lineno="2898"><highlight class="normal"></highlight></codeline>
<codeline lineno="2899"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2900"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Superclass<sp/>for<sp/>second<sp/>and<sp/>subsequent<sp/>lines<sp/>of<sp/>Text-variants.</highlight></codeline>
<codeline lineno="2901"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="2902"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>All<sp/>transition<sp/>methods<sp/>are<sp/>disabled.<sp/>Override<sp/>individual<sp/>methods<sp/>in</highlight></codeline>
<codeline lineno="2903"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>subclasses<sp/>to<sp/>re-enable.</highlight></codeline>
<codeline lineno="2904"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2905"><highlight class="normal"></highlight></codeline>
<codeline lineno="2906"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText_1ab886270193bb78077515bdb62528f083" kindref="member">eof</ref>(self,<sp/>context):</highlight></codeline>
<codeline lineno="2907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Incomplete<sp/>construct.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[]</highlight></codeline>
<codeline lineno="2909"><highlight class="normal"></highlight></codeline>
<codeline lineno="2910"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText_1a2584e25fe975f0ff8a5bdada1b497e74" kindref="member">invalid_input</ref>(self,<sp/>match=None,<sp/>context=None,<sp/>next_state=None):</highlight></codeline>
<codeline lineno="2911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Not<sp/>a<sp/>compound<sp/>element<sp/>member.<sp/>Abort<sp/>this<sp/>state<sp/>machine.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError</highlight></codeline>
<codeline lineno="2913"><highlight class="normal"></highlight></codeline>
<codeline lineno="2914"><highlight class="normal"><sp/><sp/><sp/><sp/>blank<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2915"><highlight class="normal"><sp/><sp/><sp/><sp/>indent<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2916"><highlight class="normal"><sp/><sp/><sp/><sp/>underline<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2917"><highlight class="normal"><sp/><sp/><sp/><sp/>text<sp/>=<sp/>invalid_input</highlight></codeline>
<codeline lineno="2918"><highlight class="normal"></highlight></codeline>
<codeline lineno="2919"><highlight class="normal"></highlight></codeline>
<codeline lineno="2920" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Definition" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Definition" kindref="compound">Definition</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText" kindref="compound">SpecializedText</ref>):</highlight></codeline>
<codeline lineno="2921"><highlight class="normal"></highlight></codeline>
<codeline lineno="2922"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Second<sp/>line<sp/>of<sp/>potential<sp/>definition_list_item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2923"><highlight class="normal"></highlight></codeline>
<codeline lineno="2924"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Definition_1ad3ebd1794c051c835ff40d79a155a78f" kindref="member">eof</ref>(self,<sp/>context):</highlight></codeline>
<codeline lineno="2925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Not<sp/>a<sp/>definition.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line(2)<sp/><sp/></highlight><highlight class="comment">#<sp/>so<sp/>parent<sp/>SM<sp/>can<sp/>reassess</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2927"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[]</highlight></codeline>
<codeline lineno="2928"><highlight class="normal"></highlight></codeline>
<codeline lineno="2929"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText_1acaddceac854bda4062588dc4cf9a6af4" kindref="member">indent</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Definition<sp/>list<sp/>item.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dl_item,<sp/>blank_finish<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Text_1a53ab2181cf23dc44d739f2e87846f1d7" kindref="member">definition_list_item</ref>(context)</highlight></codeline>
<codeline lineno="2932"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>dl_item</highlight></codeline>
<codeline lineno="2933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Definition_1a8ed9fa48ad602ee62f32134284912e13" kindref="member">blank_finish</ref><sp/>=<sp/>blank_finish</highlight></codeline>
<codeline lineno="2934"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;DefinitionList&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2935"><highlight class="normal"></highlight></codeline>
<codeline lineno="2936"><highlight class="normal"></highlight></codeline>
<codeline lineno="2937" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line" kindref="compound">Line</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText" kindref="compound">SpecializedText</ref>):</highlight></codeline>
<codeline lineno="2938"><highlight class="normal"></highlight></codeline>
<codeline lineno="2939"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="2940"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Second<sp/>line<sp/>of<sp/>over-<sp/>&amp;<sp/>underlined<sp/>section<sp/>title<sp/>or<sp/>transition<sp/>marker.</highlight></codeline>
<codeline lineno="2941"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2942"><highlight class="normal"></highlight></codeline>
<codeline lineno="2943"><highlight class="normal"><sp/><sp/><sp/><sp/>eofcheck<sp/>=<sp/>1<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>@@@<sp/>???</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2944"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Set<sp/>to<sp/>0<sp/>while<sp/>parsing<sp/>sections,<sp/>so<sp/>that<sp/>we<sp/>don&apos;t<sp/>catch<sp/>the<sp/>EOF.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2945"><highlight class="normal"></highlight></codeline>
<codeline lineno="2946"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1ac7195cad5fe0a562b3b03a7120974ee4" kindref="member">eof</ref>(self,<sp/>context):</highlight></codeline>
<codeline lineno="2947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Transition<sp/>marker<sp/>at<sp/>end<sp/>of<sp/>section<sp/>or<sp/>document.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker<sp/>=<sp/>context[0].strip()</highlight></codeline>
<codeline lineno="2949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref>.section_bubble_up_kludge:</highlight></codeline>
<codeline lineno="2950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a697f0286ecb7c2a4d64a7fadec9f98cc" kindref="member">memo</ref>.section_bubble_up_kludge<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>len(marker)<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="2952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1a9e5a047488ad509e0f1ef0456e88fb8c" kindref="member">state_correction</ref>(context)</highlight></codeline>
<codeline lineno="2953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1afa303b6d80b1c7a0b8a6d07cdd4ed952" kindref="member">eofcheck</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1a6072ecaf4a995cc8d2358cfdc8898a4c" kindref="member">eofcheck</ref>:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>ignore<sp/>EOFError<sp/>with<sp/>sections</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="2955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>lineno<sp/>=<sp/>self.state_machine.abs_line_number()<sp/>-<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transition<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1transition" kindref="compound">nodes.transition</ref>(rawsource=context[0])</highlight></codeline>
<codeline lineno="2957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transition.source<sp/>=<sp/>src</highlight></codeline>
<codeline lineno="2958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transition.line<sp/>=<sp/>srcline<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="2959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>transition.line<sp/>=<sp/>lineno</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>transition</highlight></codeline>
<codeline lineno="2961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1afa303b6d80b1c7a0b8a6d07cdd4ed952" kindref="member">eofcheck</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1a6072ecaf4a995cc8d2358cfdc8898a4c" kindref="member">eofcheck</ref><sp/>=<sp/>1</highlight></codeline>
<codeline lineno="2962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[]</highlight></codeline>
<codeline lineno="2963"><highlight class="normal"></highlight></codeline>
<codeline lineno="2964"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText_1a076abfd33d8f654cca8e859f8bc4830e" kindref="member">blank</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2965"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Transition<sp/>marker.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2966"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line()</highlight></codeline>
<codeline lineno="2967"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>marker<sp/>=<sp/>context[0].strip()</highlight></codeline>
<codeline lineno="2968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(marker)<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="2969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1a9e5a047488ad509e0f1ef0456e88fb8c" kindref="member">state_correction</ref>(context)</highlight></codeline>
<codeline lineno="2970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transition<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1transition" kindref="compound">nodes.transition</ref>(rawsource=marker)</highlight></codeline>
<codeline lineno="2971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transition.source<sp/>=<sp/>src</highlight></codeline>
<codeline lineno="2972"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transition.line<sp/>=<sp/>srcline<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="2973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>transition</highlight></codeline>
<codeline lineno="2974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2975"><highlight class="normal"></highlight></codeline>
<codeline lineno="2976"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText_1ab950526bd23612f5524e98f609dceea1" kindref="member">text</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="2977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Potential<sp/>over-<sp/>&amp;<sp/>underlined<sp/>title.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="2979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>overline<sp/>=<sp/>context[0]</highlight></codeline>
<codeline lineno="2980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>title<sp/>=<sp/>match.string</highlight></codeline>
<codeline lineno="2981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>underline<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>underline<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.next_line()</highlight></codeline>
<codeline lineno="2984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>EOFError:</highlight></codeline>
<codeline lineno="2985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>overline<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>title</highlight></codeline>
<codeline lineno="2986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(overline.rstrip())<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="2987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1ad80fe61f0f29994e6780e423d6b9b1e4" kindref="member">short_overline</ref>(context,<sp/>blocktext,<sp/>lineno,<sp/>2)</highlight></codeline>
<codeline lineno="2988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="2989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.severe(</highlight></codeline>
<codeline lineno="2990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Incomplete<sp/>section<sp/>title.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="2991"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(blocktext,<sp/>blocktext),</highlight></codeline>
<codeline lineno="2992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="2993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="2994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="2995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>source<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;%s\n%s\n%s&apos;</highlight><highlight class="normal"><sp/>%<sp/>(overline,<sp/>title,<sp/>underline)</highlight></codeline>
<codeline lineno="2996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>overline<sp/>=<sp/>overline.rstrip()</highlight></codeline>
<codeline lineno="2997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>underline<sp/>=<sp/>underline.rstrip()</highlight></codeline>
<codeline lineno="2998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a30dfc9f8434dbf8ed896c5015a1c9427" kindref="member">transitions</ref>[</highlight><highlight class="stringliteral">&apos;underline&apos;</highlight><highlight class="normal">][0].match(underline):</highlight></codeline>
<codeline lineno="2999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>overline<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>title<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>underline</highlight></codeline>
<codeline lineno="3000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(overline.rstrip())<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="3001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1ad80fe61f0f29994e6780e423d6b9b1e4" kindref="member">short_overline</ref>(context,<sp/>blocktext,<sp/>lineno,<sp/>2)</highlight></codeline>
<codeline lineno="3002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="3003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.severe(</highlight></codeline>
<codeline lineno="3004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Missing<sp/>matching<sp/>underline<sp/>for<sp/>section<sp/>title<sp/>overline.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(source,<sp/>source),</highlight></codeline>
<codeline lineno="3006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="3007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="3008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="3009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>overline<sp/>!=<sp/>underline:</highlight></codeline>
<codeline lineno="3010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>overline<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>title<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>underline</highlight></codeline>
<codeline lineno="3011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(overline.rstrip())<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="3012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1ad80fe61f0f29994e6780e423d6b9b1e4" kindref="member">short_overline</ref>(context,<sp/>blocktext,<sp/>lineno,<sp/>2)</highlight></codeline>
<codeline lineno="3013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="3014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.severe(</highlight></codeline>
<codeline lineno="3015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Title<sp/>overline<sp/>&amp;<sp/>underline<sp/>mismatch.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(source,<sp/>source),</highlight></codeline>
<codeline lineno="3017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="3018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="3019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="3020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>title<sp/>=<sp/>title.rstrip()</highlight></codeline>
<codeline lineno="3021"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="3022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>column_width(title)<sp/>&gt;<sp/>len(overline):</highlight></codeline>
<codeline lineno="3023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>overline<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>title<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>underline</highlight></codeline>
<codeline lineno="3024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(overline.rstrip())<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="3025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1ad80fe61f0f29994e6780e423d6b9b1e4" kindref="member">short_overline</ref>(context,<sp/>blocktext,<sp/>lineno,<sp/>2)</highlight></codeline>
<codeline lineno="3026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="3027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="3028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Title<sp/>overline<sp/>too<sp/>short.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(source,<sp/>source),</highlight></codeline>
<codeline lineno="3030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="3031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>messages.append(msg)</highlight></codeline>
<codeline lineno="3032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>style<sp/>=<sp/>(overline[0],<sp/>underline[0])</highlight></codeline>
<codeline lineno="3033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1afa303b6d80b1c7a0b8a6d07cdd4ed952" kindref="member">eofcheck</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1a6072ecaf4a995cc8d2358cfdc8898a4c" kindref="member">eofcheck</ref><sp/>=<sp/>0<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>@@@<sp/>not<sp/>sure<sp/>this<sp/>is<sp/>correct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a3c950bcb6be79f0d128e79d6ccb50ee7" kindref="member">section</ref>(title.lstrip(),<sp/>source,<sp/>style,<sp/>lineno<sp/>+<sp/>1,<sp/>messages)</highlight></codeline>
<codeline lineno="3035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1afa303b6d80b1c7a0b8a6d07cdd4ed952" kindref="member">eofcheck</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1a6072ecaf4a995cc8d2358cfdc8898a4c" kindref="member">eofcheck</ref><sp/>=<sp/>1</highlight></codeline>
<codeline lineno="3036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="3037"><highlight class="normal"></highlight></codeline>
<codeline lineno="3038"><highlight class="normal"><sp/><sp/><sp/><sp/>indent<sp/>=<sp/>text<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>indented<sp/>title</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3039"><highlight class="normal"></highlight></codeline>
<codeline lineno="3040"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1SpecializedText_1a96ce51a25ba08332609f417a33fdb1ce" kindref="member">underline</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="3041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>overline<sp/>=<sp/>context[0]</highlight></codeline>
<codeline lineno="3042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blocktext<sp/>=<sp/>overline<sp/>+<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>+<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.line</highlight></codeline>
<codeline lineno="3043"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lineno<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="3044"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(overline.rstrip())<sp/>&lt;<sp/>4:</highlight></codeline>
<codeline lineno="3045"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1ad80fe61f0f29994e6780e423d6b9b1e4" kindref="member">short_overline</ref>(context,<sp/>blocktext,<sp/>lineno,<sp/>1)</highlight></codeline>
<codeline lineno="3046"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight></codeline>
<codeline lineno="3047"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Invalid<sp/>section<sp/>title<sp/>or<sp/>transition<sp/>marker.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3048"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(blocktext,<sp/>blocktext),</highlight></codeline>
<codeline lineno="3049"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="3050"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="3051"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[],<sp/></highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/>[]</highlight></codeline>
<codeline lineno="3052"><highlight class="normal"></highlight></codeline>
<codeline lineno="3053"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1ad80fe61f0f29994e6780e423d6b9b1e4" kindref="member">short_overline</ref>(self,<sp/>context,<sp/>blocktext,<sp/>lineno,<sp/>lines=1):</highlight></codeline>
<codeline lineno="3054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.info(</highlight></codeline>
<codeline lineno="3055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Possible<sp/>incomplete<sp/>section<sp/>title.\nTreating<sp/>the<sp/>overline<sp/>as<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;ordinary<sp/>text<sp/>because<sp/>it&apos;s<sp/>so<sp/>short.&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=lineno)</highlight></codeline>
<codeline lineno="3058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>msg</highlight></codeline>
<codeline lineno="3059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1a9e5a047488ad509e0f1ef0456e88fb8c" kindref="member">state_correction</ref>(context,<sp/>lines)</highlight></codeline>
<codeline lineno="3060"><highlight class="normal"></highlight></codeline>
<codeline lineno="3061"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1Line_1a9e5a047488ad509e0f1ef0456e88fb8c" kindref="member">state_correction</ref>(self,<sp/>context,<sp/>lines=1):</highlight></codeline>
<codeline lineno="3062"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line(lines)</highlight></codeline>
<codeline lineno="3063"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>context[:]<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="3064"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/><ref refid="classdocutils_1_1statemachine_1_1StateCorrection" kindref="compound">statemachine.StateCorrection</ref>(</highlight><highlight class="stringliteral">&apos;Body&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="3065"><highlight class="normal"></highlight></codeline>
<codeline lineno="3066"><highlight class="normal"></highlight></codeline>
<codeline lineno="3067" refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock" kindref="compound">QuotedLiteralBlock</ref>(<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState" kindref="compound">RSTState</ref>):</highlight></codeline>
<codeline lineno="3068"><highlight class="normal"></highlight></codeline>
<codeline lineno="3069"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="3070"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Nested<sp/>parse<sp/>handler<sp/>for<sp/>quoted<sp/>(unindented)<sp/>literal<sp/>blocks.</highlight></codeline>
<codeline lineno="3071"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="3072"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Special-purpose.<sp/><sp/>Not<sp/>for<sp/>inclusion<sp/>in<sp/>`state_classes`.</highlight></codeline>
<codeline lineno="3073"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3074"><highlight class="normal"></highlight></codeline>
<codeline lineno="3075"><highlight class="normal"><sp/><sp/><sp/><sp/>patterns<sp/>=<sp/>{</highlight><highlight class="stringliteral">&apos;initial_quoted&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;(%(nonalphanum7bit)s)&apos;</highlight><highlight class="normal"><sp/>%<sp/>Body.pats,</highlight></codeline>
<codeline lineno="3076"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">r&apos;&apos;</highlight><highlight class="normal">}</highlight></codeline>
<codeline lineno="3077"><highlight class="normal"><sp/><sp/><sp/><sp/>initial_transitions<sp/>=<sp/>(</highlight><highlight class="stringliteral">&apos;initial_quoted&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;text&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="3078"><highlight class="normal"></highlight></codeline>
<codeline lineno="3079"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1ab3021b07bfd98eb22f0b0b8c85eefea1" kindref="member">__init__</ref>(self,<sp/>state_machine,<sp/>debug=False):</highlight></codeline>
<codeline lineno="3080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RSTState.__init__(self,<sp/>state_machine,<sp/>debug)</highlight></codeline>
<codeline lineno="3081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1ac476e0b1b1aa7ff1bf1ef5ec935b29a7" kindref="member">messages</ref><sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="3082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a96fc1fe4ae19009e47dc675745ab2063" kindref="member">initial_lineno</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3083"><highlight class="normal"></highlight></codeline>
<codeline lineno="3084"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a16a30d28dfbd14cf7ad3afba3008ce8b" kindref="member">blank</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="3085"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>context:</highlight></codeline>
<codeline lineno="3086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError</highlight></codeline>
<codeline lineno="3087"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="3088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>context,<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="3089"><highlight class="normal"></highlight></codeline>
<codeline lineno="3090"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a05f0821b8190958572c36af6c865a151" kindref="member">eof</ref>(self,<sp/>context):</highlight></codeline>
<codeline lineno="3091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>context:</highlight></codeline>
<codeline lineno="3092"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>src,<sp/>srcline<sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.get_source_and_line(</highlight></codeline>
<codeline lineno="3093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a96fc1fe4ae19009e47dc675745ab2063" kindref="member">initial_lineno</ref>)</highlight></codeline>
<codeline lineno="3094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>text<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;\n&apos;</highlight><highlight class="normal">.join(context)</highlight></codeline>
<codeline lineno="3095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>literal_block<sp/>=<sp/><ref refid="classdocutils_1_1nodes_1_1literal__block" kindref="compound">nodes.literal_block</ref>(text,<sp/>text)</highlight></codeline>
<codeline lineno="3096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>literal_block.source<sp/>=<sp/>src</highlight></codeline>
<codeline lineno="3097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>literal_block.line<sp/>=<sp/>srcline</highlight></codeline>
<codeline lineno="3098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>literal_block</highlight></codeline>
<codeline lineno="3099"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="3100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.warning(</highlight></codeline>
<codeline lineno="3101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Literal<sp/>block<sp/>expected;<sp/>none<sp/>found.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="3103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/><sp/></highlight><highlight class="comment">#<sp/>src<sp/>not<sp/>available,<sp/>statemachine.input_lines<sp/>is<sp/>empty</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line()</highlight></codeline>
<codeline lineno="3105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1aa17ebbfdebc7afa81f28fd0653b83bd9" kindref="member">parent</ref><sp/>+=<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1ac476e0b1b1aa7ff1bf1ef5ec935b29a7" kindref="member">messages</ref></highlight></codeline>
<codeline lineno="3106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[]</highlight></codeline>
<codeline lineno="3107"><highlight class="normal"></highlight></codeline>
<codeline lineno="3108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">indent(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="3109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">assert</highlight><highlight class="normal"><sp/>context,<sp/>(</highlight><highlight class="stringliteral">&apos;QuotedLiteralBlock.indent:<sp/>context<sp/>should<sp/>not<sp/>&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;be<sp/>empty!&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="3111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1ac476e0b1b1aa7ff1bf1ef5ec935b29a7" kindref="member">messages</ref>.append(</highlight></codeline>
<codeline lineno="3112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight><highlight class="stringliteral">&apos;Unexpected<sp/>indentation.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()))</highlight></codeline>
<codeline lineno="3114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line()</highlight></codeline>
<codeline lineno="3115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError</highlight></codeline>
<codeline lineno="3116"><highlight class="normal"></highlight></codeline>
<codeline lineno="3117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a57e0a104a33482b1c98495f58bb0b2aa" kindref="member">initial_quoted</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="3118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Match<sp/>arbitrary<sp/>quote<sp/>character<sp/>on<sp/>the<sp/>first<sp/>line<sp/>only.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1ad670027811b24b16e424eaf53929e4d8" kindref="member">remove_transition</ref>(</highlight><highlight class="stringliteral">&apos;initial_quoted&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="3120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>quote<sp/>=<sp/>match.string[0]</highlight></codeline>
<codeline lineno="3121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/>re.compile(re.escape(quote))</highlight></codeline>
<codeline lineno="3122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>New<sp/>transition<sp/>matches<sp/>consistent<sp/>quotes<sp/>only:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a58d83467faf42d8418d6b976a64327a8" kindref="member">add_transition</ref>(</highlight><highlight class="stringliteral">&apos;quoted&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pattern,<sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a49ee15b2911e043efe696d6135cd53ce" kindref="member">quoted</ref><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a302e4fc6777bca707fd165a7497a00e1" kindref="member">quoted</ref>,<sp/>self.__class__.__name__))</highlight></codeline>
<codeline lineno="3125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a96fc1fe4ae19009e47dc675745ab2063" kindref="member">initial_lineno</ref><sp/>=<sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()</highlight></codeline>
<codeline lineno="3126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[match.string],<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="3127"><highlight class="normal"></highlight></codeline>
<codeline lineno="3128"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a49ee15b2911e043efe696d6135cd53ce" kindref="member">quoted</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="3129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;Match<sp/>consistent<sp/>quotes<sp/>on<sp/>subsequent<sp/>lines.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>context.append(match.string)</highlight></codeline>
<codeline lineno="3131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>context,<sp/>next_state,<sp/>[]</highlight></codeline>
<codeline lineno="3132"><highlight class="normal"></highlight></codeline>
<codeline lineno="3133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1a10407e42c31077205c013a9003fa0bbe" kindref="member">text</ref>(self,<sp/>match,<sp/>context,<sp/>next_state):</highlight></codeline>
<codeline lineno="3134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>context:</highlight></codeline>
<codeline lineno="3135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1QuotedLiteralBlock_1ac476e0b1b1aa7ff1bf1ef5ec935b29a7" kindref="member">messages</ref>.append(</highlight></codeline>
<codeline lineno="3136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1parsers_1_1rst_1_1states_1_1RSTState_1a492316982b5cfd692fe05302d09d70c9" kindref="member">reporter</ref>.error(</highlight><highlight class="stringliteral">&apos;Inconsistent<sp/>literal<sp/>block<sp/>quoting.&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="3137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line=self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.abs_line_number()))</highlight></codeline>
<codeline lineno="3138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdocutils_1_1statemachine_1_1State_1a53b7644cdad55f7cf544d7431b021571" kindref="member">state_machine</ref>.previous_line()</highlight></codeline>
<codeline lineno="3139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>EOFError</highlight></codeline>
<codeline lineno="3140"><highlight class="normal"></highlight></codeline>
<codeline lineno="3141"><highlight class="normal"></highlight></codeline>
<codeline lineno="3142"><highlight class="normal">state_classes<sp/>=<sp/>(Body,<sp/>BulletList,<sp/>DefinitionList,<sp/>EnumeratedList,<sp/>FieldList,</highlight></codeline>
<codeline lineno="3143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>OptionList,<sp/>LineBlock,<sp/>ExtensionOptions,<sp/>Explicit,<sp/>Text,</highlight></codeline>
<codeline lineno="3144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Definition,<sp/>Line,<sp/>SubstitutionDef,<sp/>RFC2822Body,<sp/>RFC2822List)</highlight></codeline>
<codeline lineno="3145"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;Standard<sp/>set<sp/>of<sp/>State<sp/>classes<sp/>used<sp/>to<sp/>start<sp/>`RSTStateMachine`.&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="docs/venv/lib/python3.12/site-packages/docutils/parsers/rst/states.py"/>
  </compounddef>
</doxygen>
